this.createjs=this.createjs||{},function(){"use strict";var a=createjs.PreloadJS=createjs.PreloadJS||{};a.version="0.4.1",a.buildDate="Thu, 12 Dec 2013 23:33:38 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(a,b,c){this.initialize(a,b,c)},b=a.prototype;b.type=null,b.target=null,b.currentTarget=null,b.eventPhase=0,b.bubbles=!1,b.cancelable=!1,b.timeStamp=0,b.defaultPrevented=!1,b.propagationStopped=!1,b.immediatePropagationStopped=!1,b.removed=!1,b.initialize=function(a,b,c){this.type=a,this.bubbles=b,this.cancelable=c,this.timeStamp=(new Date).getTime()},b.preventDefault=function(){this.defaultPrevented=!0},b.stopPropagation=function(){this.propagationStopped=!0},b.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},b.remove=function(){this.removed=!0},b.clone=function(){return new a(this.type,this.bubbles,this.cancelable)},b.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=a}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(){},b=a.prototype;a.initialize=function(a){a.addEventListener=b.addEventListener,a.on=b.on,a.removeEventListener=a.off=b.removeEventListener,a.removeAllEventListeners=b.removeAllEventListeners,a.hasEventListener=b.hasEventListener,a.dispatchEvent=b.dispatchEvent,a._dispatchEvent=b._dispatchEvent,a.willTrigger=b.willTrigger},b._listeners=null,b._captureListeners=null,b.initialize=function(){},b.addEventListener=function(a,b,c){var d;d=c?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var e=d[a];return e&&this.removeEventListener(a,b,c),e=d[a],e?e.push(b):d[a]=[b],b},b.on=function(a,b,c,d,e,f){return b.handleEvent&&(c=c||b,b=b.handleEvent),c=c||this,this.addEventListener(a,function(a){b.call(c,a,e),d&&a.remove()},f)},b.removeEventListener=function(a,b,c){var d=c?this._captureListeners:this._listeners;if(d){var e=d[a];if(e)for(var f=0,g=e.length;g>f;f++)if(e[f]==b){1==g?delete d[a]:e.splice(f,1);break}}},b.off=b.removeEventListener,b.removeAllEventListeners=function(a){a?(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null},b.dispatchEvent=function(a,b){if("string"==typeof a){var c=this._listeners;if(!c||!c[a])return!1;a=new createjs.Event(a)}if(a.target=b||this,a.bubbles&&this.parent){for(var d=this,e=[d];d.parent;)e.push(d=d.parent);var f,g=e.length;for(f=g-1;f>=0&&!a.propagationStopped;f--)e[f]._dispatchEvent(a,1+(0==f));for(f=1;g>f&&!a.propagationStopped;f++)e[f]._dispatchEvent(a,3)}else this._dispatchEvent(a,2);return a.defaultPrevented},b.hasEventListener=function(a){var b=this._listeners,c=this._captureListeners;return!!(b&&b[a]||c&&c[a])},b.willTrigger=function(a){for(var b=this;b;){if(b.hasEventListener(a))return!0;b=b.parent}return!1},b.toString=function(){return"[EventDispatcher]"},b._dispatchEvent=function(a,b){var c,d=1==b?this._captureListeners:this._listeners;if(a&&d){var e=d[a.type];if(!e||!(c=e.length))return;a.currentTarget=this,a.eventPhase=b,a.removed=!1,e=e.slice();for(var f=0;c>f&&!a.immediatePropagationStopped;f++){var g=e[f];g.handleEvent?g.handleEvent(a):g(a),a.removed&&(this.off(a.type,g,1==b),a.removed=!1)}}},createjs.EventDispatcher=a}(),this.createjs=this.createjs||{},function(){"use strict";createjs.indexOf=function(a,b){for(var c=0,d=a.length;d>c;c++)if(b===a[c])return c;return-1}}(),this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return a.apply(b,Array.prototype.slice.call(arguments,0).concat(c))}}}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(){this.init()};a.prototype=new createjs.EventDispatcher;var b=a.prototype,c=a;c.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?)|(.{0,2}\/{1}))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,c.PATH_PATTERN=/^(?:(\w+:)\/{2})|(.{0,2}\/{1})?([/.]*?(?:[^?]+)?\/?)?$/,b.loaded=!1,b.canceled=!1,b.progress=0,b._item=null,b.getItem=function(){return this._item},b.init=function(){},b.load=function(){},b.close=function(){},b._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},b._sendProgress=function(a){if(!this._isCanceled()){var b=null;"number"==typeof a?(this.progress=a,b=new createjs.Event("progress"),b.loaded=this.progress,b.total=1):(b=a,this.progress=a.loaded/a.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),b.progress=this.progress,this.hasEventListener("progress")&&this.dispatchEvent(b)}},b._sendComplete=function(){this._isCanceled()||this.dispatchEvent("complete")},b._sendError=function(a){!this._isCanceled()&&this.hasEventListener("error")&&(null==a&&(a=new createjs.Event("error")),this.dispatchEvent(a))},b._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},b._parseURI=function(a){return a?a.match(c.FILE_PATTERN):null},b._parsePath=function(a){return a?a.match(c.PATH_PATTERN):null},b._formatQueryString=function(a,b){if(null==a)throw new Error("You must specify data.");var c=[];for(var d in a)c.push(d+"="+escape(a[d]));return b&&(c=c.concat(b)),c.join("&")},b.buildPath=function(a,b){if(null==b)return a;var c=[],d=a.indexOf("?");if(-1!=d){var e=a.slice(d+1);c=c.concat(e.split("&"))}return-1!=d?a.slice(0,d)+"?"+this._formatQueryString(b,c):a+"?"+this._formatQueryString(b,c)},b._isCrossDomain=function(a){var b=document.createElement("a");b.href=a.src;var c=document.createElement("a");c.href=location.href;var d=""!=b.hostname&&(b.port!=c.port||b.protocol!=c.protocol||b.hostname!=c.hostname);return d},b._isLocal=function(a){var b=document.createElement("a");return b.href=a.src,""==b.hostname&&"file:"==b.protocol},b.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=a}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(a,b,c){this.init(a,b,c)},b=a.prototype=new createjs.AbstractLoader,c=a;c.loadTimeout=8e3,c.LOAD_TIMEOUT=0,c.BINARY="binary",c.CSS="css",c.IMAGE="image",c.JAVASCRIPT="javascript",c.JSON="json",c.JSONP="jsonp",c.MANIFEST="manifest",c.SOUND="sound",c.SVG="svg",c.TEXT="text",c.XML="xml",c.POST="POST",c.GET="GET",b._basePath=null,b._crossOrigin="",b.useXHR=!0,b.stopOnError=!1,b.maintainScriptOrder=!0,b.next=null,b._typeCallbacks=null,b._extensionCallbacks=null,b._loadStartWasDispatched=!1,b._maxConnections=1,b._currentlyLoadingScript=null,b._currentLoads=null,b._loadQueue=null,b._loadQueueBackup=null,b._loadItemsById=null,b._loadItemsBySrc=null,b._loadedResults=null,b._loadedRawResults=null,b._numItems=0,b._numItemsLoaded=0,b._scriptOrder=null,b._loadedScripts=null,b.init=function(a,b,c){this._numItems=this._numItemsLoaded=0,this._paused=!1,this._loadStartWasDispatched=!1,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._scriptOrder=[],this._loadedScripts=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._typeCallbacks={},this._extensionCallbacks={},this._basePath=b,this.setUseXHR(a),this._crossOrigin=c===!0?"Anonymous":c===!1||null==c?"":c},b.setUseXHR=function(a){return this.useXHR=0!=a&&null!=window.XMLHttpRequest,this.useXHR},b.removeAll=function(){this.remove()},b.remove=function(a){var b=null;if(!a||a instanceof Array){if(a)b=a;else if(arguments.length>0)return}else b=[a];var c=!1;if(b){for(;b.length;){var d=b.pop(),e=this.getResult(d);for(f=this._loadQueue.length-1;f>=0;f--)if(g=this._loadQueue[f].getItem(),g.id==d||g.src==d){this._loadQueue.splice(f,1)[0].cancel();break}for(f=this._loadQueueBackup.length-1;f>=0;f--)if(g=this._loadQueueBackup[f].getItem(),g.id==d||g.src==d){this._loadQueueBackup.splice(f,1)[0].cancel();break}if(e)delete this._loadItemsById[e.id],delete this._loadItemsBySrc[e.src],this._disposeItem(e);else for(var f=this._currentLoads.length-1;f>=0;f--){var g=this._currentLoads[f].getItem();if(g.id==d||g.src==d){this._currentLoads.splice(f,1)[0].cancel(),c=!0;break}}}c&&this._loadNext()}else{this.close();for(var h in this._loadItemsById)this._disposeItem(this._loadItemsById[h]);this.init(this.useXHR)}},b.reset=function(){this.close();for(var a in this._loadItemsById)this._disposeItem(this._loadItemsById[a]);for(var b=[],c=0,d=this._loadQueueBackup.length;d>c;c++)b.push(this._loadQueueBackup[c].getItem());this.loadManifest(b,!1)},c.isBinary=function(a){switch(a){case createjs.LoadQueue.IMAGE:case createjs.LoadQueue.BINARY:return!0;default:return!1}},c.isText=function(a){switch(a){case createjs.LoadQueue.TEXT:case createjs.LoadQueue.JSON:case createjs.LoadQueue.MANIFEST:case createjs.LoadQueue.XML:case createjs.LoadQueue.HTML:case createjs.LoadQueue.CSS:case createjs.LoadQueue.SVG:case createjs.LoadQueue.JAVASCRIPT:return!0;default:return!1}},b.installPlugin=function(a){if(null!=a&&null!=a.getPreloadHandlers){var b=a.getPreloadHandlers();if(b.scope=a,null!=b.types)for(var c=0,d=b.types.length;d>c;c++)this._typeCallbacks[b.types[c]]=b;if(null!=b.extensions)for(c=0,d=b.extensions.length;d>c;c++)this._extensionCallbacks[b.extensions[c]]=b}},b.setMaxConnections=function(a){this._maxConnections=a,!this._paused&&this._loadQueue.length>0&&this._loadNext()},b.loadFile=function(a,b,c){if(null==a){var d=new createjs.Event("error");return d.text="PRELOAD_NO_FILE",void this._sendError(d)}this._addItem(a,null,c),this.setPaused(b!==!1?!1:!0)},b.loadManifest=function(a,b,d){var e=null,f=null;if(a instanceof Array){if(0==a.length){var g=new createjs.Event("error");return g.text="PRELOAD_MANIFEST_EMPTY",void this._sendError(g)}e=a}else if("string"==typeof a)e=[{src:a,type:c.MANIFEST}];else{if("object"!=typeof a){var g=new createjs.Event("error");return g.text="PRELOAD_MANIFEST_NULL",void this._sendError(g)}if(void 0!==a.src){if(null==a.type)a.type=c.MANIFEST;else if(a.type!=c.MANIFEST){var g=new createjs.Event("error");g.text="PRELOAD_MANIFEST_ERROR",this._sendError(g)}e=[a]}else void 0!==a.manifest&&(e=a.manifest,f=a.path)}for(var h=0,i=e.length;i>h;h++)this._addItem(e[h],f,d);this.setPaused(b!==!1?!1:!0)},b.load=function(){this.setPaused(!1)},b.getItem=function(a){return this._loadItemsById[a]||this._loadItemsBySrc[a]},b.getResult=function(a,b){var c=this._loadItemsById[a]||this._loadItemsBySrc[a];if(null==c)return null;var d=c.id;return b&&this._loadedRawResults[d]?this._loadedRawResults[d]:this._loadedResults[d]},b.setPaused=function(a){this._paused=a,this._paused||this._loadNext()},b.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1},b._addItem=function(a,b,c){var d=this._createLoadItem(a,b,c);if(null!=d){var e=this._createLoader(d);null!=e&&(this._loadQueue.push(e),this._loadQueueBackup.push(e),this._numItems++,this._updateProgress(),this.maintainScriptOrder&&d.type==createjs.LoadQueue.JAVASCRIPT&&e instanceof createjs.XHRLoader&&(this._scriptOrder.push(d),this._loadedScripts.push(null)))}},b._createLoadItem=function(a,b,c){var d=null;switch(typeof a){case"string":d={src:a};break;case"object":d=window.HTMLAudioElement&&a instanceof window.HTMLAudioElement?{tag:a,src:d.tag.src,type:createjs.LoadQueue.SOUND}:a;break;default:return null}var e=this._parseURI(d.src);null!=e&&(d.ext=e[6]),null==d.type&&(d.type=this._getTypeByExtension(d.ext));var f="",g=c||this._basePath,h=d.src;if(e&&null==e[1]&&null==e[3])if(b){f=b;var i=this._parsePath(b);h=b+h,null!=g&&i&&null==i[1]&&null==i[2]&&(f=g+f)}else null!=g&&(f=g);if(d.src=f+d.src,d.path=f,(d.type==createjs.LoadQueue.JSON||d.type==createjs.LoadQueue.MANIFEST)&&(d._loadAsJSONP=null!=d.callback),d.type==createjs.LoadQueue.JSONP&&null==d.callback)throw new Error("callback is required for loading JSONP requests.");(void 0===d.tag||null===d.tag)&&(d.tag=this._createTag(d)),(void 0===d.id||null===d.id||""===d.id)&&(d.id=h);var j=this._typeCallbacks[d.type]||this._extensionCallbacks[d.ext];if(j){var k=j.callback.call(j.scope,d.src,d.type,d.id,d.data,f,this);if(k===!1)return null;k===!0||(null!=k.src&&(d.src=k.src),null!=k.id&&(d.id=k.id),null!=k.tag&&(d.tag=k.tag),null!=k.completeHandler&&(d.completeHandler=k.completeHandler),k.type&&(d.type=k.type),e=this._parseURI(d.src),null!=e&&null!=e[6]&&(d.ext=e[6].toLowerCase()))}return this._loadItemsById[d.id]=d,this._loadItemsBySrc[d.src]=d,d},b._createLoader=function(a){var b=this.useXHR;switch(a.type){case createjs.LoadQueue.JSON:case createjs.LoadQueue.MANIFEST:b=!a._loadAsJSONP;break;case createjs.LoadQueue.XML:case createjs.LoadQueue.TEXT:b=!0;break;case createjs.LoadQueue.SOUND:case createjs.LoadQueue.JSONP:b=!1;break;case null:return null}return b?new createjs.XHRLoader(a,this._crossOrigin):new createjs.TagLoader(a)},b._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var a=0;a<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);a++){var b=this._loadQueue[a];if(this.maintainScriptOrder&&b instanceof createjs.TagLoader&&b.getItem().type==createjs.LoadQueue.JAVASCRIPT){if(this._currentlyLoadingScript)continue;this._currentlyLoadingScript=!0}this._loadQueue.splice(a,1),a--,this._loadItem(b)}}},b._loadItem=function(a){a.on("progress",this._handleProgress,this),a.on("complete",this._handleFileComplete,this),a.on("error",this._handleFileError,this),this._currentLoads.push(a),this._sendFileStart(a.getItem()),a.load()},b._handleFileError=function(a){var b=a.target;this._numItemsLoaded++,this._updateProgress();var c=new createjs.Event("error");c.text="FILE_LOAD_ERROR",c.item=b.getItem(),this._sendError(c),this.stopOnError||(this._removeLoadItem(b),this._loadNext())},b._handleFileComplete=function(a){var b=a.target,c=b.getItem();if(this._loadedResults[c.id]=b.getResult(),b instanceof createjs.XHRLoader&&(this._loadedRawResults[c.id]=b.getResult(!0)),this._removeLoadItem(b),this.maintainScriptOrder&&c.type==createjs.LoadQueue.JAVASCRIPT){if(!(b instanceof createjs.TagLoader))return this._loadedScripts[createjs.indexOf(this._scriptOrder,c)]=c,void this._checkScriptLoadOrder(b);this._currentlyLoadingScript=!1}if(delete c._loadAsJSONP,c.type==createjs.LoadQueue.MANIFEST){var d=b.getResult();null!=d&&void 0!==d.manifest&&this.loadManifest(d,!0)}this._processFinishedLoad(c,b)},b._processFinishedLoad=function(a,b){this._numItemsLoaded++,this._updateProgress(),this._sendFileComplete(a,b),this._loadNext()},b._checkScriptLoadOrder=function(){for(var a=this._loadedScripts.length,b=0;a>b;b++){var c=this._loadedScripts[b];if(null===c)break;if(c!==!0){var d=this._loadedResults[c.id];(document.body||document.getElementsByTagName("body")[0]).appendChild(d),this._processFinishedLoad(c),this._loadedScripts[b]=!0}}},b._removeLoadItem=function(a){for(var b=this._currentLoads.length,c=0;b>c;c++)if(this._currentLoads[c]==a){this._currentLoads.splice(c,1);break}},b._handleProgress=function(a){var b=a.target;this._sendFileProgress(b.getItem(),b.progress),this._updateProgress()},b._updateProgress=function(){var a=this._numItemsLoaded/this._numItems,b=this._numItems-this._numItemsLoaded;if(b>0){for(var c=0,d=0,e=this._currentLoads.length;e>d;d++)c+=this._currentLoads[d].progress;a+=c/b*(b/this._numItems)}this._sendProgress(a)},b._disposeItem=function(a){delete this._loadedResults[a.id],delete this._loadedRawResults[a.id],delete this._loadItemsById[a.id],delete this._loadItemsBySrc[a.src]},b._createTag=function(a){var b=null;switch(a.type){case createjs.LoadQueue.IMAGE:return b=document.createElement("img"),""==this._crossOrigin||this._isLocal(a)||(b.crossOrigin=this._crossOrigin),b;case createjs.LoadQueue.SOUND:return b=document.createElement("audio"),b.autoplay=!1,b;case createjs.LoadQueue.JSON:case createjs.LoadQueue.JSONP:case createjs.LoadQueue.JAVASCRIPT:case createjs.LoadQueue.MANIFEST:return b=document.createElement("script"),b.type="text/javascript",b;case createjs.LoadQueue.CSS:return b=document.createElement(this.useXHR?"style":"link"),b.rel="stylesheet",b.type="text/css",b;case createjs.LoadQueue.SVG:return this.useXHR?b=document.createElement("svg"):(b=document.createElement("object"),b.type="image/svg+xml"),b}return null},b._getTypeByExtension=function(a){if(null==a)return createjs.LoadQueue.TEXT;switch(a.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.LoadQueue.IMAGE;case"ogg":case"mp3":case"wav":return createjs.LoadQueue.SOUND;case"json":return createjs.LoadQueue.JSON;case"xml":return createjs.LoadQueue.XML;case"css":return createjs.LoadQueue.CSS;case"js":return createjs.LoadQueue.JAVASCRIPT;case"svg":return createjs.LoadQueue.SVG;default:return createjs.LoadQueue.TEXT}},b._sendFileProgress=function(a,b){if(this._isCanceled())return void this._cleanUp();if(this.hasEventListener("fileprogress")){var c=new createjs.Event("fileprogress");c.progress=b,c.loaded=b,c.total=1,c.item=a,this.dispatchEvent(c)}},b._sendFileComplete=function(a,b){if(!this._isCanceled()){var c=new createjs.Event("fileload");c.loader=b,c.item=a,c.result=this._loadedResults[a.id],c.rawResult=this._loadedRawResults[a.id],a.completeHandler&&a.completeHandler(c),this.hasEventListener("fileload")&&this.dispatchEvent(c)}},b._sendFileStart=function(a){var b=new createjs.Event("filestart");b.item=a,this.hasEventListener("filestart")&&this.dispatchEvent(b)},b.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=a;var d=function(){};d.init=function(){var a=navigator.userAgent;d.isFirefox=a.indexOf("Firefox")>-1,d.isOpera=null!=window.opera,d.isChrome=a.indexOf("Chrome")>-1,d.isIOS=a.indexOf("iPod")>-1||a.indexOf("iPhone")>-1||a.indexOf("iPad")>-1},d.init(),createjs.LoadQueue.BrowserDetect=d}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(a){this.init(a)},b=a.prototype=new createjs.AbstractLoader;b._loadTimeout=null,b._tagCompleteProxy=null,b._isAudio=!1,b._tag=null,b._jsonResult=null,b.init=function(a){this._item=a,this._tag=a.tag,this._isAudio=window.HTMLAudioElement&&a.tag instanceof window.HTMLAudioElement,this._tagCompleteProxy=createjs.proxy(this._handleLoad,this)},b.getResult=function(){return this._item.type==createjs.LoadQueue.JSONP||this._item.type==createjs.LoadQueue.MANIFEST?this._jsonResult:this._tag},b.cancel=function(){this.canceled=!0,this._clean()},b.load=function(){var a=this._item,b=this._tag;clearTimeout(this._loadTimeout);var c=createjs.LoadQueue.LOAD_TIMEOUT;0==c&&(c=createjs.LoadQueue.loadTimeout),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),c),this._isAudio&&(b.src=null,b.preload="auto"),b.onerror=createjs.proxy(this._handleError,this),this._isAudio?(b.onstalled=createjs.proxy(this._handleStalled,this),b.addEventListener("canplaythrough",this._tagCompleteProxy,!1)):(b.onload=createjs.proxy(this._handleLoad,this),b.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this));var d=this.buildPath(a.src,a.values);switch(a.type){case createjs.LoadQueue.CSS:b.href=d;break;case createjs.LoadQueue.SVG:b.data=d;break;default:b.src=d}if(a.type==createjs.LoadQueue.JSONP||a.type==createjs.LoadQueue.JSON||a.type==createjs.LoadQueue.MANIFEST){if(null==a.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[a.callback])throw new Error('JSONP callback "'+a.callback+'" already exists on window. You need to specify a different callback. Or re-name the current one.');window[a.callback]=createjs.proxy(this._handleJSONPLoad,this)}(a.type==createjs.LoadQueue.SVG||a.type==createjs.LoadQueue.JSONP||a.type==createjs.LoadQueue.JSON||a.type==createjs.LoadQueue.MANIFEST||a.type==createjs.LoadQueue.JAVASCRIPT||a.type==createjs.LoadQueue.CSS)&&(this._startTagVisibility=b.style.visibility,b.style.visibility="hidden",(document.body||document.getElementsByTagName("body")[0]).appendChild(b)),null!=b.load&&b.load()},b._handleJSONPLoad=function(a){this._jsonResult=a},b._handleTimeout=function(){this._clean();var a=new createjs.Event("error");a.text="PRELOAD_TIMEOUT",this._sendError(a)},b._handleStalled=function(){},b._handleError=function(){this._clean();var a=new createjs.Event("error");this._sendError(a)},b._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this.getItem().tag;("loaded"==a.readyState||"complete"==a.readyState)&&this._handleLoad()},b._handleLoad=function(){if(!this._isCanceled()){var a=this.getItem(),b=a.tag;if(!(this.loaded||this._isAudio&&4!==b.readyState)){switch(this.loaded=!0,a.type){case createjs.LoadQueue.SVG:case createjs.LoadQueue.JSON:case createjs.LoadQueue.JSONP:case createjs.LoadQueue.MANIFEST:case createjs.LoadQueue.CSS:b.style.visibility=this._startTagVisibility,(document.body||document.getElementsByTagName("body")[0]).removeChild(b)}this._clean(),this._sendComplete()}}},b._clean=function(){clearTimeout(this._loadTimeout);var a=this.getItem(),b=a.tag;null!=b&&(b.onload=null,b.removeEventListener&&b.removeEventListener("canplaythrough",this._tagCompleteProxy,!1),b.onstalled=null,b.onprogress=null,b.onerror=null,null!=b.parentNode&&a.type==createjs.LoadQueue.SVG&&a.type==createjs.LoadQueue.JSON&&a.type==createjs.LoadQueue.MANIFEST&&a.type==createjs.LoadQueue.CSS&&a.type==createjs.LoadQueue.JSONP&&b.parentNode.removeChild(b));var a=this.getItem();(a.type==createjs.LoadQueue.JSONP||a.type==createjs.LoadQueue.MANIFEST)&&(window[a.callback]=null)},b.toString=function(){return"[PreloadJS TagLoader]"},createjs.TagLoader=a}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(a,b){this.init(a,b)},b=a.prototype=new createjs.AbstractLoader;b._request=null,b._loadTimeout=null,b._xhrLevel=1,b._response=null,b._rawResponse=null,b._crossOrigin="",b.init=function(a,b){this._item=a,this._crossOrigin=b,!this._createXHR(a)},b.getResult=function(a){return a&&this._rawResponse?this._rawResponse:this._response},b.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},b.load=function(){if(null==this._request)return void this._handleError();if(this._request.onloadstart=createjs.proxy(this._handleLoadStart,this),this._request.onprogress=createjs.proxy(this._handleProgress,this),this._request.onabort=createjs.proxy(this._handleAbort,this),this._request.onerror=createjs.proxy(this._handleError,this),this._request.ontimeout=createjs.proxy(this._handleTimeout,this),1==this._xhrLevel){var a=createjs.LoadQueue.LOAD_TIMEOUT;if(0==a)a=createjs.LoadQueue.loadTimeout;else try{console.warn("LoadQueue.LOAD_TIMEOUT has been deprecated in favor of LoadQueue.loadTimeout")}catch(b){}this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),a)}this._request.onload=createjs.proxy(this._handleLoad,this),this._request.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);try{this._item.values&&this._item.method!=createjs.LoadQueue.GET?this._item.method==createjs.LoadQueue.POST&&this._request.send(this._formatQueryString(this._item.values)):this._request.send()}catch(c){var d=new createjs.Event("error");d.error=c,this._sendError(d)}},b.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},b.getResponseHeader=function(a){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(a):null},b._handleProgress=function(a){if(a&&!(a.loaded>0&&0==a.total)){var b=new createjs.Event("progress");b.loaded=a.loaded,b.total=a.total,this._sendProgress(b)}},b._handleLoadStart=function(){clearTimeout(this._loadTimeout),this._sendLoadStart()},b._handleAbort=function(){this._clean();var a=new createjs.Event("error");a.text="XHR_ABORTED",this._sendError(a)},b._handleError=function(){this._clean();var a=new createjs.Event("error");this._sendError(a)},b._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},b._handleLoad=function(){if(!this.loaded){if(this.loaded=!0,!this._checkError())return void this._handleError();this._response=this._getResponse(),this._clean();var a=this._generateTag();a&&this._sendComplete()}},b._handleTimeout=function(a){this._clean();var b=new createjs.Event("error");b.text="PRELOAD_TIMEOUT",this._sendError(a)},b._checkError=function(){var a=parseInt(this._request.status);switch(a){case 404:case 0:return!1}return!0},b._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(a){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(a){}return null},b._createXHR=function(a){var b=this._isCrossDomain(a),c=null;if(b&&window.XDomainRequest)c=new XDomainRequest;else if(window.XMLHttpRequest)c=new XMLHttpRequest;else try{c=new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(d){try{c=new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(d){try{c=new ActiveXObject("Msxml2.XMLHTTP")}catch(d){return!1}}}createjs.LoadQueue.isText(a.type)&&c.overrideMimeType&&c.overrideMimeType("text/plain; charset=utf-8"),this._xhrLevel="string"==typeof c.responseType?2:1;var e=null;return e=a.method==createjs.LoadQueue.GET?this.buildPath(a.src,a.values):a.src,c.open(a.method||createjs.LoadQueue.GET,e,!0),b&&c instanceof XMLHttpRequest&&1==this._xhrLevel&&c.setRequestHeader("Origin",location.origin),a.values&&a.method==createjs.LoadQueue.POST&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),createjs.LoadQueue.isBinary(a.type)&&(c.responseType="arraybuffer"),this._request=c,!0},b._clean=function(){clearTimeout(this._loadTimeout);var a=this._request;a.onloadstart=null,a.onprogress=null,a.onabort=null,a.onerror=null,a.onload=null,a.ontimeout=null,a.onloadend=null,a.onreadystatechange=null},b._generateTag=function(){var a=this._item.type,b=this._item.tag;switch(a){case createjs.LoadQueue.IMAGE:return b.onload=createjs.proxy(this._handleTagReady,this),""!=this._crossOrigin&&(b.crossOrigin="Anonymous"),b.src=this.buildPath(this._item.src,this._item.values),this._rawResponse=this._response,this._response=b,!1;case createjs.LoadQueue.JAVASCRIPT:return b=document.createElement("script"),b.text=this._response,this._rawResponse=this._response,this._response=b,!0;case createjs.LoadQueue.CSS:var c=document.getElementsByTagName("head")[0];if(c.appendChild(b),b.styleSheet)b.styleSheet.cssText=this._response;else{var d=document.createTextNode(this._response);b.appendChild(d)}return this._rawResponse=this._response,this._response=b,!0;case createjs.LoadQueue.XML:var e=this._parseXML(this._response,"text/xml");return this._rawResponse=this._response,this._response=e,!0;case createjs.LoadQueue.SVG:var e=this._parseXML(this._response,"image/svg+xml");return this._rawResponse=this._response,null!=e.documentElement?(b.appendChild(e.documentElement),this._response=b):this._response=e,!0;case createjs.LoadQueue.JSON:case createjs.LoadQueue.MANIFEST:var f={};try{f=JSON.parse(this._response)}catch(g){f=g}return this._rawResponse=this._response,this._response=f,!0}return!0},b._parseXML=function(a,b){var c=null;try{if(window.DOMParser){var d=new DOMParser;c=d.parseFromString(a,b)}else c=new ActiveXObject("Microsoft.XMLDOM"),c.async=!1,c.loadXML(a)}catch(e){}return c},b._handleTagReady=function(){this._sendComplete()},b.toString=function(){return"[PreloadJS XHRLoader]"},createjs.XHRLoader=a}(),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b"," ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),this.createjs=this.createjs||{},function(){var a=createjs.SoundJS=createjs.SoundJS||{};a.version="0.5.2",a.buildDate="Thu, 12 Dec 2013 23:33:37 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(){},b=a.prototype;a.initialize=function(a){a.addEventListener=b.addEventListener,a.on=b.on,a.removeEventListener=a.off=b.removeEventListener,a.removeAllEventListeners=b.removeAllEventListeners,a.hasEventListener=b.hasEventListener,a.dispatchEvent=b.dispatchEvent,a._dispatchEvent=b._dispatchEvent,a.willTrigger=b.willTrigger},b._listeners=null,b._captureListeners=null,b.initialize=function(){},b.addEventListener=function(a,b,c){var d;d=c?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var e=d[a];return e&&this.removeEventListener(a,b,c),e=d[a],e?e.push(b):d[a]=[b],b},b.on=function(a,b,c,d,e,f){return b.handleEvent&&(c=c||b,b=b.handleEvent),c=c||this,this.addEventListener(a,function(a){b.call(c,a,e),d&&a.remove()},f)},b.removeEventListener=function(a,b,c){var d=c?this._captureListeners:this._listeners;if(d){var e=d[a];if(e)for(var f=0,g=e.length;g>f;f++)if(e[f]==b){1==g?delete d[a]:e.splice(f,1);break}}},b.off=b.removeEventListener,b.removeAllEventListeners=function(a){a?(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null},b.dispatchEvent=function(a,b){if("string"==typeof a){var c=this._listeners;if(!c||!c[a])return!1;a=new createjs.Event(a)}if(a.target=b||this,a.bubbles&&this.parent){for(var d=this,e=[d];d.parent;)e.push(d=d.parent);
var f,g=e.length;for(f=g-1;f>=0&&!a.propagationStopped;f--)e[f]._dispatchEvent(a,1+(0==f));for(f=1;g>f&&!a.propagationStopped;f++)e[f]._dispatchEvent(a,3)}else this._dispatchEvent(a,2);return a.defaultPrevented},b.hasEventListener=function(a){var b=this._listeners,c=this._captureListeners;return!!(b&&b[a]||c&&c[a])},b.willTrigger=function(a){for(var b=this;b;){if(b.hasEventListener(a))return!0;b=b.parent}return!1},b.toString=function(){return"[EventDispatcher]"},b._dispatchEvent=function(a,b){var c,d=1==b?this._captureListeners:this._listeners;if(a&&d){var e=d[a.type];if(!e||!(c=e.length))return;a.currentTarget=this,a.eventPhase=b,a.removed=!1,e=e.slice();for(var f=0;c>f&&!a.immediatePropagationStopped;f++){var g=e[f];g.handleEvent?g.handleEvent(a):g(a),a.removed&&(this.off(a.type,g,1==b),a.removed=!1)}}},createjs.EventDispatcher=a}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(a,b,c){this.initialize(a,b,c)},b=a.prototype;b.type=null,b.target=null,b.currentTarget=null,b.eventPhase=0,b.bubbles=!1,b.cancelable=!1,b.timeStamp=0,b.defaultPrevented=!1,b.propagationStopped=!1,b.immediatePropagationStopped=!1,b.removed=!1,b.initialize=function(a,b,c){this.type=a,this.bubbles=b,this.cancelable=c,this.timeStamp=(new Date).getTime()},b.preventDefault=function(){this.defaultPrevented=!0},b.stopPropagation=function(){this.propagationStopped=!0},b.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},b.remove=function(){this.removed=!0},b.clone=function(){return new a(this.type,this.bubbles,this.cancelable)},b.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=a}(),this.createjs=this.createjs||{},function(){"use strict";createjs.indexOf=function(a,b){for(var c=0,d=a.length;d>c;c++)if(b===a[c])return c;return-1}}(),this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return a.apply(b,Array.prototype.slice.call(arguments,0).concat(c))}}}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"Sound cannot be instantiated"}function b(a,b){this.init(a,b)}function c(){this.isDefault=!0,this.addEventListener=this.removeEventListener=this.removeAllEventListeners=this.dispatchEvent=this.hasEventListener=this._listeners=this._interrupt=this._playFailed=this.pause=this.resume=this.play=this._beginPlaying=this._cleanUp=this.stop=this.setMasterVolume=this.setVolume=this.mute=this.setMute=this.getMute=this.setPan=this.getPosition=this.setPosition=this.playFailed=function(){return!1},this.getVolume=this.getPan=this.getDuration=function(){return 0},this.playState=a.PLAY_FAILED,this.toString=function(){return"[Sound Default Sound Instance]"}}function d(){}var e=a;e.DELIMITER="|",e.INTERRUPT_ANY="any",e.INTERRUPT_EARLY="early",e.INTERRUPT_LATE="late",e.INTERRUPT_NONE="none",e.PLAY_INITED="playInited",e.PLAY_SUCCEEDED="playSucceeded",e.PLAY_INTERRUPTED="playInterrupted",e.PLAY_FINISHED="playFinished",e.PLAY_FAILED="playFailed",e.SUPPORTED_EXTENSIONS=["mp3","ogg","mpeg","wav","m4a","mp4","aiff","wma","mid"],e.EXTENSION_MAP={m4a:"mp4"},e.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,e.defaultInterruptBehavior=e.INTERRUPT_NONE,e.alternateExtensions=[],e._lastID=0,e.activePlugin=null,e._pluginsRegistered=!1,e._masterVolume=1,e._masterMute=!1,e._instances=[],e._idHash={},e._preloadHash={},e._defaultSoundInstance=null,e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e._sendFileLoadEvent=function(a){if(e._preloadHash[a])for(var b=0,c=e._preloadHash[a].length;c>b;b++){var d=e._preloadHash[a][b];if(e._preloadHash[a][b]=!0,e.hasEventListener("fileload")){var f=new createjs.Event("fileload");f.src=d.src,f.id=d.id,f.data=d.data,e.dispatchEvent(f)}}},e.getPreloadHandlers=function(){return{callback:createjs.proxy(e.initLoad,e),types:["sound"],extensions:e.SUPPORTED_EXTENSIONS}},e.registerPlugin=function(a){try{console.log("createjs.Sound.registerPlugin has been deprecated. Please use registerPlugins.")}catch(b){}return e._registerPlugin(a)},e._registerPlugin=function(a){return e._pluginsRegistered=!0,null==a?!1:a.isSupported()?(e.activePlugin=new a,!0):!1},e.registerPlugins=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];if(e._registerPlugin(d))return!0}return!1},e.initializeDefaultPlugins=function(){return null!=e.activePlugin?!0:e._pluginsRegistered?!1:e.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1},e.isReady=function(){return null!=e.activePlugin},e.getCapabilities=function(){return null==e.activePlugin?null:e.activePlugin._capabilities},e.getCapability=function(a){return null==e.activePlugin?null:e.activePlugin._capabilities[a]},e.initLoad=function(a,b,c,d,f){a=a.replace(f,"");var g=e.registerSound(a,c,d,!1,f);return null==g?!1:g},e.registerSound=function(a,c,d,f,g){if(!e.initializeDefaultPlugins())return!1;if(a instanceof Object&&(g=c,c=a.id,d=a.data,a=a.src),e.alternateExtensions.length)var h=e._parsePath2(a,"sound",c,d);else var h=e._parsePath(a,"sound",c,d);if(null==h)return!1;null!=g&&(a=g+a,h.src=g+h.src),null!=c&&(e._idHash[c]=h.src);var i=null;null!=d&&(isNaN(d.channels)?isNaN(d)||(i=parseInt(d)):i=parseInt(d.channels));var j=e.activePlugin.register(h.src,i);if(null!=j&&(null!=j.numChannels&&(i=j.numChannels),b.create(h.src,i),null!=d&&isNaN(d)?d.channels=h.data.channels=i||b.maxPerChannel():d=h.data=i||b.maxPerChannel(),null!=j.tag?h.tag=j.tag:j.src&&(h.src=j.src),null!=j.completeHandler&&(h.completeHandler=j.completeHandler),j.type&&(h.type=j.type)),0!=f)if(e._preloadHash[h.src]||(e._preloadHash[h.src]=[]),e._preloadHash[h.src].push({src:a,id:c,data:d}),1==e._preloadHash[h.src].length)e.activePlugin.preload(h.src,j);else if(1==e._preloadHash[h.src][0])return!0;return h},e.registerManifest=function(a,b){for(var c=[],d=0,e=a.length;e>d;d++)c[d]=createjs.Sound.registerSound(a[d].src,a[d].id,a[d].data,a[d].preload,b);return c},e.removeSound=function(a,c){if(null==e.activePlugin)return!1;if(a instanceof Object&&(a=a.src),a=e._getSrcById(a),e.alternateExtensions.length)var d=e._parsePath2(a);else var d=e._parsePath(a);if(null==d)return!1;null!=c&&(d.src=c+d.src),a=d.src;for(var f in e._idHash)e._idHash[f]==a&&delete e._idHash[f];return b.removeSrc(a),delete e._preloadHash[a],e.activePlugin.removeSound(a),!0},e.removeManifest=function(a,b){for(var c=[],d=0,e=a.length;e>d;d++)c[d]=createjs.Sound.removeSound(a[d].src,b);return c},e.removeAllSounds=function(){e._idHash={},e._preloadHash={},b.removeAll(),e.activePlugin.removeAllSounds()},e.loadComplete=function(a){if(e.alternateExtensions.length)var b=e._parsePath2(a,"sound");else var b=e._parsePath(a,"sound");return a=e._getSrcById(b?b.src:a),1==e._preloadHash[a][0]},e._parsePath=function(a,b,c,d){"string"!=typeof a&&(a=a.toString());var f=a.split(e.DELIMITER);if(f.length>1)try{console.log('createjs.Sound.DELIMITER "|" loading approach has been deprecated. Please use the new alternateExtensions property.')}catch(g){}for(var h={type:b||"sound",id:c,data:d},i=e.getCapabilities(),j=0,k=f.length;k>j;j++){var l=f[j],m=l.match(e.FILE_PATTERN);if(null==m)return!1;var n=m[4],o=m[5];if(i[o]&&createjs.indexOf(e.SUPPORTED_EXTENSIONS,o)>-1)return h.name=n,h.src=l,h.extension=o,h}return null},e._parsePath2=function(a,b,c,d){"string"!=typeof a&&(a=a.toString());var f=a.match(e.FILE_PATTERN);if(null==f)return!1;for(var g=f[4],h=f[5],i=e.getCapabilities(),j=0;!i[h];)if(h=e.alternateExtensions[j++],j>e.alternateExtensions.length)return null;a=a.replace("."+f[5],"."+h);var k={type:b||"sound",id:c,data:d};return k.name=g,k.src=a,k.extension=h,k},e.play=function(a,b,c,d,f,g,h){var i=e.createInstance(a),j=e._playInstance(i,b,c,d,f,g,h);return j||i.playFailed(),i},e.createInstance=function(c){if(!e.initializeDefaultPlugins())return e._defaultSoundInstance;if(c=e._getSrcById(c),e.alternateExtensions.length)var d=e._parsePath2(c,"sound");else var d=e._parsePath(c,"sound");var f=null;return null!=d&&null!=d.src?(b.create(d.src),f=e.activePlugin.create(d.src)):f=a._defaultSoundInstance,f.uniqueId=e._lastID++,f},e.setVolume=function(a){if(null==Number(a))return!1;if(a=Math.max(0,Math.min(1,a)),e._masterVolume=a,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(a))for(var b=this._instances,c=0,d=b.length;d>c;c++)b[c].setMasterVolume(a)},e.getVolume=function(){return e._masterVolume},e.setMute=function(a){if(null==a||void 0==a)return!1;if(this._masterMute=a,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(a))for(var b=this._instances,c=0,d=b.length;d>c;c++)b[c].setMasterMute(a);return!0},e.getMute=function(){return this._masterMute},e.stop=function(){for(var a=this._instances,b=a.length;b--;)a[b].stop()},e._playInstance=function(a,b,c,d,f,g,h){if(b instanceof Object&&(c=b.delay,d=b.offset,f=b.loop,g=b.volume,h=b.pan,b=b.interrupt),b=b||e.defaultInterruptBehavior,null==c&&(c=0),null==d&&(d=a.getPosition()),null==f&&(f=0),null==g&&(g=a.volume),null==h&&(h=a.pan),0==c){var i=e._beginPlaying(a,b,d,f,g,h);if(!i)return!1}else{var j=setTimeout(function(){e._beginPlaying(a,b,d,f,g,h)},c);a._delayTimeoutId=j}return this._instances.push(a),!0},e._beginPlaying=function(a,c,d,e,f,g){if(!b.add(a,c))return!1;var h=a._beginPlaying(d,e,f,g);if(!h){var i=createjs.indexOf(this._instances,a);return i>-1&&this._instances.splice(i,1),!1}return!0},e._getSrcById=function(a){return null==e._idHash||null==e._idHash[a]?a:e._idHash[a]},e._playFinished=function(a){b.remove(a);var c=createjs.indexOf(this._instances,a);c>-1&&this._instances.splice(c,1)},createjs.Sound=a,b.channels={},b.create=function(a,c){var d=b.get(a);return null==d?(b.channels[a]=new b(a,c),!0):!1},b.removeSrc=function(a){var c=b.get(a);return null==c?!1:(c.removeAll(),delete b.channels[a],!0)},b.removeAll=function(){for(var a in b.channels)b.channels[a].removeAll();b.channels={}},b.add=function(a,c){var d=b.get(a.src);return null==d?!1:d.add(a,c)},b.remove=function(a){var c=b.get(a.src);return null==c?!1:(c.remove(a),!0)},b.maxPerChannel=function(){return f.maxDefault},b.get=function(a){return b.channels[a]};var f=b.prototype;f.src=null,f.max=null,f.maxDefault=100,f.length=0,f.init=function(a,b){this.src=a,this.max=b||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},f.get=function(a){return this._instances[a]},f.add=function(a,b){return this.getSlot(b,a)?(this._instances.push(a),this.length++,!0):!1},f.remove=function(a){var b=createjs.indexOf(this._instances,a);return-1==b?!1:(this._instances.splice(b,1),this.length--,!0)},f.removeAll=function(){for(var a=this.length-1;a>=0;a--)this._instances[a].stop()},f.getSlot=function(b){for(var c,d,e=0,f=this.max;f>e;e++){if(c=this.get(e),null==c)return!0;(b!=a.INTERRUPT_NONE||c.playState==a.PLAY_FINISHED)&&(0!=e?c.playState==a.PLAY_FINISHED||c.playState==a.PLAY_INTERRUPTED||c.playState==a.PLAY_FAILED?d=c:(b==a.INTERRUPT_EARLY&&c.getPosition()<d.getPosition()||b==a.INTERRUPT_LATE&&c.getPosition()>d.getPosition())&&(d=c):d=c)}return null!=d?(d._interrupt(),this.remove(d),!0):!1},f.toString=function(){return"[Sound SoundChannel]"},a._defaultSoundInstance=new c,d.init=function(){var a=window.navigator.userAgent;d.isFirefox=a.indexOf("Firefox")>-1,d.isOpera=null!=window.opera,d.isChrome=a.indexOf("Chrome")>-1,d.isIOS=a.indexOf("iPod")>-1||a.indexOf("iPhone")>-1||a.indexOf("iPad")>-1,d.isAndroid=a.indexOf("Android")>-1,d.isBlackberry=a.indexOf("Blackberry")>-1},d.init(),createjs.Sound.BrowserDetect=d}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this._init()}var b=a;b._capabilities=null,b.isSupported=function(){var a=createjs.Sound.BrowserDetect.isIOS||createjs.Sound.BrowserDetect.isAndroid||createjs.Sound.BrowserDetect.isBlackberry;return"file:"!=location.protocol||a||this._isFileXHRSupported()?(b._generateCapabilities(),null==b.context?!1:!0):!1},b._isFileXHRSupported=function(){var a=!0,b=new XMLHttpRequest;try{b.open("GET","fail.fail",!1)}catch(c){return a=!1}b.onerror=function(){a=!1},b.onload=function(){a=404==this.status||200==this.status||0==this.status&&""!=this.response};try{b.send()}catch(c){a=!1}return a},b._generateCapabilities=function(){if(null==b._capabilities){var a=document.createElement("audio");if(null==a.canPlayType)return null;if(window.webkitAudioContext)b.context=new webkitAudioContext;else{if(!window.AudioContext)return null;b.context=new AudioContext}b._compatibilitySetUp(),b.playEmptySound(),b._capabilities={panning:!0,volume:!0,tracks:-1};for(var c=createjs.Sound.SUPPORTED_EXTENSIONS,d=createjs.Sound.EXTENSION_MAP,e=0,f=c.length;f>e;e++){var g=c[e],h=d[g]||g;b._capabilities[g]="no"!=a.canPlayType("audio/"+g)&&""!=a.canPlayType("audio/"+g)||"no"!=a.canPlayType("audio/"+h)&&""!=a.canPlayType("audio/"+h)}b.context.destination.numberOfChannels<2&&(b._capabilities.panning=!1),b.dynamicsCompressorNode=b.context.createDynamicsCompressor(),b.dynamicsCompressorNode.connect(b.context.destination),b.gainNode=b.context.createGain(),b.gainNode.connect(b.dynamicsCompressorNode)}},b._compatibilitySetUp=function(){if(!b.context.createGain){b.context.createGain=b.context.createGainNode;var a=b.context.createBufferSource();a.__proto__.start=a.__proto__.noteGrainOn,a.__proto__.stop=a.__proto__.noteOff,this._panningModel=0}},b.playEmptySound=function(){var a=this.context.createBuffer(1,1,22050),b=this.context.createBufferSource();b.buffer=a,b.connect(this.context.destination),b.start(0,0,0)};var c=a.prototype;c._capabilities=null,c._volume=1,c.context=null,c._panningModel="equalpower",c.dynamicsCompressorNode=null,c.gainNode=null,c._arrayBuffers=null,c._init=function(){this._capabilities=b._capabilities,this._arrayBuffers={},this.context=b.context,this.gainNode=b.gainNode,this.dynamicsCompressorNode=b.dynamicsCompressorNode},c.register=function(a){this._arrayBuffers[a]=!0;var b=new createjs.WebAudioPlugin.Loader(a,this);return{tag:b}},c.isPreloadStarted=function(a){return null!=this._arrayBuffers[a]},c.isPreloadComplete=function(a){return!(null==this._arrayBuffers[a]||1==this._arrayBuffers[a])},c.removeSound=function(a){delete this._arrayBuffers[a]},c.removeAllSounds=function(){this._arrayBuffers={}},c.addPreloadResults=function(a,b){this._arrayBuffers[a]=b},c._handlePreloadComplete=function(){createjs.Sound._sendFileLoadEvent(this.src)},c.preload=function(a){this._arrayBuffers[a]=!0;var b=new createjs.WebAudioPlugin.Loader(a,this);b.onload=this._handlePreloadComplete,b.load()},c.create=function(a){return this.isPreloadStarted(a)||this.preload(a),new createjs.WebAudioPlugin.SoundInstance(a,this)},c.setVolume=function(a){return this._volume=a,this._updateVolume(),!0},c._updateVolume=function(){var a=createjs.Sound._masterMute?0:this._volume;a!=this.gainNode.gain.value&&(this.gainNode.gain.value=a)},c.getVolume=function(){return this._volume},c.setMute=function(){return this._updateVolume(),!0},c.toString=function(){return"[WebAudioPlugin]"},createjs.WebAudioPlugin=a}(),function(){"use strict";function a(a,b){this._init(a,b)}var b=a.prototype=new createjs.EventDispatcher;b.src=null,b.uniqueId=-1,b.playState=null,b._owner=null,b._offset=0,b._delay=0,b._volume=1;try{Object.defineProperty(b,"volume",{get:function(){return this._volume},set:function(a){return null==Number(a)?!1:(a=Math.max(0,Math.min(1,a)),this._volume=a,void this._updateVolume())}})}catch(c){}b._pan=0;try{Object.defineProperty(b,"pan",{get:function(){return this._pan},set:function(a){return this._owner._capabilities.panning&&null!=Number(a)?(a=Math.max(-1,Math.min(1,a)),this._pan=a,void this.panNode.setPosition(a,0,-.5)):!1}})}catch(c){}b._duration=0,b._remainingLoops=0,b._delayTimeoutId=null,b._soundCompleteTimeout=null,b.gainNode=null,b.panNode=null,b.sourceNode=null,b._sourceNodeNext=null,b._muted=!1,b._paused=!1,b._startTime=0,b._endedHandler=null,b._sendEvent=function(a){var b=new createjs.Event(a);this.dispatchEvent(b)},b._init=function(a,b){this._owner=b,this.src=a,this.gainNode=this._owner.context.createGain(),this.panNode=this._owner.context.createPanner(),this.panNode.panningModel=this._owner._panningModel,this.panNode.connect(this.gainNode),this._owner.isPreloadComplete(this.src)&&(this._duration=1e3*this._owner._arrayBuffers[this.src].duration),this._endedHandler=createjs.proxy(this._handleSoundComplete,this)},b._cleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._delayTimeoutId),clearTimeout(this._soundCompleteTimeout),this._startTime=0,null!=window.createjs&&createjs.Sound._playFinished(this)},b._cleanUpAudioNode=function(a){return a&&(a.stop(0),a.disconnect(this.panNode),a=null),a},b._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._paused=!1,this._sendEvent("interrupted")},b._handleSoundReady=function(){if(null!=window.createjs){if(1e3*this._offset>this.getDuration())return void this.playFailed();this._offset<0&&(this._offset=0),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._paused=!1,this.gainNode.connect(this._owner.gainNode);var a=this._owner._arrayBuffers[this.src].duration;this.sourceNode=this._createAndPlayAudioNode(this._owner.context.currentTime-a,this._offset),this._duration=1e3*a,this._startTime=this.sourceNode.startTime-this._offset,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(a-this._offset)),0!=this._remainingLoops&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._startTime,0))}},b._createAndPlayAudioNode=function(a,b){var c=this._owner.context.createBufferSource();return c.buffer=this._owner._arrayBuffers[this.src],c.connect(this.panNode),this._owner.context.currentTime,c.startTime=a+c.buffer.duration,c.start(c.startTime,b,c.buffer.duration-b),c},b.play=function(a,b,c,d,e,f){this._cleanUp(),createjs.Sound._playInstance(this,a,b,c,d,e,f)},b._beginPlaying=function(a,b,c,d){return null!=window.createjs&&this.src?(this._offset=a/1e3,this._remainingLoops=b,this.volume=c,this.pan=d,this._owner.isPreloadComplete(this.src)?(this._handleSoundReady(null),this._sendEvent("succeeded"),1):void this.playFailed()):void 0},b.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?!1:(this._paused=!0,this._offset=this._owner.context.currentTime-this._startTime,this._cleanUpAudioNode(this.sourceNode),this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(),clearTimeout(this._delayTimeoutId),clearTimeout(this._soundCompleteTimeout),!0)},b.resume=function(){return this._paused?(this._handleSoundReady(null),!0):!1},b.stop=function(){return this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this._offset=0,!0},b.setVolume=function(a){return this.volume=a,!0},b._updateVolume=function(){var a=this._muted?0:this._volume;return a!=this.gainNode.gain.value?(this.gainNode.gain.value=a,!0):!1},b.getVolume=function(){return this.volume},b.setMute=function(a){return null==a||void 0==a?!1:(this._muted=a,this._updateVolume(),!0)},b.getMute=function(){return this._muted},b.setPan=function(a){return this.pan=a,this.pan!=a?!1:void 0},b.getPan=function(){return this.pan},b.getPosition=function(){if(this._paused||null==this.sourceNode)var a=this._offset;else var a=this._owner.context.currentTime-this._startTime;return 1e3*a},b.setPosition=function(a){return this._offset=a/1e3,this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._cleanUpAudioNode(this.sourceNode),this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout)),this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||this._handleSoundReady(null),!0},b.getDuration=function(){return this._duration},b._handleSoundComplete=function(){return this._offset=0,0!=this._remainingLoops?(this._remainingLoops--,this._sourceNodeNext?(this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._startTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._startTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)):this._handleSoundReady(null),void this._sendEvent("loop")):void(null!=window.createjs&&(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this._sendEvent("complete")))},b.playFailed=function(){null!=window.createjs&&(this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed"))},b.toString=function(){return"[WebAudioPlugin SoundInstance]"},createjs.WebAudioPlugin.SoundInstance=a}(),function(){"use strict";function a(a,b){this._init(a,b)}var b=a.prototype;b.request=null,b.owner=null,b.progress=-1,b.src=null,b.originalSrc=null,b.result=null,b.onload=null,b.onprogress=null,b.onError=null,b._init=function(a,b){this.src=a,this.originalSrc=a,this.owner=b},b.load=function(a){null!=a&&(this.src=a),this.request=new XMLHttpRequest,this.request.open("GET",this.src,!0),this.request.responseType="arraybuffer",this.request.onload=createjs.proxy(this.handleLoad,this),this.request.onError=createjs.proxy(this.handleError,this),this.request.onprogress=createjs.proxy(this.handleProgress,this),this.request.send()},b.handleProgress=function(a,b){this.progress=a/b,null!=this.onprogress&&this.onprogress({loaded:a,total:b,progress:this.progress})},b.handleLoad=function(){this.owner.context.decodeAudioData(this.request.response,createjs.proxy(this.handleAudioDecoded,this),createjs.proxy(this.handleError,this))},b.handleAudioDecoded=function(a){this.progress=1,this.result=a,this.src=this.originalSrc,this.owner.addPreloadResults(this.src,this.result),this.onload&&this.onload()},b.handleError=function(a){this.owner.removeSound(this.src),this.onerror&&this.onerror(a)},b.toString=function(){return"[WebAudioPlugin Loader]"},createjs.WebAudioPlugin.Loader=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this._init()}var b=a;b.MAX_INSTANCES=30,b._AUDIO_READY="canplaythrough",b._AUDIO_ENDED="ended",b._AUDIO_SEEKED="seeked",b._AUDIO_STALLED="stalled",b._capabilities=null,b.enableIOS=!1,b.isSupported=function(){if(createjs.Sound.BrowserDetect.isIOS&&!b.enableIOS)return!1;b._generateCapabilities();var a=b.tag;return null==a||null==b._capabilities?!1:!0},b._generateCapabilities=function(){if(null==b._capabilities){var a=b.tag=document.createElement("audio");if(null==a.canPlayType)return null;b._capabilities={panning:!0,volume:!0,tracks:-1};for(var c=createjs.Sound.SUPPORTED_EXTENSIONS,d=createjs.Sound.EXTENSION_MAP,e=0,f=c.length;f>e;e++){var g=c[e],h=d[g]||g;b._capabilities[g]="no"!=a.canPlayType("audio/"+g)&&""!=a.canPlayType("audio/"+g)||"no"!=a.canPlayType("audio/"+h)&&""!=a.canPlayType("audio/"+h)}}};var c=a.prototype;c._capabilities=null,c._audioSources=null,c.defaultNumChannels=2,c.loadedHandler=null,c._init=function(){this._capabilities=b._capabilities,this._audioSources={}},c.register=function(a,b){this._audioSources[a]=!0;for(var c=createjs.HTMLAudioPlugin.TagPool.get(a),d=null,e=b||this.defaultNumChannels,f=0;e>f;f++)d=this._createTag(a),c.add(d);if(d.id=a,this.loadedHandler=createjs.proxy(this._handleTagLoad,this),d.addEventListener&&d.addEventListener("canplaythrough",this.loadedHandler),null==d.onreadystatechange)d.onreadystatechange=this.loadedHandler;else{var g=d.onreadystatechange;d.onreadystatechange=function(){g(),this.loadedHandler()}}return{tag:d,numChannels:e}},c._handleTagLoad=function(a){a.target.removeEventListener&&a.target.removeEventListener("canplaythrough",this.loadedHandler),a.target.onreadystatechange=null,a.target.src!=a.target.id&&createjs.HTMLAudioPlugin.TagPool.checkSrc(a.target.id)},c._createTag=function(a){var b=document.createElement("audio");return b.autoplay=!1,b.preload="none",b.src=a,b},c.removeSound=function(a){delete this._audioSources[a],createjs.HTMLAudioPlugin.TagPool.remove(a)},c.removeAllSounds=function(){this._audioSources={},createjs.HTMLAudioPlugin.TagPool.removeAll()},c.create=function(a){if(!this.isPreloadStarted(a)){var b=createjs.HTMLAudioPlugin.TagPool.get(a),c=this._createTag(a);c.id=a,b.add(c),this.preload(a,{tag:c})}return new createjs.HTMLAudioPlugin.SoundInstance(a,this)},c.isPreloadStarted=function(a){return null!=this._audioSources[a]},c.preload=function(a,b){this._audioSources[a]=!0,new createjs.HTMLAudioPlugin.Loader(a,b.tag)},c.toString=function(){return"[HTMLAudioPlugin]"},createjs.HTMLAudioPlugin=a}(),function(){"use strict";function a(a,b){this._init(a,b)}var b=a.prototype=new createjs.EventDispatcher;b.src=null,b.uniqueId=-1,b.playState=null,b._owner=null,b.loaded=!1,b._offset=0,b._delay=0,b._volume=1;try{Object.defineProperty(b,"volume",{get:function(){return this._volume},set:function(a){null!=Number(a)&&(a=Math.max(0,Math.min(1,a)),this._volume=a,this._updateVolume())}})}catch(c){}b.pan=0,b._duration=0,b._remainingLoops=0,b._delayTimeoutId=null,b.tag=null,b._muted=!1,b._paused=!1,b._endedHandler=null,b._readyHandler=null,b._stalledHandler=null,b.loopHandler=null,b._init=function(a,b){this.src=a,this._owner=b,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleSoundReady,this),this._stalledHandler=createjs.proxy(this._handleSoundStalled,this),this.loopHandler=createjs.proxy(this.handleSoundLoop,this)},b._sendEvent=function(a){var b=new createjs.Event(a);this.dispatchEvent(b)},b._cleanUp=function(){var a=this.tag;if(null!=a){a.pause(),a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1);try{a.currentTime=0}catch(b){}createjs.HTMLAudioPlugin.TagPool.setInstance(this.src,a),this.tag=null}clearTimeout(this._delayTimeoutId),null!=window.createjs&&createjs.Sound._playFinished(this)},b._interrupt=function(){null!=this.tag&&(this.playState=createjs.Sound.PLAY_INTERRUPTED,this._cleanUp(),this._paused=!1,this._sendEvent("interrupted"))},b.play=function(a,b,c,d,e,f){this._cleanUp(),createjs.Sound._playInstance(this,a,b,c,d,e,f)},b._beginPlaying=function(a,b,c,d){if(null==window.createjs)return-1;var e=this.tag=createjs.HTMLAudioPlugin.TagPool.getInstance(this.src);return null==e?(this.playFailed(),-1):(e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._offset=a,this.volume=c,this.pan=d,this._updateVolume(),this._remainingLoops=b,4!==e.readyState?(e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.preload="auto",e.load()):this._handleSoundReady(null),this._sendEvent("succeeded"),1)},b._handleSoundStalled=function(){this._cleanUp(),this._sendEvent("failed")},b._handleSoundReady=function(){if(null!=window.createjs){if(this._duration=1e3*this.tag.duration,this.playState=createjs.Sound.PLAY_SUCCEEDED,this._paused=!1,this.tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._offset>=this.getDuration())return void this.playFailed();this._offset>0&&(this.tag.currentTime=.001*this._offset),-1==this._remainingLoops&&(this.tag.loop=!0),0!=this._remainingLoops&&(this.tag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1),this.tag.loop=!0),this.tag.play()}},b.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||null==this.tag?!1:(this._paused=!0,this.tag.pause(),clearTimeout(this._delayTimeoutId),!0)},b.resume=function(){return this._paused&&null!=this.tag?(this._paused=!1,this.tag.play(),!0):!1},b.stop=function(){return this._offset=0,this.pause(),this.playState=createjs.Sound.PLAY_FINISHED,this._cleanUp(),!0},b.setMasterVolume=function(){return this._updateVolume(),!0},b.setVolume=function(a){return this.volume=a,!0},b._updateVolume=function(){if(null!=this.tag){var a=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;return a!=this.tag.volume&&(this.tag.volume=a),!0}return!1},b.getVolume=function(){return this.volume},b.setMasterMute=function(){return this._updateVolume(),!0},b.setMute=function(a){return null==a||void 0==a?!1:(this._muted=a,this._updateVolume(),!0)},b.getMute=function(){return this._muted},b.setPan=function(){return!1},b.getPan=function(){return 0},b.getPosition=function(){return null==this.tag?this._offset:1e3*this.tag.currentTime},b.setPosition=function(a){if(null==this.tag)this._offset=a;else{this.tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1);try{this.tag.currentTime=.001*a}catch(b){return!1}this.tag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1)}return!0},b.getDuration=function(){return this._duration},b._handleSoundComplete=function(){this._offset=0,null!=window.createjs&&(this.playState=createjs.Sound.PLAY_FINISHED,this._cleanUp(),this._sendEvent("complete"))},b.handleSoundLoop=function(){this._offset=0,this._remainingLoops--,0==this._remainingLoops&&(this.tag.loop=!1,this.tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1)),this._sendEvent("loop")},b.playFailed=function(){null!=window.createjs&&(this.playState=createjs.Sound.PLAY_FAILED,this._cleanUp(),this._sendEvent("failed"))},b.toString=function(){return"[HTMLAudioPlugin SoundInstance]"},createjs.HTMLAudioPlugin.SoundInstance=a}(),function(){"use strict";function a(a,b){this._init(a,b)}var b=a.prototype;b.src=null,b.tag=null,b.preloadTimer=null,b.loadedHandler=null,b._init=function(a,b){if(this.src=a,this.tag=b,this.preloadTimer=setInterval(createjs.proxy(this.preloadTick,this),200),this.loadedHandler=createjs.proxy(this.sendLoadedEvent,this),this.tag.addEventListener&&this.tag.addEventListener("canplaythrough",this.loadedHandler),null==this.tag.onreadystatechange)this.tag.onreadystatechange=createjs.proxy(this.sendLoadedEvent,this);else{var c=this.tag.onreadystatechange;this.tag.onreadystatechange=function(){c(),this.tag.onreadystatechange=createjs.proxy(this.sendLoadedEvent,this)}}this.tag.preload="auto",this.tag.load()},b.preloadTick=function(){var a=this.tag.buffered,b=this.tag.duration;a.length>0&&a.end(0)>=b-1&&this.handleTagLoaded()},b.handleTagLoaded=function(){clearInterval(this.preloadTimer)},b.sendLoadedEvent=function(){this.tag.removeEventListener&&this.tag.removeEventListener("canplaythrough",this.loadedHandler),this.tag.onreadystatechange=null,createjs.Sound._sendFileLoadEvent(this.src)},b.toString=function(){return"[HTMLAudioPlugin Loader]"},createjs.HTMLAudioPlugin.Loader=a}(),function(){"use strict";function a(a){this._init(a)}var b=a;b.tags={},b.get=function(c){var d=b.tags[c];return null==d&&(d=b.tags[c]=new a(c)),d},b.remove=function(a){var c=b.tags[a];return null==c?!1:(c.removeAll(),delete b.tags[a],!0)},b.removeAll=function(){for(var a in b.tags)b.tags[a].removeAll();b.tags={}},b.getInstance=function(a){var c=b.tags[a];return null==c?null:c.get()},b.setInstance=function(a,c){var d=b.tags[a];return null==d?null:d.set(c)},b.checkSrc=function(a){var c=b.tags[a];return null==c?null:void c.checkSrcChange()};var c=a.prototype;c.src=null,c.length=0,c.available=0,c.tags=null,c._init=function(a){this.src=a,this.tags=[]},c.add=function(a){this.tags.push(a),this.length++,this.available++},c.removeAll=function(){for(;this.length--;)delete this.tags[this.length];this.src=null,this.tags.length=0},c.get=function(){if(0==this.tags.length)return null;this.available=this.tags.length;var a=this.tags.pop();return null==a.parentNode&&document.body.appendChild(a),a},c.set=function(a){var b=createjs.indexOf(this.tags,a);-1==b&&this.tags.push(a),this.available=this.tags.length},c.checkSrcChange=function(){
for(var a=this.tags.length-1,b=this.tags[a].src;a--;)this.tags[a].src=b},c.toString=function(){return"[HTMLAudioPlugin TagPool]"},createjs.HTMLAudioPlugin.TagPool=a}();var __slice=[].slice;!function(a){var b,c,d,e,f,g;if(f=a.Wistia,c=function(){var b;return b={},b.wistia="1.0",b.extend=function(){var a,c,d;return a=arguments[0],c=2<=arguments.length?__slice.call(arguments,1):[],c.length||(c=[a],a=b),(d=b.obj).merge.apply(d,[a].concat(__slice.call(c))),a},b.proto=function(c){return null==c&&(c=a.location.href),b.url.proto(c)},b.mixin=function(a,b){var c,d,e;e=[];for(c in b)d=b[c],b.hasOwnProperty(c)&&e.push(a[c]=d);return e},b.data=function(a,c){return b.obj.isArray(a)||(a=a.split(".")),null!=c&&b.obj.set(b,["_data"].concat(a),c),b.obj.get(b,["_data"].concat(a))},b.removeData=function(a){return b.obj.isArray(a)||(a=a.split(".")),b.obj.unset(b,["_data"].concat(a))},b._timeouts||(b._timeouts={}),b.timeout=function(a,c,d){var e;return null==d&&(d=1),b.clearTimeouts(a),b.obj.isArray(a)||(a=a.split(".")),a=["timeouts"].concat(a).join("."),c?(e=setTimeout(function(){return b.removeData(a),c()},d),b._timeouts[a]=e):b._timeouts[a]},b.clearTimeouts=function(a){var c,d,e;b.obj.isArray(a)||(a=a.split(".")),a=["timeouts"].concat(a).join("."),e=b._timeouts;for(c in e)d=e[c],0===("function"==typeof c.indexOf?c.indexOf(a):void 0)&&clearTimeout(d);return b._timeouts[a]=null,delete b._timeouts[a]},b.seqId=function(a,c){var d,e;return null==a&&(a="wistia_"),null==c&&(c=""),d=b._sequenceVal||1,e=""+a+d+c,b._sequenceVal=d+1,e},b.css=function(a){var c;return/\{/.test(a)&&/\}/.test(a)?b.util.addInlineCss(document.body||document.head,a):(c=document.createElement("link"),c.setAttribute("rel","stylesheet"),c.setAttribute("href",a),b.elem.append(document.body||document.head,c),c)},b.script=function(){var a,c;return a=1<=arguments.length?__slice.call(arguments,0):[],(c=b.remote).scripts.apply(c,a)},b.require=function(){var a,c;return a=1<=arguments.length?__slice.call(arguments,0):[],(c=b.remote).require.apply(c,a)},b},b=function(){return null!=a.Wistia&&null!=a.Wistia.wistia},b()||(a.Wistia=c()),null!=f&&null==f.wistia){g=[];for(d in f)e=f[d],g.push(Wistia[d]=e);return g}}(window);var __slice=[].slice;!function(a){return a.obj?void 0:a.obj={merge:function(){var a,b,c,d,e,f=this;if(a=arguments[0],c=2<=arguments.length?__slice.call(arguments,1):[],!c.length)return a;for(d=0,e=c.length;e>d;d++)b=c[d],this.eachDeep(b,function(b,c){var d;if(d=f.get(a,c),f.isArray(b)){if(f.isEmpty(d))return f.set(a,c,[])}else{if(!f.isObject(b))return f.set(a,c,b);if(f.isEmpty(d))return f.set(a,c,{})}});return a},clone:function(a){return a instanceof Array?this.merge([],a):this.merge({},a)},get:function(a,b,c){var d,e,f;for(b="string"==typeof b?b.split("."):b.slice(0,b.length),d=a;null!=a&&b.length;)f=b.shift(),(void 0===a[f]||!this.isObject(a[f])&&!this.isArray(a[f]))&&c&&(0===f?(a=d[e]=[],a[f]={}):a[f]={}),d=a,e=f,a=a[f];return a},set:function(a,b,c){var d;return b="string"==typeof b?b.split("."):b.slice(0,b.length),d=b.pop(),a=this.get(a,b,!0),null!=a&&(this.isObject(a)||this.isArray(a))&&null!=d?null!=c?a[d]=c:delete a[d]:void 0},unset:function(a,b){return this.set(a,b)},exists:function(a,b){return void 0!==this.get(a,b)},cast:function(a){return null==a?a:this.isObject(a)||this.isArray(a)?this.castDeep(a):(a=""+a,/^[1-9]\d*?$/.test(a)?parseInt(a,10):"0"===a?0:/^\d*\.\d+/.test(a)?parseFloat(a):/^true$/i.test(a)?!0:/^false$/i.test(a)?!1:a)},castDeep:function(a){var b=this;return this.eachLeaf(a,function(c,d){return"string"==typeof c?b.set(a,d,b.cast(c)):void 0}),a},isArray:function(a){return null!=a&&/^\s*function Array()/.test(a.constructor)},isObject:function(a){return null!=a&&/^\s*function Object()/.test(a.constructor)},isRegExp:function(a){return null!=a&&/^\s*function RegExp()/.test(a.constructor)},isBasicType:function(a){return null!=a&&(this.isRegExp(a)||/^string|number|boolean|function$/i.test(typeof a))},isEmpty:function(a){var b,c,d;if(null==a)return!0;if(this.isArray(a)&&!a.length)return!0;if(this.isObject(a)){b=!0;for(c in a)d=a[c],b=!1;return b}return!1},isSubsetDeep:function(a,b){var c,d=this;return a===b?!0:null!=a&&null==b||null==a&&null!=b?!1:(c=!0,this.eachLeaf(a,function(a,e){var f;return f=d.get(b,e),a!==f?c=!1:void 0}),c)},equalsDeep:function(a,b){return this.isSubsetDeep(a,b)&&this.isSubsetDeep(b,a)},eachDeep:function(a,b,c){var d,e,f;if(null==c&&(c=[]),this.isBasicType(a))b(a,c);else if(this.isObject(a)||this.isArray(a)){b(a,c);for(d in a)f=a[d],e=c.slice(0,c.length),e.push(d),this.eachDeep(f,b,e)}else b(a,c)},eachLeaf:function(a,b){var c=this;return this.eachDeep(a,function(a,d){return c.isArray(a)||c.isObject(a)?void 0:b(a,d)})},hasDontEnumBug:!{toString:null}.propertyIsEnumerable("toString"),DontEnums:["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],keys:function(b){var c,d,e,f,g,h,i,j;if(Object.keys)return Object.keys(b);if("object"!=typeof o&&"function"!=typeof o||null===o)throw new TypeError("Object.keys called on a non-object");if(a.obj.hasDontEnumBug){for(h=a.obj.DontEnums,i=[],f=0,g=h.length;g>f;f++)d=h[f],o.hasOwnProperty(d)&&i.push(d);return i}j=[];for(c in o)e=o[c],j.push(e);return j}}}(Wistia),function(W){return W.util?void 0:W.util={bindEvent:function(){var a;return(a=W.elem).bind.apply(a,arguments)},unbindEvent:function(){var a;return(a=W.elem).unbind.apply(a,arguments)},elemHeight:function(a){return W.elem.height(a)},elemWidth:function(a){return W.elem.width(a)},elemInDom:function(a){return W.elem.inDom(a)},winHeight:function(){return W.elem.height(window)},winWidth:function(){return W.elem.width(window)},docHeight:function(){return W.elem.height(document)},docWidth:function(){return W.elem.width(document)},addInlineCss:function(a,b){var c,d;return c=document.createElement("style"),c.id=Wistia.seqId("wistia_","_style"),c.setAttribute("type","text/css"),c.className="wistia_injected_style",d=document.getElementsByTagName("style"),a.appendChild(c,a.nextSibling),c.styleSheet?c.styleSheet.cssText=b:c.appendChild(document.createTextNode(b)),c},cssTags:function(a){return a.match(/<link.*?rel=['"]stylesheet['"][^>]*>|<style>[\s\S]+?<\/style>/gi)||[]},execCssTags:function(a){var b,c,d,e,f,g,h;if(!a)return null;for(a instanceof Array||(a=Wistia.util.cssTags(a)),c=[],g=0,h=a.length;h>g;g++)b=a[g],/<link.*?rel=['"]stylesheet['"][^>]*>/.test(b)?(e=b.match(/href=['"](.*?)['"]/i))&&(d=document.createElement("link"),d.setAttribute("rel","stylesheet"),d.setAttribute("href",e[1]),d.className="wistia_injected_style",Wistia.elem.append(document.body||document.head,d),c.push(d)):/<style>[\s\S]+?<\/style>/gi.test(b)&&(e=b.match(/<style>([\s\S]+?)<\/style>/i))&&(f=Wistia.util.addInlineCss(document.body||document.head,e[1]),c.push(f));return c},removeCssTags:function(a){return a.replace(/<link.*?rel=['"]stylesheet['"][^>]*>|<style>[\s\S]+?<\/style>/gi,"")},unescapeHtml:function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.childNodes.length>0?b.childNodes[0].nodeValue:""},scriptTags:function(a){return a.match(/<script.*?src[^>]*>\s*<\/script>|<script.*?>[\s\S]+?<\/script>/gi)||[]},execScriptTags:function(scriptTags,callback){var hash,hashes,matches,scriptTag,src,_i,_len;if(!scriptTags)return null;for(scriptTags instanceof Array||(scriptTags=Wistia.util.scriptTags(scriptTags)),hashes=[],_i=0,_len=scriptTags.length;_len>_i;_i++)scriptTag=scriptTags[_i],hash={},(matches=scriptTag.match(/<script.*?>/i))&&(matches=matches[0].match(/src="([^"]+)"/i))?(hash.src=matches[1],hash.async=/async/i.test(scriptTag.replace(hash.src,""))):(matches=scriptTag.match(/<script>([\s\S]+?)<\/script>/i))&&(src=matches[1],hash.fn=function(){return eval(src)}),hashes.push(hash);return Wistia.remote.scripts(hashes,callback)},removeScriptTags:function(a){return a.replace(/<script.*?src[^>]*>\s*<\/script>|<script>[\s\S]+?<\/script>/g,"")},scrollTop:function(a){var b,c,d,e;return null!=a?(null!=(b=document.body)&&(b.scrollTop=a),null!=(c=document.documentElement)?c.scrollTop=a:void 0):("undefined"!=typeof document&&null!==document&&null!=(d=document.documentElement)?d.scrollTop:void 0)||("undefined"!=typeof document&&null!==document&&null!=(e=document.body)?e.scrollTop:void 0)||0},scrollLeft:function(a){var b,c,d,e;return null!=a?(null!=(b=document.body)&&(b.scrollLeft=a),null!=(c=document.documentElement)?c.scrollLeft=a:void 0):("undefined"!=typeof document&&null!==document&&null!=(d=document.documentElement)?d.scrollLeft:void 0)||("undefined"!=typeof document&&null!==document&&null!=(e=document.body)?e.scrollLeft:void 0)||0},transitionCss:function(){var a,b,c;return arguments[0]instanceof Array?(b=arguments,c=function(){var c,d,e;for(e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(""+a[0]+" "+a[1]+" linear "+(a[2]||"0s"));return e}().join(",")):(a=arguments,c=""+a[0]+" "+a[1]+" linear "+(a[2]||"0s")),"-webkit-transition: "+c+";\n-moz-transition: "+c+";\n-o-transition: "+c+";\n-ms-transition: "+c+";\ntransition: "+c+";"},niceDuration:function(a){var b,c,d;return b=d=0,a>0&&(b+=Math.floor(a/60),a%=60),d=Math.round(a),60===d&&(b+=1,d=0),c=""+b+":"+this.padNumber(d,2)},padNumber:function(a,b){var c;for(null==b&&(b=0),c=""+a;c.length<b;)c="0"+c;return c},localDate:function(a){var b,c;return null==a&&(a=new Date),c=-a.getTimezoneOffset(),b=c>=0?"+":"-",""+a.getFullYear()+"-"+this.padNumber(a.getMonth()+1,2)+"-"+this.padNumber(a.getDate(),2)+"T"+this.padNumber(a.getHours(),2)+":"+this.padNumber(a.getMinutes(),2)+":"+this.padNumber(a.getSeconds(),2)+b+this.padNumber(Math.abs(Math.floor(c/60)),2)+":"+this.padNumber(Math.abs(Math.floor(c%60)),2)},requestAnimationFrame:function(a){var b;return(b=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){return setTimeout(a,1e3/60)})(a)},notSetOrTrue:function(a){return null==a||a===!0},poll:function(a,b,c,d){var e,f,g;return null==c&&(c=50),null==d&&(d=5e3),f=null,g=(new Date).getTime(),e=function(){return(new Date).getTime()-g>5e3?void 0:a()?b():(clearTimeout(f),f=setTimeout(e,c))},f=setTimeout(e,1)}}}(Wistia);var __slice=[].slice;!function(a){return a.elem?void 0:a.elem={html:function(b,c){var d,e;return d=a.util.cssTags(c),e=a.util.scriptTags(c),c=a.util.removeCssTags(c),c=a.util.removeScriptTags(c),a.util.execCssTags(d),b.innerHTML=c,a.util.execScriptTags(e)},fromObject:function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;if(a.obj.isArray(b))return function(){var c,d,e;for(e=[],c=0,d=b.length;d>c;c++)m=b[c],e.push(a.elem.fromObject(m));return e}();n=b.tagName||"div",e=b.childNodes||[],a.obj.isArray(e)||(e=[e]),h=document.createElement(n);for(j in b)if(p=b[j],"childNodes"!==j&&"tagName"!==j)if(g=j.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),"style"===j)if(a.obj.isObject(p))for(k in p)o=p[k],h.style[k]=o;else for(u=p.split(";"),q=0,s=u.length;s>q;q++)l=u[q],v=l.split(/\s*:\s*/),k=v[0],o=v[1],k&&o&&(h.style[k]=o);else if("events"===j)for(i in p)c=p[i],a.elem.bind(h,i,c);else"className"===j||"class"===j?h.className=p:"innerHTML"===j?h.innerHTML=p:null!=p&&"string"==typeof p&&h.setAttribute(g,p.toString());for(r=0,t=e.length;t>r;r++)f=e[r],a.obj.isObject(f)?(d=a.elem.fromObject(f),a.elem.append(h,d)):(d=document.createTextNode(f.toString()),a.elem.append(h,d));return h},toObject:function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(a.obj.isArray(b))return function(){var c,d,e;for(e=[],c=0,d=b.length;d>c;c++)h=b[c],e.push(a.elem.toObject(h));return e}();for(g={},g.tagName=b.tagName.toLowerCase(),o=a.obj.keys(b),k=0,m=o.length;m>k;k++)if(c=o[k],"tagName"!==c&&"childNodes"!==c&&"nodeType"!==c&&"nodeValue"!==c)if("style"===c)for(g.style={},p=a.obj.keys(b.style),l=0,n=p.length;n>l;l++)f=p[l],i=b.style[f],i&&!/^\d/.test(f)&&"length"!==f&&(g.style[f]=i);else j=b.getAttribute(c),null!=j&&(g[c]=j);return e=function(){var c,e,f,g;for(f=b.childNodes,g=[],c=0,e=f.length;e>c;c++)d=f[c],g.push(1===d.nodeType?a.elem.toObject(d):3===d.nodeType?d.nodeValue:null);return g}(),e=function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a++)d=e[a],d&&c.push(d);return c}(),0!==e.length&&(g.childNodes=e),g},clone:function(a){var b;return b=this.toObject(a),this.fromObject(b)},append:function(b,c){var d,e,f;{if(!a.obj.isArray(c))return b.appendChild(c);for(e=0,f=c.length;f>e;e++)d=c[e],a.elem.append(b,d)}},prepend:function(b,c){var d,e,f;{if(!a.obj.isArray(c))return 0===b.childNodes.length?this.append(b,c):b.insertBefore(c,b.childNodes[0]);for(e=0,f=c.length;f>e;e++)d=c[e],a.elem.prepend(b,d)}},before:function(b,c){var d,e,f,g;{if(!a.obj.isArray(c))return b.parentNode.insertBefore(c,b);for(g=c.reverse(),e=0,f=g.length;f>e;e++)d=g[e],a.elem.before(b,d)}},after:function(b,c){var d,e,f,g;{if(!a.obj.isArray(c))return b.parentNode.insertBefore(c,b.nextSibling);for(g=c.reverse(),e=0,f=g.length;f>e;e++)d=g[e],a.elem.after(b,d)}},remove:function(b){var c,d,e,f;{if(!a.obj.isArray(b))return b&&(d=b.parentNode)?(d.removeChild(b),b=null):void 0;for(e=0,f=b.length;f>e;e++)c=b[e],a.elem.remove(c)}},removeClass:function(a,b){var c;if(this.hasClass(a,b))return null!=a.className?(c=new RegExp(""+b,"g"),a.className=this.normalizeClassName(a.className.replace(c,""))):void 0},addClass:function(a,b){return this.hasClass(a,b)?void 0:null!=a.className?(this.removeClass(a,b),a.className=this.normalizeClassName(""+a.className+" "+b)):a.className=b},hasClass:function(a,b){return(" "+a.className+" ").indexOf(" "+b+" ")>=0},normalizeClassName:function(a){return a.replace(/^\s+/g,"").replace(/\s+$/g,"").replace(/\s+/g," ")},style:function(){var a,b,c,d,e,f;if(b=arguments[0],a=2<=arguments.length?__slice.call(arguments,1):[],2===a.length)return c=a[0],e=a[1],null!=e?b.style[c]=e:b.currentStyle?b.currentStyle[c]:window.getComputedStyle?getComputedStyle(b,null).getPropertyValue(c):null;if(1===a.length){d=a[0],f=[];for(c in d)e=d[c],f.push(b.style[c]=e);return f}return"undefined"!=typeof console&&null!==console?console.log.apply(console,["Unexpected args for Wistia.elem.style"].concat(__slice.call(a))):void 0},width:function(b){var c,d,e,f;return b===window?window.innerWidth?window.innerWidth:document.documentElement?document.documentElement.offsetWidth:document.body.offsetWidth:b===document?(c=document.body,d=document.documentElement,Math.max(c.scrollWidth,c.offsetWidth,d.clientWidth,d.scrollWidth,d.offsetWidth)):a.detect.browser.quirks?parseInt(b.offsetWidth,10):(e="function"==typeof window.getComputedStyle&&null!=(f=window.getComputedStyle(b,null))?f.width:void 0)?parseInt(e,10):b.currentStyle?b.offsetWidth:-1},height:function(b){var c,d,e,f;return b===window?window.innerHeight?window.innerHeight:document.documentElement?document.documentElement.offsetHeight:document.body.offsetHeight:b===document?(c=document.body,d=document.documentElement,Math.max(c.scrollHeight,c.offsetHeight,d.clientHeight,d.scrollHeight,d.offsetHeight)):a.detect.browser.quirks?parseInt(b.offsetHeight,10):(e="function"==typeof window.getComputedStyle&&null!=(f=window.getComputedStyle(b,null))?f.height:void 0)?parseInt(e,10):b.currentStyle?b.offsetHeight:-1},offset:function(a){var b,c,d,e;if(b=c=0,a.offsetParent)for(;a;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return c+=(null!=(d=document.documentElement)?d.offsetTop:void 0)||0,b+=(null!=(e=document.documentElement)?e.offsetLeft:void 0)||0,{left:b,top:c}},containsOffset:function(b,c,d){var e;return e=this.offset(b),e.right=e.left+a.elem.width(b),e.bottom=e.top+a.elem.height(b),e.left<=c&&c<e.right&&e.top<=d&&d<e.bottom},scrollOffset:function(a){var b,c;if(b=c=0,a.parentNode)for(;null!=a?a.offsetParent:void 0;)c+=a.scrollTop,b+=a.scrollLeft,a=a.parentNode;return{left:b,top:c}},isHidden:function(a){for(;a&&1===a.nodeType;){if("none"===a.style.display)return!0;a=a.parentNode}return!1},inDom:function(a){for(;a=a.parentNode;)if(a===document)return!0;return!1},isDescendantOf:function(a,b){var c,d,e,f;for(f=this.ancestors(a),d=0,e=f.length;e>d;d++)if(c=f[d],c===b)return!0;return!1},ancestorHasClass:function(a,b){var c,d,e,f;for(f=this.ancestors(a),d=0,e=f.length;e>d;d++)if(c=f[d],this.hasClass(c,b))return!0;return!1},ancestors:function(a){var b,c;for(b=a,c=[];b=b.parentNode;)c.push(b);return c},isInside:function(a,b){return a===b||this.isDescendantOf(a,b)},bind:function(b,c,d){var e,f,g=this;return e=function(){var e,f,h,i;return f=arguments[0],e=2<=arguments.length?__slice.call(arguments,1):[],f=f||window.event,!f.pageX&&!f.pageY&&(f.clientX||f.clientY)&&(f.pageX=f.clientX+a.util.scrollLeft(),f.pageY=f.clientY+a.util.scrollTop()),f.preventDefault||(f.preventDefault=function(){return f.returnValue=!1}),f.stopPropagation||(f.stopPropagation=function(){return f.cancelBubble=!0}),null==f.which&&(f.which=null!=f.charCode?f.charCode:f.keyCode),!f.which&&null!=f.button&&(f.which=1&f.button?1:2&f.button?3:4&f.button?2:a.detect.browser.msie&&0===f.button?1:0),f.target||f.srcElement&&(f.target=f.srcElement),3===(null!=(i=f.target)?i.nodeType:void 0)&&(f.target=f.target.parentNode),h=d.apply(f.target,[f].concat(e)),h===g.unbind&&g.unbind(b,c,d),h},a._elemBind||(a._elemBind={}),f=this._bindKey(b,c,d),a._elemBind[f]=e,a.detect.browser.msie&&a.detect.browser.version<9?b.attachEvent("on"+c,e):b.addEventListener(c,e,!1)},unbind:function(b,c,d){var e,f;if(null!=b._wistiaElemId&&(null!=d?d._wistiaBindId:0))return f=this._bindKey(b,c,d),e=a._elemBind[f],a.detect.browser.msie&&a.detect.browser.version<9?b.detachEvent("on"+c,e):b.removeEventListener(c,e,!1),delete a._elemBind[f]},_bindKey:function(b,c,d){return b._wistiaElemId||(b._wistiaElemId=a.seqId("wistia_elem_")),d._wistiaBindId||(d._wistiaBindId=a.seqId("wistia_bind_")),""+b._wistiaElemId+"."+c+"."+d._wistiaBindId},rebind:function(a,b,c){return c?(this.unbind(a,b,c),this.bind(a,b,c)):void 0},bindOnce:function(b,c,d){var e;return e=function(){return d.call.apply(d,[this].concat(__slice.call(arguments))),a.elem.unbind},this.bind(b,c,e)},trigger:function(){var b,c,d,e,f,g,h,i;if(c=arguments[0],d=arguments[1],b=3<=arguments.length?__slice.call(arguments,2):[],c._wistiaElemId){g=""+c._wistiaElemId+"."+d+".",h=a._elemBind,i=[];for(f in h)e=h[f],i.push(0===f.indexOf(g)?e.apply(null,[{srcElement:c}].concat(__slice.call(b))):void 0);return i}},fullscreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},requestFullscreen:function(a){return a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):a.msRequestFullscreen?a.msRequestFullscreen():"undefined"!=typeof console&&null!==console?console.log("no requestFullscreen functionality detected"):void 0},cancelFullscreen:function(){return document.cancelFullscreen?document.cancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():"undefined"!=typeof console&&null!==console?console.log("no cancelFullscreen functionality detected"):void 0},stripEventAttributes:function(a){var b,c,d,e,f,g,h,i,j,k;c=(null!=a?a.attributes:void 0)||[];try{for(f=0,h=c.length;h>f;f++)b=c[f],/^on.+/i.test(b.name)&&(a[b.name]=null,a.removeAttribute(b.name))}catch(l){e=l,"undefined"!=typeof console&&null!==console&&console.log(e)}for(j=null!=a?a.childNodes:void 0,k=[],g=0,i=j.length;i>g;g++)d=j[g],k.push(1===d.nodeType?this.stripEventAttributes(d):void 0);return k},mutationObserver:function(b){var c;return c=a._detect.mutationObserver(),c?new window[c](b):null}}}(Wistia);var __slice=[].slice;!function(a){var b,c,d,e;if(!a.bindable){a.bindable={bind:function(a,b){return this._bindings||(this._bindings={}),this._bindings[a]||(this._bindings[a]=[]),this._bindings[a].push(b),this},unbind:function(a,b){var c,d,e,f,g;if(this._bindings||(this._bindings={}),c=this._bindings[a])if(b){for(e=[],d=f=0,g=c.length;g>=0?g>f:f>g;d=g>=0?++f:--f)b!==c[d]&&e.push(c[d]);this._bindings[a]=e}else this._bindings[a]=[];return this._bindings[a]&&!this._bindings[a].length&&(this._bindings[a]=null,delete this._bindings[a]),this},hasBindings:function(){var a,b,c,d;this._bindings||(this._bindings={}),b=!1,d=this._bindings;for(a in d)c=d[a],this._bindings.hasOwnProperty(a)&&(b=!0);return b},trigger:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;if(f=arguments[0],a=2<=arguments.length?__slice.call(arguments,1):[],this._bindings||(this._bindings={}),g=[],c=this._bindings[f]){for(h=0,l=c.length;l>h;h++){d=c[h];try{d&&d.apply(this,a)===this.unbind&&g.push({event:f,fn:d})}catch(p){e=p,"string"==typeof e?"undefined"!=typeof console&&null!==console&&console.log(e):(e.message&&"undefined"!=typeof console&&null!==console&&console.log(e.message),e.stack&&"undefined"!=typeof console&&null!==console&&console.log(e.stack))}}for(i=0,m=g.length;m>i;i++)b=g[i],this.unbind(b.event,b.fn)}if(c=this._bindings.all)for(j=0,n=c.length;n>j;j++){d=c[j];try{d&&d.apply(this,[f].concat(a))===this.unbind&&g.push({event:f,fn:d})}catch(p){e=p,"string"==typeof e?"undefined"!=typeof console&&null!==console&&console.log(e):(e.message&&"undefined"!=typeof console&&null!==console&&console.log(e.message),e.stack&&"undefined"!=typeof console&&null!==console&&console.log(e.stack))}}for(k=0,o=g.length;o>k;k++)b=g[k],this.unbind(b.event,b.fn);return this}},d=a.bindable,e=[];for(b in d)c=d[b],e.push(a[b]?void 0:a[b]=c);return e}}(Wistia);var __slice=[].slice;!function(a){return a.StopGo=function(){function a(){var a=this;return this._queue=[],this._green=!1,this._lock=!1,this.allInOne=function(){return a._allInOne.apply(a,arguments)},this.defineMethodsOn(this.allInOne),this.allInOne}return a.prototype.defineMethodsOn=function(a){var b,c,d,e;b={},e=[];for(c in this)d=this[c],e.push(function(c,d,e){return"[object Function]"===b.toString.call(d)?a[c]=function(){return e[c].apply(e,arguments)}:void 0}(c,d,this));return e},a.prototype.flush=function(){var a,b,c,d,e;if(a=1<=arguments.length?__slice.call(arguments,0):[],!this._green)return this;for(this._lock=!0,c=d=0,e=this._queue.length;(e>=0?e>d:d>e)&&((b=this._queue[c])&&(a.length||!this.goArgs?b.apply(null,a):b.apply(null,this.goArgs),this._queue[c]=null),this._green);c=e>=0?++d:--d);return this.filter(function(a){return null!=a}),this._lock=!1,this},a.prototype.filter=function(a){var b;return this._queue=function(){var c,d,e,f;for(e=this._queue,f=[],c=0,d=e.length;d>c;c++)b=e[c],a(b)&&f.push(b);return f}.call(this),this},a.prototype.push=function(a){return this._queue.push(a),this},a.prototype.go=function(){var a;return a=1<=arguments.length?__slice.call(arguments,0):[],this._green=!0,this.goArgs=a,this.flush.apply(this,a),this},a.prototype.stop=function(){return this._green=!1,this},a.prototype.run=function(){var a,b,c,d;for(b=1<=arguments.length?__slice.call(arguments,0):[],c=0,d=b.length;d>c;c++)a=b[c],this.runFn(a);return this},a.prototype.runFn=function(a){return this._green?this._lock?a():(this.push(a),this.flush()):this.push(a),this},a.prototype.remove=function(){var a,b,c,d;for(b=1<=arguments.length?__slice.call(arguments,0):[],c=0,d=b.length;d>c;c++)a=b[c],this.removeFn(a);return this},a.prototype.removeFn=function(a){return this.filter(function(b){return a!==b}),this},a.prototype.setQueue=function(a){return this._queue=a,this},a.prototype.getQueue=function(){return this._queue},a.prototype._allInOne=function(){var a,b;return a=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],a===!0?this.go.apply(this,b):a===!1?this.stop():null!=a?a instanceof Array?this.run.apply(this,a):this.run.apply(this,arguments):this._green},a}(),a.StopGo.when=function(){var b,c,d,e,f,g,h,i;for(e=1<=arguments.length?__slice.call(arguments,0):[],c=new a.StopGo,b=function(){return c.go.apply(c,arguments)},i=e.reverse(),f=function(a,c){return b=function(){return c(function(){return a.apply(null,arguments)})}},g=0,h=i.length;h>g;g++)d=i[g],f(b,d);return b(),c}}(Wistia),function(){function a(a){var b,c,f,h='{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}',i="json"==a;if(i||"json-stringify"==a||"json-parse"==a){if("json-stringify"==a||i){if(b="function"==typeof g.stringify&&x){(f=function(){return 1}).toJSON=f;try{b="0"===g.stringify(0)&&"0"===g.stringify(new Number)&&'""'==g.stringify(new String)&&g.stringify(e)===d&&g.stringify(d)===d&&g.stringify()===d&&"1"===g.stringify(f)&&"[1]"==g.stringify([f])&&"[null]"==g.stringify([d])&&"null"==g.stringify(null)&&"[null,null,null]"==g.stringify([d,e,null])&&g.stringify({A:[f,!0,!1,null,"\x00\b\n\f\r	"]})==h&&"1"===g.stringify(null,f)&&"[\n 1,\n 2\n]"==g.stringify([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==g.stringify(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==g.stringify(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==g.stringify(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==g.stringify(new Date(-1))}catch(j){b=!1}}if(!i)return b}if("json-parse"==a||i){if("function"==typeof g.parse)try{if(0===g.parse("0")&&!g.parse(!1)&&(f=g.parse(h),c=5==f.A.length&&1==f.A[0])){try{c=!g.parse('"	"')}catch(j){}if(c)try{c=1!=g.parse("01")}catch(j){}}}catch(j){c=!1}if(!i)return c}return b&&c}}var b,c,d,e={}.toString,f="function"==typeof define&&define.amd,g=!f&&"object"==typeof exports&&exports;g=this.JSON||(this.JSON={});var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=new Date(-0xc782b5b800cec);try{x=-109252==x.getUTCFullYear()&&0===x.getUTCMonth()&&1==x.getUTCDate()&&10==x.getUTCHours()&&37==x.getUTCMinutes()&&6==x.getUTCSeconds()&&708==x.getUTCMilliseconds()}catch(y){}a("json")||(x||(u=Math.floor,v=[0,31,59,90,120,151,181,212,243,273,304,334],w=function(a,b){return v[b]+365*(a-1970)+u((a-1969+(b=+(b>1)))/4)-u((a-1901+b)/100)+u((a-1601+b)/400)}),(b={}.hasOwnProperty)||(b=function(a){var c,d={};return(d.__proto__=null,d.__proto__={toString:1},d).toString!=e?b=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(c=d.constructor,b=function(a){var b=(this.constructor||c).prototype;return a in this&&!(a in b&&this[a]===b[a])}),d=null,b.call(this,a)}),c=function(a,c){var d,f,g,h,i=0;(d=function(){this.valueOf=0}).prototype.valueOf=0,f=new d;for(g in f)b.call(f,g)&&i++;return d=f=null,i?h=2==i?function(a,c){var d,f={},g="[object Function]"==e.call(a);for(d in a)(!g||"prototype"!=d)&&!b.call(f,d)&&(f[d]=1)&&b.call(a,d)&&c(d)}:function(a,c){var d,f,g="[object Function]"==e.call(a);for(d in a)(!g||"prototype"!=d)&&b.call(a,d)&&!(f="constructor"===d)&&c(d);(f||b.call(a,d="constructor"))&&c(d)}:(f=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],h=function(a,c){var d,g,h="[object Function]"==e.call(a);for(d in a)(!h||"prototype"!=d)&&b.call(a,d)&&c(d);for(g=f.length;d=f[--g];b.call(a,d)&&c(d));}),h(a,c)},a("json-stringify")||(h={"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},i=function(a,b){return("000000"+(b||0)).slice(-a)},j=function(a){for(var b,c='"',d=0;b=a.charAt(d);d++)c+='\\"\b\f\n\r	'.indexOf(b)>-1?h[b]:h[b]=" ">b?"\\u00"+i(2,b.charCodeAt(0).toString(16)):b;return c+'"'},k=function(a,f,g,h,l,m,n){var o,p,q,r,s,t,v,x,y,z,A,B,C,D,E,F,G=f[a];if("object"==typeof G&&G)if(o=e.call(G),"[object Date]"!=o||b.call(G,"toJSON"))"function"==typeof G.toJSON&&("[object Number]"!=o&&"[object String]"!=o&&"[object Array]"!=o||b.call(G,"toJSON"))&&(G=G.toJSON(a));else if(G>-1/0&&1/0>G){if(w){for(r=u(G/864e5),p=u(r/365.2425)+1970-1;w(p+1,0)<=r;p++);for(q=u((r-w(p,0))/30.42);w(p,q+1)<=r;q++);r=1+r-w(p,q),s=(G%864e5+864e5)%864e5,t=u(s/36e5)%24,v=u(s/6e4)%60,x=u(s/1e3)%60,y=s%1e3}else p=G.getUTCFullYear(),q=G.getUTCMonth(),r=G.getUTCDate(),t=G.getUTCHours(),v=G.getUTCMinutes(),x=G.getUTCSeconds(),y=G.getUTCMilliseconds();G=(0>=p||p>=1e4?(0>p?"-":"+")+i(6,0>p?-p:p):i(4,p))+"-"+i(2,q+1)+"-"+i(2,r)+"T"+i(2,t)+":"+i(2,v)+":"+i(2,x)+"."+i(3,y)+"Z"}else G=null;if(g&&(G=g.call(f,a,G)),null===G)return"null";if(o=e.call(G),"[object Boolean]"==o)return""+G;if("[object Number]"==o)return G>-1/0&&1/0>G?""+G:"null";if("[object String]"==o)return j(G);if("object"==typeof G){for(C=n.length;C--;)if(n[C]===G)throw TypeError();if(n.push(G),z=[],D=m,m+=l,"[object Array]"==o){for(B=0,C=G.length;C>B;E||(E=!0),B++)A=k(B,G,g,h,l,m,n),z.push(A===d?"null":A);F=E?l?"[\n"+m+z.join(",\n"+m)+"\n"+D+"]":"["+z.join(",")+"]":"[]"}else c(h||G,function(a){var b=k(a,G,g,h,l,m,n);b!==d&&z.push(j(a)+":"+(l?" ":"")+b),E||(E=!0)}),F=E?l?"{\n"+m+z.join(",\n"+m)+"\n"+D+"}":"{"+z.join(",")+"}":"{}";return n.pop(),F}},g.stringify=function(a,b,c){var d,f,g,h,i,j;if("function"==typeof b||"object"==typeof b&&b)if("[object Function]"==e.call(b))f=b;else if("[object Array]"==e.call(b))for(g={},h=0,i=b.length;i>h;j=b[h++],("[object String]"==e.call(j)||"[object Number]"==e.call(j))&&(g[j]=1));if(c)if("[object Number]"==e.call(c)){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else"[object String]"==e.call(c)&&(d=c.length<=10?c:c.slice(0,10));return k("",(j={},j[""]=a,j),f,g,d,"",[])}),a("json-parse")||(l=String.fromCharCode,m={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"	",n:"\n",f:"\f",r:"\r"},n=function(){throw s=t=null,SyntaxError()},o=function(){for(var a,b,c,d,e,f=t,g=f.length;g>s;)if(a=f.charAt(s),"	\r\n ".indexOf(a)>-1)s++;else{if("{}[]:,".indexOf(a)>-1)return s++,a;if('"'==a){for(b="@",s++;g>s;)if(a=f.charAt(s)," ">a)n();else if("\\"==a)if(a=f.charAt(++s),'\\"/btnfr'.indexOf(a)>-1)b+=m[a],s++;else if("u"==a){for(c=++s,d=s+4;d>s;s++)a=f.charAt(s),a>="0"&&"9">=a||a>="a"&&"f">=a||a>="A"&&"F">=a||n();b+=l("0x"+f.slice(c,s))}else n();else{if('"'==a)break;b+=a,s++}if('"'==f.charAt(s))return s++,b;n()}else{if(c=s,"-"==a&&(e=!0,a=f.charAt(++s)),a>="0"&&"9">=a){for("0"==a&&(a=f.charAt(s+1),a>="0"&&"9">=a)&&n(),e=!1;g>s&&(a=f.charAt(s),a>="0"&&"9">=a);s++);if("."==f.charAt(s)){for(d=++s;g>d&&(a=f.charAt(d),a>="0"&&"9">=a);d++);d==s&&n(),s=d}if(a=f.charAt(s),"e"==a||"E"==a){for(a=f.charAt(++s),("+"==a||"-"==a)&&s++,d=s;g>d&&(a=f.charAt(d),a>="0"&&"9">=a);d++);d==s&&n(),s=d}return+f.slice(c,s)}if(e&&n(),"true"==f.slice(s,s+4))return s+=4,!0;if("false"==f.slice(s,s+5))return s+=5,!1;if("null"==f.slice(s,s+4))return s+=4,null;n()}}return"$"},p=function(a){var b,c;if("$"==a&&n(),"string"==typeof a){if("@"==a.charAt(0))return a.slice(1);if("["==a){for(b=[];a=o(),"]"!=a;c||(c=!0))c&&(","==a?(a=o(),"]"==a&&n()):n()),","==a&&n(),b.push(p(a));return b}if("{"==a){for(b={};a=o(),"}"!=a;c||(c=!0))c&&(","==a?(a=o(),"}"==a&&n()):n()),(","==a||"string"!=typeof a||"@"!=a.charAt(0)||":"!=o())&&n(),b[a.slice(1)]=p(o());return b}n()}return a},r=function(a,b,c){var e=q(a,b,c);e===d?delete a[b]:a[b]=e},q=function(a,b,d){var f,g=a[b];if("object"==typeof g&&g)if("[object Array]"==e.call(g))for(f=g.length;f--;)r(g,f,d);else c(g,function(a){r(g,a,d)});return d.call(a,b,g)},g.parse=function(a,b){var c,d;return s=0,t=a,c=p(o()),"$"!=o()&&n(),s=t=null,b&&"[object Function]"==e.call(b)?q((d={},d[""]=c,d),"",b):c}))}.call(Wistia),function(a){var b;return a.extend({url:{proto:function(a){return null==a&&(a=window.location.href),/^https:\/\//.test(a)?"https:":"http:"},paramsToJson:function(b){var c,d,e,f,g,h,i,j,k,l,m;if(i={},!b)return i;for(h=b.split("&"),k=0,l=h.length;l>k;k++)g=h[k],m=g.split("="),f=m[0],j=m[1],f=this._debrack(decodeURIComponent(f)),f=function(){var b,c,d;for(d=[],b=0,c=f.length;c>b;b++)e=f[b],d.push(a.obj.cast(e));return d}(),d=a.obj.get(i,f),null!=d?a.obj.isArray(d)?d.push(this.urlComponentToJson(j)):(c=[d],c.push(this.urlComponentToJson(j)),a.obj.set(i,f,c)):a.obj.set(i,f,this.urlComponentToJson(j));return i},urlComponentToJson:function(b){var c,d;if(d=decodeURIComponent(b),"string"!=typeof b||!/^[\{\[].*[\}\]]$/.test(d))return d;try{return a.JSON.parse(d)}catch(e){return c=e,d}},jsonToParams:function(b){var c,d=this;return c=[],a.obj.eachLeaf(b,function(a,b){return c.push(encodeURIComponent(d._brack(b))+"="+encodeURIComponent(a))}),c.join("&")},splitPath:function(a){var b,c,d,e,f;for(d=[],null!=a&&(c=a.split(/\/+/)),e=0,f=c.length;f>e;e++)b=c[e],null!=b&&""!==b&&d.push(b);
return d},joinPath:function(a){var b;return b="",null!=a&&(b="/"+a.join("/")),b},_brack:function(a){var b,c,d,e;for(c=a[0],b=d=1,e=a.length;e>=1?e>d:d>e;b=e>=1?++d:--d)c+="["+a[b]+"]";return c},_debrack:function(a){return a.match(/([\w\-\_]+)/g)}}}),b=function(){function b(a){this.params={},this.path=[],this.host="","object"==typeof a?this.fromOptions(a):a&&this.fromRaw(a)}return b.prototype._paramsR=/\?(.+)$/,b.prototype.fromOptions=function(a){var b,c,d,e;for(e=["protocol","host","port","params","path"],c=0,d=e.length;d>c;c++)b=e[c],null!=a[b]&&(this[b]=a[b]);return this},b.prototype.fromRaw=function(b){var c;return this.rawUrl=b,(c=b.match(/^((?:https?\:)|(?:file\:)|(?:ftp\:))?\/\//))&&(this.protocol=c[1]||void 0),(c=b.match(/\/\/([^\:\?\/]*)/))&&(this.host=c[1]||void 0),(c=b.match(/\/\/.*?((?:\/[^\?#$]+))/))&&(this.rawPath=c[1],this._hasTrailingSlash=/\/$/.test(this.rawPath),this.path=a.url.splitPath(this.rawPath)),(c=b.match(/\:(\d+)/))&&(this.port=parseInt(c[1],10)),(c=b.match(/\?([^#]+)/))&&(this.rawParams=c[1],this.params=a.url.paramsToJson(this.rawParams)),(c=b.match(/#(.*)$/))&&(this.anchor=c[1]),this},b.prototype.clone=function(){return new b({protocol:this.protocol,host:this.host,port:this.port,path:a.extend([],this.path),params:this.params,anchor:this.anchor})},b.prototype.ext=function(a){var b,c,d,e;return null!=a?(b=this.ext(),c=this.path.length-1,d=new RegExp("\\."+b,"g"),b&&(this.path[c]=""+this.path[c].replace(d,"")),this.path[c]=""+this.path[c]+"."+a):(null!=(e=this.path[this.path.length-1].match(/\.(.*)$/))?e[1]:void 0)||null},b.prototype.isRelative=function(){return!(null!=this.protocol&&""!==this.protocol&&this.protocol!==window.location.protocol||this.host&&this.host!==window.location.hostname)},b.prototype.toString=function(){return this.isRelative()?this.relative():this.absolute()},b.prototype.absolute=function(){var a,b;return b="",null!=this.protocol&&(b=this.protocol),a="",null!=this.port&&(a=":"+this.port),""+b+"//"+this.host+a+this.relative()},b.prototype.relative=function(){var b,c;return c="",this.path.length>0&&(c=a.url.joinPath(this.path),this._hasTrailingSlash&&(c+="/")),b="?"+a.url.jsonToParams(this.params),1===b.length&&(b=""),""+c+b+this.relativeAnchor()},b.prototype.relativeProtocol=function(){var a;return a="",null!=this.port&&(a=":"+this.port),"//"+this.host+a+this.relative()},b.prototype.relativeHost=function(){var a;return a="",null!=this.protocol&&(a=this.protocol),""+a+"//"+this.relative()},b.prototype.relativeAnchor=function(){var a;return a="",null!=this.anchor&&(a="#"+this.anchor),""+a},b}(),a.url.create=function(a){return new b(a)},a.url.parse=function(a){return new b(a)}}(Wistia),function(a){a.extend({_detect:{na:navigator.userAgent,rwebkit:/(webkit)[ \/]([^\s]+)/i,ropera:/(opera)(?:.*version)?[ \/]([^\s]+)/i,rmsie:/(msie) ([^\s;]+)/i,rmozilla:/(mozilla)(?:.*? rv:([^\s]+))?/i,randroid:/(android) ([^;]+)/i,riphone:/(iphone)/i,ripad:/(ipad)/i,rwinphone:/(Windows Phone OS (\d+(?:\.\d+)?))/,rios:/OS (\d+)_(\d+)/i,rps3:/(playstation 3)/i,browser:function(){return(this.browserMatch()[1]||"webkit").toLowerCase()},browserVersion:function(){return this.browserMatch()[2]},browserMatch:function(){var a;return null!=(a=this.na.match(this.rwebkit))?a:null!=(a=this.na.match(this.ropera))?a:(a=this.na.match(this.rmsie))?(null!=document.documentMode&&(a[2]=document.documentMode),a):(a=this.na.match(this.rmozilla))?a:[]},android:function(){var a;return a=this.na.match(this.randroid),null==a?!1:{version:a[2]}},oldandroid:function(){return this.android()&&this.android().version<"4.1.0"},iphone:function(){return this.riphone.test(this.na)},retina:function(){return window.devicePixelRatio>1},ipad:function(){return this.ripad.test(this.na)},safari:function(){return this.rwebkit.test(this.na)&&!/chrome/i.test(this.na)&&!this.ipad()&&!this.iphone()},iosVersion:function(){var a;return a=this.na.match(this.rios),null!=a?parseFloat(""+a[1]+"."+a[2]):0},windowsPhone:function(){return this.rwinphone.test(this.na)},ps3:function(){return this.rps3.test(this.na)},windows:function(){return/win/i.test(navigator.platform)},mac:function(){return/mac/i.test(navigator.platform)},linux:function(){return/linux/i.test(navigator.platform)},flash:function(){var a;return a=this.flashFullVersion(),{version:parseFloat(a[0]+"."+a[1]),major:parseInt(a[0],10),minor:parseInt(a[1],10),rev:parseInt(a[2],10)}},flashFullVersion:function(){var a,b;try{try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{a.AllowScriptAccess="always"}catch(c){return b=c,[6,0,0]}}catch(c){b=c}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1].split(",")}catch(c){b=c;try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1].split(",")}catch(c){b=c}}return[0,0,0]},html5Video:function(){var a,b,c,d;b=document.createElement("video"),d=!1;try{!b.canPlayType||(d={},c='video/mp4; codecs="avc1.42E01E',d.h264=!!b.canPlayType(c+'"')||!!b.canPlayType(c+', mp4a.40.2"'))}catch(e){a=e,d={h264:!1}}return d},localStorage:function(){var a;try{return"localStorage"in window&&null!==window.localStorage}catch(b){return a=b,!1}},json:function(){return!!window.JSON&&"function"==typeof JSON.parse},backgroundSize:function(){var a;return a=document.createElement("div"),""===a.style.backgroundSize||""===a.style.webkitBackgroundSize||""===a.style.mozBackgroundSize||""===a.style.oBackgroundSize},fullscreenEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled},mutationObserver:function(){var a,b,c,d,e;for(b=["WebKit","Moz","O","Ms",""],d=0,e=b.length;e>d;d++)if(a=b[d],c=a+"MutationObserver",window[c])return c;return null},romulusSupport:function(){return!(this.iphone()||this.ipad()||this.android()||!(/webkit|mozilla/.test(this.browser())||"msie"===this.browser()&&this.browserVersion()>=11)||!this.localStorage()||!this.html5Video().h264)}}}),a.detect||(a.extend({detect:{browser:{version:a._detect.browserVersion(),quirks:"msie"===a._detect.browser()&&"BackCompat"===document.compatMode,old:"msie"===a._detect.browser()&&("BackCompat"===document.compatMode||a._detect.browserVersion()<7),ltie8:"msie"===a._detect.browser()&&("BackCompat"===document.compatMode||a._detect.browserVersion()<8)},android:a._detect.android(),oldandroid:a._detect.oldandroid(),iphone:a._detect.iphone(),ipad:a._detect.ipad(),safari:a._detect.safari(),winphone:{version:a._detect.windowsPhone()[2]},ios:{version:a._detect.iosVersion()},windows:a._detect.windows(),mac:a._detect.mac(),linux:a._detect.linux(),retina:a._detect.retina(),ps3:a._detect.ps3(),flash:a._detect.flash(),video:a._detect.html5Video(),localstorage:a._detect.localStorage(),json:a._detect.json(),backgroundSize:a._detect.backgroundSize(),fullscreenEnabled:a._detect.fullscreenEnabled(),romulusSupport:a._detect.romulusSupport()}}),a.detect.browser[a._detect.browser()]=!0)}(Wistia),function(a){var b,c,d,e;c=function(a,b){return"hd-only"===b.videoQuality?a.hdflv||a.mdflv||a.flv||a.mp4hq||a.iphone:"md"===b.videoQuality||b.videoWidth&&b.videoWidth>=720?a.mdflv||a.flv||a.mp4hq||a.iphone:a.flv||a.mp4hq||a.iphone},d=function(b,c){var d;return"hd-only"===c.videoQuality?b.hdmp4||b.mdmp4||b.mp4hq||b.iphone:!a.detect.iphone&&!a.detect.android&&((null!=(d=b.flv)?d.width:void 0)||0)>720&&b.mdmp4?b.mdmp4:a.detect.iphone||a.detect.android||!("md"===c.videoQuality||c.videoWidth&&c.videoWidth>=720)?b.mp4hq||b.iphone:b.mdmp4||b.mp4hq||b.iphone},b=function(a){return a.iphone},e=function(b,c){return b.hdmp4&&a.detect.retina?b.hdmp4:b.mdmp4&&a.detect.retina?b.mdmp4:b.mdmp4&&c.videoWidth&&c.videoWidth>=720?b.mdmp4:b.mp4hq&&b.mp4hq.width<=1280&&b.mp4hq.height<=720?b.mp4hq:b.iphone},a.extend({judy:{judge:function(f,g){var h,i,j,k,l;return h=f.assets,g=a.extend({},g),k=a.localStorage("platformPreference")||g.plea||g.platformPreference,i=g.force,!k&&!i&&(j="romulus"===f.platformPreference?"html5":g.playerPreference||f.playerPreference,"auto"===j?this.fullRomulusSupport(f)&&(k="romulus"):"flash"===j?k="flash":"html5"===j&&(this.baseRomulusSupport(f)?k="romulus":f.assets.iphone&&(k="html5"))),l={media:f,plea:i||k,uuid:g.uuid||a.seqId("wistia_"),asset:null,embedType:null},"romulus"===i?(l.embedType="romulus",l.asset=d(h,g)):"html5"===i?(l.embedType="html5",l.asset=d(h,g)):"flash"===i?(l.embedType="flash",l.asset=c(h,g)):"external"===i?(l.embedType="external",l.asset=b(h,g)):a.detect.iphone?(l.embedType="html5",l.asset=b(h,g)):a.detect.ipad?(l.embedType="html5",l.asset=e(h,g)):a.detect.oldandroid?this.isHttps()&&this.flashSupport()?(l.embedType="flash",l.asset=c(h,a.extend(g,{videoQuality:"sd-only"}))):(l.embedType="external",l.asset=b(h,g)):"romulus"===k&&this.baseRomulusSupport(f)?(l.embedType="romulus",l.asset=d(h,g)):"html5"===k&&this.h264Support()?(l.embedType="html5",l.asset=d(h,g)):"flash"===k&&this.flashSupport()?(l.embedType="flash",l.asset=c(h,g)):"external"===k?(l.embedType="external",l.asset=b(h,g)):this.flashSupport()?(l.embedType="flash",l.asset=c(h,g)):this.fullRomulusSupport(f)?(l.embedType="romulus",l.asset=d(h,g)):this.h264Support()?(l.embedType="html5",l.asset=d(h,g)):a.detect.browser.msie&&(a.detect.browser.version<9||a.detect.browser.quirks)||a.detect.browser.mozilla?(l.embedType="flash",l.asset=c(h,g)):(l.embedType="external",l.asset=b(h,g)),l},has2PassIphoneEncode:function(a){var b;return null!=(b=a.assets.iphone)?!!b["2pass"]:!1},isLessThan15Minutes:function(a){return a.duration<900},sdFlashIsScreencast:function(a){var b;return((null!=(b=a.assets.flv)?b.width:void 0)||0)>720},hasNoFlashHdAssets:function(a){return!a.assets.mdflv&&!a.assets.hdflv},hasGoodRomulusAssetsForSdOnly:function(a){return this.hasNoFlashHdAssets(a)&&this.isLessThan15Minutes(a)&&this.has2PassIphoneEncode(a)&&!this.sdFlashIsScreencast(a)},hasGoodRomulusAssetsForMd:function(a){return!!this.isLessThan15Minutes(a)&&!!a.assets.mdmp4},hasGoodRomulusAssets:function(a){return this.hasGoodRomulusAssetsForSdOnly(a)||this.hasGoodRomulusAssetsForMd(a)},baseRomulusSupport:function(b){return a.detect.romulusSupport&&b.assets.iphone},fullRomulusSupport:function(b){return a.detect.romulusSupport&&this.hasGoodRomulusAssets(b)&&this.fullscreenSupport()},h264Support:function(){return a.detect.video.h264},flashSupport:function(){return a.detect.flash.version>=9},fullscreenSupport:function(){return a._detect.fullscreenEnabled()},isHttps:function(){return"https:"===window.location.protocol}}})}(Wistia),function(a){a.extend({embed:function(b,c){var d,e,f,g,h;if(c||(c={}),c.videoObj?(g=c.videoObj,g.options=c,g.inferParams()):g=new a._embed.Video({},c),a.data(["video",g.uuid],g),"string"==typeof b?g._hashedId=b:g._hashedId=b.hashedId,d=a._embed.getContainer(b,c),!d)throw"Could not find container in DOM for "+b;return d.wistiaApi=g,g.container=d,g._startingWidth=a.elem.width(d),g._startingHeight=a.elem.height(d),g.grid=a.gridify(g.params,d),g._newStillLogic=!0,e=function(b){var e,f,h,i,j;if(a.data(["video",g.uuid]))return b.error?void(b.iframe?d.innerHTML="<iframe src='"+a.proto()+"//"+a.remote.embedHost()+"/embed/iframe/"+g.hashedId()+"' height='"+g.height()+"' width='"+g.width()+"' frameborder='0' scrolling='no'></iframe>":d.innerHTML="<div style='background:#fff;border:2px dashed #ddd;color:#aaa;font-family:Century Gothic,Arial;font-size:14px;text-align:center;width:"+g.width()+";height:"+g.height()+";'><div style='padding:20px;'>"+(b.message||b.error)+"</div></div>"):("v1"===c.version?e=g.options:(e=a.obj.clone(b.embed_options),delete e.stillUrl,a.obj.cast(e),a.obj.merge(e,g.options)),f=a.judy.judge(b,a.extend({},e,g.params,{videoWidth:g.videoWidth(),videoHeight:g.videoHeight()})),j=a._embed.classFor(f.embedType),i=new j(f,e),g._copyPropertiesFrom(i),h=a.plugin._scriptsFromVideo(g),a.plugin._execQueue(g,h,function(){return g.hasData(!0),g.container?(g.embed(),g.embedded(!0)):void 0}))},window.wistiaEmbeds&&wistiaEmbeds.bindHandles(),g.trigger("initembed"),g.options&&("function"==typeof(h=g.options).init&&h.init(g),g.options.hasData&&g.hasData(function(){return g.options.hasData(g)}),g.options.embedded&&g.embedded(function(){return g.options.embedded(g)}),g.options.ready&&g.ready(function(){return g.options.ready(g)})),"string"==typeof b?(f=b,a.remote.media(f,function(a){return e(a)})):a.timeout(""+g.uuid+".embed",function(){return e(b)},50),g},_embed:{getContainer:function(a,b){return"string"==typeof b.container?document.getElementById(b.container):"string"==typeof a?document.getElementById("wistia_"+a):(null!=a?a.media:void 0)?document.getElementById("wistia_"+a.media.hashedId):(null!=a?a.hashedId:void 0)?document.getElementById("wistia_"+a.hashedId):null},classFor:function(b){switch(b){case"romulus":return a._embed.RomulusVideo;case"html5":return a._embed.Html5Video;case"flash":return a._embed.FlashVideo;case"external":return a._embed.ExternalVideo;default:return a._embed.Video}}}})}(Wistia),function(a){return a.generate||(a.generate={}),a.generate.html=function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(/string|number|boolean/.test(typeof b))return b.toString();if(b instanceof Array){for(i="",m=0,o=b.length;o>m;m++)f=b[m],i+=a.generate.html(f);return i}if("object"!=typeof b)return b.toString();d=[];for(g in b)k=b[g],"tagName"===g?j=k:"childNodes"===g?e=k:d.push({key:g,val:k});for(j||(j="div"),i="<"+j,n=0,p=d.length;p>n;n++)c=d[n],"style"===c.key&&a.obj.isObject(c.val)&&(c.val=function(){var a,b;a=c.val,b=[];for(h in a)l=a[h],b.push(""+h.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+":"+l);return b}().join(";")+";"),i+=" "+c.key+'="'+c.val+'"';return/^(br|hr|img|link|meta|input)$/i.test(j)?i+=" />":(i+=">",e&&("string"==typeof e?i+=e:"object"==typeof e&&(i+=a.generate.html(e))),i+="</"+j+">"),i},a.generate.stillWidth=function(a){var b,c,d,e,f;for(b=[640,960,1280],a.masterStillWidth<1280&&b.push(a.masterStillWidth),f=b.sort(function(a,b){return a-b}),d=0,e=f.length;e>d;d++)if(c=f[d],a.videoWidth<=c)return c;return Math.max.apply(Math,b)},a.generate.stillUrl=function(b,c){var d,e,f,g,h;return null==c&&(c={}),c=a.obj.merge({aspect:b.assets.preview.width/b.assets.preview.height,stillUrl:b.assets.still.url,playButton:!1,playerColor:null!=(h=b.embed_options)?h.playerColor:void 0,videoWidth:640,videoHeight:360,stillSnap:!0},c),c.stillSnap?(f=a.generate.stillWidth({videoWidth:c.videoWidth,masterStillWidth:b.assets.still.width}),e=Math.round(f/c.aspect)):(f=c.videoWidth,e=c.videoHeight),d=a.url.parse(c.stillUrl),g=[a.constant.assetHost,a.constant.assetSslHost,a.constant.freeAssetHost,a.constant.freeAssetSslHost,"prime.wistia.com"],!d.host||g.join(",").indexOf(d.host)<0?c.stillUrl:(d.params.image_crop_resized=""+f+"x"+e,(null==c.playButton||c.playButton)&&(d.params.image_play_button=1,d.params.image_play_button_color=""+c.playerColor+"e0"),d.ext("jpg"),d.absolute())},a.generate.relativeBlockCss=function(a,b){return null==a&&(a="100%"),null==b&&(b="100%"),"display:inline-block;*display:inline;height:"+b+";margin:0;padding:0;position:relative;vertical-align:top;width:"+a+";zoom:1;"},a.generate.flashEmbedCode=function(b,c){return a.generate.html(a.generate.flashEmbedObject(b,c))},a.generate.flashEmbedObject=function(b,c){var d,e,f,g;return null==c&&(c={}),c=a.obj.merge({flashPlayerUrl:b.flashPlayerUrl,wmode:"opaque",uuid:c.uuid||a.seqId()},c),f={tagName:"object",id:c.uuid,classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",style:a.generate.relativeBlockCss()},"transparent"!==c.wmode&&(f.bgcolor="#000000"),e=a.generate.flashvars(b,c),g=[{tagName:"param",name:"movie",value:c.flashPlayerUrl},{tagName:"param",name:"allowfullscreen",value:"true"},{tagName:"param",name:"allowscriptaccess",value:"always"},{tagName:"param",name:"wmode",value:c.wmode},{tagName:"param",name:"flashvars",value:a.url.jsonToParams(e)}],d={tagName:"embed",src:c.flashPlayerUrl,name:c.uuid,type:"application/x-shockwave-flash",allowfullscreen:"true",allowscriptaccess:"always",wmode:c.wmode,flashvars:a.url.jsonToParams(e),style:a.generate.relativeBlockCss()},"transparent"!==c.wmode&&(d.bgcolor="#000000"),f.childNodes=g.concat(d),f},a.generate.flashvars=function(b,c){var d,e,f,g,h,i,j,k;null==c&&(c={}),f=a.judy.judge(b,a.obj.merge(c,{force:"flash"})),e={autoLoad:c.autoLoad,autoPlay:c.autoPlay&&!c.suppressPlay,banner:b.branding||c.branding?!0:null,chromeless:c.chromeless?!0:null,controlsVisibleOnLoad:c.controlsVisibleOnLoad?!0:!1,customColor:c.flashPlayerVersion>=2?c.playerColor:null,endVideoBehavior:c.endVideoBehavior,endVideoCallback:c.endVideoCallback?c.endVideoCallback:null,foreignData:c.foreignData,fullscreenDisabled:c.fullscreenButton===!1?!0:null,hdUrl:(null!=(h=b.assets)&&null!=(i=h.hdflv)?i.url:void 0)||(null!=(j=b.assets)&&null!=(k=j.mdflv)?k.url:void 0)||null,mediaDuration:b.duration,playButtonVisible:null!=c.playButton?c.playButton:!0,quality:a.detect.ps3&&!c.videoQuality?"sd-only":c.videoQuality,referrer:c.pageUrl,showAbout:null!=b.showAbout?b.showAbout:!0,showPlayButton:c.smallPlayButton===!1?!1:null,showPlaybar:c.playbar===!1?!1:null,showVolume:c.volumeControl?!0:!1,stillUrl:a.generate.stillUrl(b,a.obj.merge({},c,{playButton:!1})),allowSwitchToHtml5:a.detect.romulusSupport,trackingTransmitInterval:c.trackingTransmitInterval||b.trackingTransmitInterval||null,unbufferedSeek:/flv/i.test(f.asset.type),videoUrl:f.asset.url,wemail:c.trackEmail,wmode:c.wmode||"opaque"},a.detect.android&&(e.quality="sd-only"),c.shouldTrack&&!c.trackWithJs&&(e.embedServiceURL=c.distilleryUrl||b.distilleryUrl,e.accountKey=c.accountKey||b.accountKey,e.mediaID=c.mediaKey||b.mediaKey);for(d in e)g=e[d],null==g&&delete e[d];return e},a.generate.flashUrl=function(b,c){return""+b.flashPlayerUrl+"?"+a.url.jsonToParams(a.generate.flashvars(b,c))},a.generate.html5EmbedObject=function(b,c){var d,e,f,g;return null==c&&(c={}),c=a.obj.merge({uuid:c.uuid||a.seqId()},c),d=a.judy.judge(b,a.obj.merge(c,{force:"html5"})),g={id:""+c.uuid+"_html5_player",style:{background:"transparent",display:"block",height:"100%",position:"relative",width:"100%"}},f={tagName:"video",style:{background:"transparent",display:"block",height:"100%",position:"relative",width:"100%"},id:c.uuid,controls:"controls",preload:"none",poster:"//"+a.constant.embedHost+"/assets/images/blank.gif"},e={tagName:"source",src:d.asset.url.replace(/\.bin$/,"")+"/file.mp4",type:"video/mp4"},f.childNodes=[e],g.childNodes=[f],g},a.generate.html5EmbedElem=function(b,c){return null==c&&(c={}),a.elem.fromObject(a.generate.html5EmbedObject(b,c))},a.generate.html5ImgPosterObject=function(b,c){return null==c&&(c={}),c=a.obj.merge({uuid:c.uuid||a.seqId()},c),c.playButton=null!=c.playButton?c.playButton:!0,{tagName:"img",id:""+c.uuid+"_poster",className:"wistia_poster",src:a.generate.stillUrl(b,a.obj.merge(c,{playButton:!1})),style:{backgroundColor:"#000000",position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",cursor:"default"}}},a.generate.html5ImgPoster=function(b,c){return a.generate.html(a.generate.html5ImgPosterObject(b,c))},a.generate.html5DivPosterObject=function(b,c){return null==c&&(c={}),c=a.obj.merge({uuid:c.uuid||a.seqId()},c),c.playButton=null!=c.playButton?c.playButton:!0,{id:""+c.uuid+"_poster",className:"wistia_poster",style:{backgroundImage:"url('"+a.generate.stillUrl(b,a.obj.merge(c,{playButton:!1}))+"')",backgroundColor:"#000000",backgroundSize:"cover",backgroundPosition:"center center",position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",cursor:"default"}}},a.generate.html5DivPoster=function(b,c){return a.generate.html(a.generate.html5DivPosterObject(b,c))},a.generate.externalEmbedObject=function(b,c){var d,e,f;return null==c&&(c={}),e=a.judy.judge(b,a.obj.merge(c,{force:"external"})),c=a.obj.merge({uuid:c.uuid||a.seqId()},c),c.playButton=null!=c.playButton?c.playButton:!0,f={id:""+c.uuid+"_external_player",style:{background:"transparent",display:"block",height:"100%",position:"relative",width:"100%"}},d={tagName:"a",href:e.asset.url,id:c.uuid,target:"_parent",style:a.generate.relativeBlockCss()},f.childNodes=[d],f},a.generate.externalEmbedCode=function(b,c){return a.generate.html(a.generate.externalEmbedObject(b,c))},a.generate.romulusEmbedElem=function(b,c){return a.elem.fromObject(a.generate.romulusEmbedObject(b,c))},a.generate.romulusEmbedObject=function(b,c){var d,e,f,g;return c=a.obj.merge({uuid:c.uuid||a.seqId()},c),d=a.judy.judge(b,a.obj.merge(c,{force:"html5"})),g={id:""+c.uuid+"_romulus",style:{background:"transparent",display:"block",height:"100%",overflow:"hidden",position:"relative",width:"100%"}},f={tagName:"video",style:{background:"transparent",display:"block",height:"100%",position:"relative",width:"100%"},id:c.uuid,preload:"none",poster:"//"+a.constant.embedHost+"/assets/images/blank.gif"},"loop"===c.endVideoBehavior&&(f.loop="loop"),c.autoPlay&&(f.autoplay="autoplay"),e={tagName:"source",id:""+c.uuid+"_source",src:d.asset.url.replace(/\.bin$/,"")+"/file.mp4",type:"video/mp4"},f.childNodes=[e],g.childNodes=f,g},a.extend({generate:{video:function(b,c,d){switch(d=a.obj.merge({},c.params,d,{uuid:c.uuid,videoWidth:c.videoWidth(),videoHeight:c.videoHeight()}),b){case"flash":return a.generate.flashEmbedCode(c.data.media,d);case"html5":return a.generate.html5EmbedElem(c.data.media,d);case"romulus":return a.generate.romulusEmbedElem(c.data.media,d);case"external":return a.generate.externalEmbedCode(c.data.media,d);case"stillUrl":return a.generate.stillUrl(c.data.media,d);case"flashUrl":return a.generate.flashUrl(c.data.media,d)}}}})}(Wistia),function(a){var b;(null!=(b=a._embed)?b.Video:0)||(a._embed.Video=function(){function b(b,c){this.data=b,this.options=c,this.ready=new a.StopGo,this.hasData=new a.StopGo,this.embedded=new a.StopGo,this.notSeeking=new a.StopGo,this.notSeeking(!0),this.playing=new a.StopGo,this.notFullscreen=new a.StopGo,this.plugin||(this.plugin={}),this.plugins||(this.plugins={}),this.options.foreignData&&(this._foreignData=this.options.foreignData),this.inferParams(),this}return b.prototype.elem=function(){return null},b.prototype.inferParams=function(){var b,c,d,e,f,g,h,i;if(this.options.twitter&&(a.obj.get(this.options,"plugin.socialbar-v1")&&a.obj.set(this.options,"plugin.socialbar-v1.on",!1),a.obj.get(this.options,"plugin.transcript-v2")&&a.obj.set(this.options,"plugin.transcript-v2.on",!1)),this.params=a.extend(this.params||{},this.options),this.fullscreenContainer=this.container=a._embed.getContainer(this.data,this.options),this.options.platformPreference&&(this.params.plea=this.options.platformPreference),this.params.shouldTrack=!this.options.doNotTrack,null!=this.options.playButtonVisible&&(this.params.playButton=this.options.playButtonVisible),null!=this.params.rawEmbed?this.params.rawEmbed=a.obj.cast(this.params.rawEmbed):null!=this.options._inIframe?this.params.rawEmbed=!a.obj.cast(this.options._inIframe||!1):this.params.rawEmbed=!0,this.params.videoWidth&&(this.params.videoWidth=parseInt(this.params.videoWidth,10)),this.params.videoHeight&&(this.params.videoHeight=parseInt(this.params.videoHeight,10)),this.params.playerColor||(this.params.playerColor="636155"),this.params.seekThreshold=this.options.seekThreshold||1.5,this._foreignData&&(this.params.foreignData=this._foreignData),null!=this.options.trackWithJs?this.params.trackWithJs=this.options.trackWithJs:"html5"===this.embedType?this.params.trackWithJs=!0:"flash"===this.embedType&&(null!=(f=this.options.plugin)?f["requireEmail-v1"]:void 0)?this.params.trackWithJs=!0:this.params.trackWithJs=!1,(null!=(g=this.params.playerColor)?g.length:void 0)<6){for(c="",b=e=0,h=6-this.params.playerColor.length;h>=0?h>e:e>h;b=h>=0?++e:--e)c+="0";this.params.playerColor=c+this.params.playerColor}return this.params.playerColor=""+this.params.playerColor,a.obj.exists(this.data,"media.flashPlayerUrl")&&(this.params.flashPlayerVersion=parseFloat(this.data.media.flashPlayerUrl.match(/embed_player_v(\d+\.\d+)\.swf/)[1])),this.params.pageUrl=this.params.pageUrl||(null!=(i=window.FreshURL)?i.originalUrl:void 0)||location.href,!this.params.trackEmail&&this.params.shouldTrack&&(d=this.params.pageUrl.match(/wemail\=([^\&\#]+)/),d=d?d[1]:null,d&&(this.params.trackEmail=d)),this.params.uuid||(this.params.uuid=a.seqId()),this.uuid=this.params.uuid,null!=this.params.videoFoam&&this.videoFoam(this.params.videoFoam),null!=this.params.volume&&this.volume(this.params.volume),null!=this.params.time&&this.time(this.params.time),this},b.prototype.embed=function(){return this.embedAs(this.embedType)},b.prototype.monitor=function(){var b,c,d,e,f,g,h,i=this;c=function(){return i.params.rawEmbed&&a.detect.browser.old?a.grid.wrapperWidth(i):i.params.rawEmbed?a.elem.width(i.container):a.util.winWidth()},b=function(){return i.params.rawEmbed&&a.detect.browser.old?a.grid.wrapperHeight(i):i.params.rawEmbed?a.elem.height(i.container):a.util.winHeight()},g=this._startingWidth,e=this._startingHeight,f=this.width(),d=!1,h=function(){var j,k,l;if(!i._isDown&&i.isDown())i._isDown=!0,i._stateBeforeDown=i._lastState,"flash"!==i.embedType&&i.pause(),i.ready(!1),i.trigger("down");else if(i._isDown&&!i.isDown())return i._isDown=!1,i.ready(!1),i.elem()?("flash"===i.embedType?i.rebuild():(i.fit(),i.ready(!0),"playing"===i._stateBeforeDown&&i.play()),a.timeout(""+i.uuid+".monitor",h,500),i.trigger("up")):i.cleanupRefs(),void 0;!i.hasData()||i._isDown||i.isDown()||(i.container&&!i.container.parentNode?i.remove():i.params.rawEmbed&&i.videoFoam()?(k=a.elem.width(i.container.parentNode),f===k&&d||(d=!0,i.width(k,{constrain:!0}),f=k)):!i.params.dontMonitorSize&&("function"==typeof i.inFullscreen?!i.inFullscreen():!0)&&(l=c(),j=b(),g!==l&&(i.width(l),i.trigger("widthchange",l,g),g=l),e!==j&&(i.height(j),i.trigger("heightchange",j,e),e=j))),a.timeout(""+i.uuid+".monitor",h,500)},a.timeout(""+this.uuid+".monitor",h)},b.prototype.embedAs=function(b){return this.embedCode=a.generate.video(b,this,{suppressPlay:this.suppressPlay()}),this.placeEmbed(this.embedCode),this.monitor(),this},b.prototype.placeEmbed=function(b){var c,d,e,f,g,h=this;if(c=this.params.subContainer?this.container:(null!=(g=this.grid)?g.center:void 0)||this.container,"string"==typeof b)c.innerHTML=b;else if(c.innerHTML="",a.obj.isArray(b))for(e=0,f=b.length;f>e;e++)d=b[e],c.appendChild(d);else b&&c.appendChild(b);return this.embedded(function(){return"function"==typeof h.correctForIntegers?h.correctForIntegers():void 0}),this.ieSizeHack()},b.prototype._rebuildAs=function(a,b){var c;return null==b&&(b={}),this.ready(!1),this._stopStreaming(),this._wipeOutstandingAsyncFunctions(),this._resetStateVariables(),c=this._newSubclassFromSelf(a,b),this._copyPropertiesFrom(c),this.embed(this.container),this.fit(),this.trigger("afterrebuild"),this},b.prototype._stopStreaming=function(){},b.prototype._newSubclassFromSelf=function(b,c){var d,e,f;return d=a.extend({},this.options,c,{force:b}),e=a.judy.judge(this.data.media,d),new(f=a._embed.classFor(e.embedType))(e,d)},b.prototype._copyPropertiesFrom=function(a){var b,c,d,e;b={embedded:!0,hasData:!0,plugin:!0,ready:!0,playing:!0,notFullscreen:!0,notSeeking:!0,uuid:!0},e=[];for(c in a)d=a[c],e.push(b[c]?void 0:this[c]=d);return e},b.prototype._wipeOutstandingAsyncFunctions=function(){return a.clearTimeouts(this.uuid)},b.prototype._resetStateVariables=function(){return this._lastTimePosition=-1,this._lastState="beforeplay",this._streamSet=!1,this._issuedPlay=!1,"function"==typeof this.playing?this.playing(!1):void 0},b.prototype.rebuild=function(a){return null==a&&(a={}),this._rebuildAs(this.embedType,a),this.reinitializePlugins(),this},b.prototype.rebuildWithoutPlugins=function(a){return null==a&&(a={}),this._rebuildAs(this.embedType,a)},b.prototype.rebuildAs=function(a,b){return this._rebuildAs(a,b),this.reinitializePlugins(),this},b.prototype.replace=function(b,c){var d,e;return this.trigger("beforeremove"),c.container=this.container.id,e=this.uuid,this.ready(!1),d=a.judy.judge(b,c),this.data.media={},this.data=a.extend({},this.data,d),this.options=c,this.params={},this.inferParams(),this.uuid=this.data.uuid=e,"flash"===this.embedType&&(this._lastState="beforeplay"),this.embed(),this},b.prototype.fit=function(){a.detect.browser.old&&(this.container.style.width=""+this.params.videoWidth+"px",this.container.style.height=""+this.params.videoHeight+"px"),this.params.dontFit||(this.grid.wrapper.style.height=""+a.elem.height(this.container)+"px",this.grid.wrapper.style.width=""+a.elem.width(this.container)+"px"),a.grid.fitVertical(this),a.grid.fitHorizontal(this),this.ieSizeHack(),"function"==typeof this.correctForIntegers&&this.correctForIntegers()},b.prototype.reinitializePlugins=function(){var b,c,d,e;c=a.extend({},this.plugins),e=this.plugins;for(d in e)b=e[d],b.remove();for(d in c)b=c[d],b.init(this,a.extend({},b.options,{uuid:b.uuid}))},b.prototype.isDown=function(){return!this.container||!a.elem.inDom(this.container)||a.elem.isHidden(this.container)},b.prototype._removeContent=function(){return this.container?a.elem.remove(this.container.childNodes):void 0},b.prototype.remove=function(){var a,b,c;this.trigger("beforeremove"),c=this.plugin;for(b in c)a=c[b],null!=a&&"function"==typeof a.remove&&a.remove();this.hasData(!1),this.ready(!1),this.embedded(!1),this._stopStreaming(),this.container.innerHTML="",this.trigger("down"),this.trigger("afterremove"),this._wipeOutstandingAsyncFunctions(),this._bindings={},this.ready.setQueue([]),this.hasData.setQueue([]),this.cleanupRefs()},b.prototype.cleanupRefs=function(){return a.removeData(["video",this.uuid])},b.prototype._baseEventLoopDuration=300,b.prototype._eventLoopDuration=300,b.prototype.play=function(){var a=this;return this.ready(function(){return a.play()}),this},b.prototype.suppressPlay=function(a){return null!=a?this._suppressPlay=!!a:this._suppressPlay},b.prototype.videoFoam=function(a){return null!=a?this._videoFoam=!!a:this._videoFoam},b.prototype.pause=function(){var a=this;return this.ready(function(){return a.pause()}),this},b.prototype.time=function(a){var b=this;return null!=a?(this.ready(function(){return b.time(a)}),this):0},b.prototype.state=function(){return"beforeplay"},b.prototype.duration=function(){var a,b;return(null!=(a=this.data)&&null!=(b=a.media)?b.duration:void 0)||null},b.prototype.volume=function(a){var b=this;return null!=a?this.ready(function(){return b.volume(a)}):0},b.prototype.name=function(){return a.obj.get(this,"data.media.name")||""},b.prototype.hashedId=function(){return a.obj.get(this,"data.media.hashedId")||this._hashedId||""},b.prototype.bigPlayButtonEnabled=function(){return this},b.prototype.smallPlayButtonEnabled=function(){return this},b.prototype.playbarControlEnabled=function(){return this},b.prototype.volumeControlEnabled=function(){return this},b.prototype.fullscreenButtonEnabled=function(){return this},b.prototype.setPlayerColor=function(a){return this.playerColor(a),this},b.prototype.playerColor=function(a){return null!=a?this.options.playerColor=this.params.playerColor=a:this.params.playerColor,this},b.prototype.playbackRate=function(a){return null!=a?this:1},b.prototype.width=function(b,c){var d,e,f,g,h;return null==c&&(c={}),null!=b?(b=parseInt(b,10),d=this.width(),this.grid.wrapper.style.width=""+b+"px",c.dontChangeContainer||(this.container.style.width=""+b+"px"),this.grid.center.style.width="100%","flash"===this.embedType&&(this.elem().style.width="100%"),this.params.dontFit?(this.grid.main.style.width=""+(b-a.elem.width(this.grid.left)-a.elem.width(this.grid.right))+"px",this.grid.main.style.marginLeft=""+a.elem.width(this.grid.left)+"px"):(a.grid.fitHorizontal(this),a.grid.fitVertical(this)),(a.detect.iphone||a.detect.ipad)&&"beforeplay"===this.state()&&null!=(f=this.elem())&&(f.style.width="1px"),b!==d&&this.trigger("widthchange",b,d),c.constrain&&this.constrainToWidth(),"function"==typeof this.correctForIntegers&&this.correctForIntegers(),this):(a.detect.browser.old&&null!=(g=this.elem())&&(g.style.position="absolute"),
e=a.elem.width(this.grid.left)+a.elem.width(this.grid.center)+a.elem.width(this.grid.right),a.detect.browser.old&&null!=(h=this.elem())&&(h.style.position="static"),e)},b.prototype.height=function(b,c){var d,e,f,g;return null==c&&(c={}),null!=b?(b=parseInt(b,10),d=this.height(),this.grid.wrapper.style.height=""+b+"px",c.dontChangeContainer||(this.container.style.height=""+b+"px"),this.grid.center.style.height="100%","flash"===this.embedType&&(this.elem().style.height="100%"),this.params.dontFit?(this.grid.main.style.height=""+(b-a.elem.height(this.grid.above)-a.elem.height(this.grid.below))+"px",this.grid.main.style.marginTop=""+a.elem.height(this.grid.top)+"px"):(a.grid.fitHorizontal(this),a.grid.fitVertical(this)),this.trigger("heightchange",b),c.constrain&&this.constrainToHeight(),"function"==typeof this.correctForIntegers&&this.correctForIntegers(),this):(a.detect.browser.old&&null!=(f=this.elem())&&(f.style.position="absolute"),e=a.elem.height(this.grid.center)+Math.max(a.elem.height(this.grid.above),a.elem.height(this.grid.top))+Math.max(a.elem.height(this.grid.below),a.elem.height(this.grid.bottom)),a.detect.browser.old&&null!=(g=this.elem())&&(g.style.position="static"),e)},b.prototype.videoWidth=function(b,c){var d,e,f,g,h,i;return null==c&&(c={}),null!=b?(b=parseInt(b,10),e=this.width(),this.grid.center.style.width="100%",this.grid.main.style.width=""+b+"px",d=a.elem.width(this.grid.left)+a.elem.width(this.grid.right),this.grid.wrapper.style.width=""+(b+d)+"px",c.dontChangeContainer||(this.container.style.width=""+(b+d)+"px"),a.grid.fitHorizontal(this),a.grid.fitVertical(this),(a.detect.iphone||a.detect.ipad)&&"beforeplay"===this.state()&&null!=(g=this.elem())&&(g.style.width="1px"),this.width()!==e&&this.trigger("widthchange",b,e),c.constrain&&this.constrainToWidth(),"function"==typeof this.correctForIntegers&&this.correctForIntegers(),this):(a.detect.browser.old&&this.elem&&null!=(h=this.elem())&&(h.style.position="absolute"),f=a.elem.width(this.grid.center),a.detect.browser.old&&this.elem&&null!=(i=this.elem())&&(i.style.position="static"),f)},b.prototype.videoHeight=function(b,c){var d,e,f,g,h,i,j;return null==c&&(c={}),null!=b?(b=parseInt(b,10),f=this.height(),this.grid.main.style.height=""+b+"px",this.grid.center.style.height="100%",this.grid.main.style.height=""+b+"px",a.detect.browser.ltie8&&a.grid.zeroEmptySections(this),h=Math.max(a.elem.height(this.grid.above),a.elem.height(this.grid.top)),d=Math.max(a.elem.height(this.grid.below),a.elem.height(this.grid.bottom)),e=h+d,this.grid.wrapper.style.height=""+(b+e)+"px",c.dontChangeContainer||(this.container.style.height=""+(b+e)+"px"),a.grid.fitHorizontal(this),a.grid.fitVertical(this),this.height()!==f&&this.trigger("heightchange",b,f),c.constrain&&this.constrainToHeight(),"function"==typeof this.correctForIntegers&&this.correctForIntegers(),this):(a.detect.browser.old&&this.elem&&null!=(i=this.elem())&&(i.style.position="absolute"),g=a.elem.height(this.grid.center),a.detect.browser.old&&this.elem&&null!=(j=this.elem())&&(j.style.position="static"),g)},b.prototype.constrainToHeight=function(){return this.videoWidth(Math.round(this.videoHeight()*this.aspect()))},b.prototype.constrainToWidth=function(){return this.videoHeight(Math.round(this.videoWidth()/this.aspect()))},b.prototype.aspect=function(){var a;return this.params.aspect?this.params.aspect:(null!=(a=this.data.media)?a.assets.flv:void 0)?this.data.media.assets.flv.width/this.data.media.assets.flv.height:this.data.asset.width/this.data.asset.height},b.prototype.addPlugin=function(b,c){return null==c&&(c={}),this.hasPlugin(b)||a.plugin._inject(this,b,c),this},b.prototype.hasPlugin=function(a){return!!this.plugin[a]},b.prototype.ieSizeHack=function(){a.detect.browser.msie&&("function"==typeof this.elem?this.elem():void 0)&&(this.elem().offsetLeft%2===0?this.elem().style.width=""+(this.videoWidth()+1)+"px":this.elem().style.width="100%")},b.prototype.setEmail=function(a){return this.email(a)},b.prototype.email=function(a){return void 0===a?this.params.trackEmail||null:(this.params.trackEmail=a,this.trigger("emailchange",a))},b.prototype.visitorKey=function(){var a;return(null!=(a=this.tracker)?a.visitorKey():void 0)||null},b.prototype.eventKey=function(){var a;return(null!=(a=this.tracker)?a.eventKey():void 0)||null},b.prototype.foreignData=function(b){var c;if(void 0===b)return this.params.foreignData||this._foreignData||null;if(null===b)return this.params.foreignData=null,this._foreignData=null,this.trigger("foreigndatachange",b);if(!a.obj.isObject(b))throw"foreignData can only be an Object";return b=a.obj.clone(b),this.params.foreignData=b,this._foreignData=b,null!=(c=this.tracker)&&c.transmit({force:!0}),this.trigger("foreigndatachange",b)},b.prototype.savePlatformPreference=function(b){return a.localStorage("platformPreference",b)},b.prototype.getVisitorKey=function(){return this.visitorKey()},b.prototype.getEventKey=function(){return this.eventKey()},b.prototype.judyReport=function(){var b,c,d,e,f;for(c="        has2PassIphoneEncode        isLessThan15Minutes        sdFlashIsScreencast        hasNoFlashHdAssets        hasGoodRomulusAssetsForSdOnly        hasGoodRomulusAssetsForMd        hasGoodRomulusAssets        baseRomulusSupport        fullRomulusSupport        h264Support        flashSupport        fullscreenSupport        ",f=c.split(/[\s\n]+/),d=0,e=f.length;e>d;d++)b=f[d],b&&console.log(b,a.judy[b](this.data.media));return this},b}(),a.mixin(a._embed.Video.prototype,a.bindable))}(Wistia),function(a){return a.Html5BigPlayButton?void 0:a.Html5BigPlayButton=function(){function b(b){var c=this;this.video=b,this.name="bigPlayButton",this.uuid=a.seqId("wistia_"+this.name+"_"),this.elem=document.createElement("div"),this.elem.id=this.uuid,a.elem.append(this.video.chromeElem(),this.elem),a.elem.bind(this.elem,"mouseover",function(a){return"function"==typeof c.mouseover?c.mouseover(a):void 0}),a.elem.bind(this.elem,"mouseout",function(a){return"function"==typeof c.mouseout?c.mouseout(a):void 0}),"function"==typeof this.setupBindings&&this.setupBindings(),a.elem.style(this.elem,{cursor:"pointer",display:"none",position:"absolute",background:""+this.primaryColor().alpha(.8).toRgba()+" url("+this.bigIconBase64()+") no-repeat center center",height:""+this.height()+"px",width:""+this.width()+"px",display:"none",zIndex:1})}return b.prototype.initialize=function(){return!this.video.params.chromeless&&a.util.notSetOrTrue(this.video.params.playButton)&&this.turnOn(),this},b.prototype.setupBindings=function(){var b=this;return this.video.bind("play",function(){return b.hide()}),a.elem.bind(this.video.chromeElem(),"click",function(c){var d;if(3!==c.which)return a.elem.isInside(c.target,b.elem)&&(null!=(d=b.video.elem())&&(d.style.width="100%"),b.video.play()),!0}),this.video._swiped=!1,a.elem.bind(this.elem,"touchstart",function(){var a;return b.video._swiped=!1,null!=(a=b.video.still)&&a.touch(),!0}),a.elem.bind(this.elem,"touchmove",function(){return b.video._swiped=!0,!0}),a.elem.bind(this.elem,"touchend",function(){var c;return!b.video._swiped&&a.elem.isInside(event.target,b.elem)&&(null!=(c=b.video.elem())&&(c.style.width="100%"),b.video.play()),b.video._swiped=!1,!0}),this.video.bind("widthchange",function(){return b.reorient()}),this.video.bind("heightchange",function(){return b.reorient()})},b.prototype.mouseover=function(){return this.elem.style.backgroundColor=this.tertiaryColor().alpha(.8).toRgba()},b.prototype.mouseout=function(){return this.elem.style.backgroundColor=this.primaryColor().alpha(.8).toRgba()},b.prototype.turnOn=function(){return this._on=!0,this.show()},b.prototype.turnOff=function(){return this._on=!1,this.hide()},b.prototype.on=function(){return this._on},b.prototype.off=function(){return!this._on},b.prototype.shouldShrink=function(){return this.video.videoWidth()<=320||this.video.videoHeight()<=200},b.prototype.width=function(){return this.shouldShrink()?60:127},b.prototype.height=function(){return this.shouldShrink()?38:81},b.prototype.turnOn=function(){return this._on=!0,this.show(),this.video.trigger("control-on",this.name)},b.prototype.show=function(){return this.on()&&"beforeplay"===this.video.state()?(this.elem.style.display="block",this.reorient()):void 0},b.prototype.hide=function(){return this.elem.style.display="none"},b.prototype.reorient=function(){return this.shouldShrink()?this.elem.style.backgroundImage="url("+this.smallIconBase64()+")":this.elem.style.backgroundImage="url("+this.bigIconBase64()+")",this.elem.style.width=""+this.width()+"px",this.elem.style.height=""+this.height()+"px",this.center()},b.prototype.center=function(){var a,b,c;return c=this.video.videoHeight(),this.video.params.controlsVisibleOnLoad&&(c-=22),a=Math.round((this.video.videoWidth()-this.width())/2),b=Math.round((c-this.height())/2),this.elem.style.left=""+a+"px",this.elem.style.top=""+b+"px"},b.prototype.bigIconBase64=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH8AAABRCAYAAAD7G3lVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATFJREFUeNrs22FtwkAYx+F2QcAkMAfgYBKQwBxMQh1MwiRQB+CgEoaDzkG5S1a+E5IF+n+e5D4ve3+7N0s4mgYAAAAAAAAAAAAA7jFN06cp5MavjuWsTSMzfjWWszORzPizQzmvJpMZ3xYIj28LiG8LpMeffdsCufGrn3LeTS0z/uzLFsiNbwuEx7cFxL9ugY1pZsafdSaaG78abIHc+LaA+MvbAi/+XG5Sww9L2QLtEm/+P/2oUzkfbduexc+LX51L/DdrP09fzvaZf4GVhjf7/Vv3vVFk/bfvMUhg/PoAZG+6efE9Aw+MP/oCSGZ8tz0wvtseGn9w2zPjdyaXF99n9aHx3fbA+G57aHy3PTC+N/mh8b3DD4zvtofGd9tD47vtAAAAAAAAAAAAADymiwADAOSj1JBfF8xMAAAAAElFTkSuQmCC"},b.prototype.smallIconBase64=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAmCAYAAACYsfiPAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJNJREFUeNrs1ksNhEAURNGWgAQkjAQkIAUJ7QApIwEJSEACEh6PBatJhmZJ1T1JCahU+lMKAACAioj4Zjqnwqc9MzoVvszya8evLTM4FdZeO/7TWzva6Kwd7dbMx6nwpboV3l99rh+WXV5/lh+sOrlcWueqvcOzpLNqQ2GtVW8KT0WZ3MeisXAtLixWBQAAQDoEGACTzSwy3SX7YgAAAABJRU5ErkJggg=="},b.prototype.updateColor=function(){return this.elem.style.backgroundColor=this.primaryColor().alpha(.8).toRgba()},b.prototype.primaryColor=function(){return new a.Color(this.video.params.playerColor)},b.prototype.tertiaryColor=function(){return this.primaryColor().lighten(40)},b}()}(Wistia),function(a){return a.Html5Still?void 0:a.Html5Still=function(){function b(b){var c,d,e=this;this.video=b,this.name="still",this.uuid=a.seqId("wistia_"+this.name+"_"),this.elem=document.createElement("div"),this.elem.id=this.uuid,a.elem.append(this.video.chromeElem(),this.elem),this.elem.style.cursor="pointer",a.elem.bind(this.elem,"mouseover",function(a){return"function"==typeof e.mouseover?e.mouseover(a):void 0}),a.elem.bind(this.elem,"mouseout",function(a){return"function"==typeof e.mouseout?e.mouseout(a):void 0}),this.loaded=new a.StopGo,"function"==typeof this.setupBindings&&this.setupBindings(),a.elem.style(this.elem,{cursor:"default",height:"100%",left:"0px",overflow:"hidden",position:"absolute",top:"0px",width:"100%",zIndex:1}),c=a.obj.merge({},this.video.options,{playButton:!1,videoHeight:this.video.videoHeight(),videoWidth:this.video.videoWidth()}),d=a.generate.stillUrl(this.video.data.media,c),this.img=new Image,a.elem.style(this.img,{border:"0",display:"inline-block","float":"none",margin:"0px",padding:"0px",height:"100%",verticalAlign:"top",width:"100%"}),this._finishImgLoad=function(){return a.clearTimeouts(""+e.video.uuid+".long_still_load"),a.elem.append(e.elem,e.img),e.loaded(!0)},a.elem.bind(this.img,"load",this._finishImgLoad),a.elem.bind(this.img,"error",this._finishImgLoad),a.timeout(""+this.video.uuid+".long_still_load",this._finishImgLoad,1e3),this.img.src=d,a.elem.bind(this.img,"mousedown",function(a){return a.preventDefault()})}return b.prototype.initialize=function(){return this.fitStill(),this},b.prototype.setupBindings=function(){var b=this;return a.elem.bind(this.video.elem(),"playing",function(){return b.hide()}),this.video.bind("startplay",function(){return b.hide()}),a.elem.bind(this.video.chromeElem(),"click",function(c){var d;if(1===c.which)return a.elem.isInside(c.target,b.elem)&&(null!=(d=b.video.elem())&&(d.style.width="100%"),b.video.play()),!0}),a.elem.bind(this.elem,"touchstart",function(){return b.video._swiped=!1,b.touch(),!0}),a.elem.bind(this.elem,"touchmove",function(){return b.cancelTouch(),b.video._swiped=!0,!0}),a.elem.bind(this.elem,"touchend",function(){var c;return a.timeout(""+b.video.uuid+".cancel_touch",function(){return b.cancelTouch()},400),!b.video._swiped&&a.elem.isInside(event.target,b.elem)&&(null!=(c=b.video.elem())&&(c.style.width="100%"),b.video.play()),b.video._swiped=!1,!0}),a.elem.bind(this.elem,"mousedown",function(){return b.touch(),!0}),a.elem.bind(this.elem,"mouseup",function(){return a.timeout(""+b.video.uuid+".cancel_touch",function(){return b.cancelTouch()},400),!0}),this.video.bind("widthchange",function(){return b.fitStill()}),this.video.bind("heightchange",function(){return b.fitStill()}),this.video.bind("end",function(){var c;return b.show(),b.video.hasPostRoll&&(a.detect.iphone||a.detect.ipad)?(null!=(c=b.video.elem())&&(c.style.width="1px"),b.video.rebuild()):void 0})},b.prototype.fitStill=function(){var a,b,c,d,e,f,g,h,i,j,k,l;return this.video.params.stillSnap===!1?(f=this.video.videoWidth(),e=this.video.videoHeight()):(c=this.video.videoWidth()/this.video.videoHeight(),c>this.video.aspect()?(e=this.video.videoHeight(),f=Math.round(e*this.video.aspect())):c<=this.video.aspect()&&(f=this.video.videoWidth(),e=Math.round(f/this.video.aspect()))),l=Math.max(0,this.video.videoHeight()-e),j=Math.max(0,this.video.videoWidth()-f),k=Math.round(l/2),i=Math.round(j/2),h=b=k,d=g=i,1===b&&(b=0,h=0,e=this.video.videoHeight()),1===d&&(d=0,g=0,f=this.video.videoWidth()),a="transparent"===this.video.params.wmode?"transparent":"#000",this.img.style.height=""+e+"px",this.img.style.width=""+f+"px",this.img.style.borderTop=""+h+"px solid "+a,this.img.style.borderBottom=""+b+"px solid "+a,this.img.style.borderLeft=""+d+"px solid "+a,this.img.style.borderRight=""+g+"px solid "+a},b.prototype.shouldShow=function(){return"beforeplay"===this.video.state()},b.prototype.show=function(){return this.elem.style.display="block",this.fitStill()},b.prototype.hide=function(){return this.elem.style.display="none"},b.prototype.touch=function(){var b=this;return a.elem.style(this.img,"opacity",.5),a.timeout(""+this.video.uuid+".cancel_touch",function(){return b.cancelTouch()},2e3)},b.prototype.cancelTouch=function(){return a.elem.style(this.img,"opacity","")},b.prototype.mouseover=function(){},b.prototype.mouseout=function(){},b}()}(Wistia);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){var b;(null!=(b=a._embed)?b.FlashVideo:0)||(a._embed.FlashVideo=function(b){function c(){c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.embedType="flash",c.prototype.elem=function(){return document[this.uuid]},c.prototype.embed=function(){var b,d=this;return c.__super__.embed.apply(this,arguments),null==this._switchToHtml5&&(this._switchToHtml5=function(){return a.timeout(""+d.uuid+".delayed_rebuild_as_html5",function(){return d.savePlatformPreference("romulus"),d.rebuildAs("romulus"),d.trigger("widthchange"),d.trigger("heightchange")})}),a.unbind("switch-to-html5",this._switchToHtml5),a.bind("switch-to-html5",this._switchToHtml5),this.elem().wistiaApi=this,this._lastTimePosition=-1,this._lastVolume=null,this._lastState="beforeplay",b=function(c){var e;null==c&&(c=0),c>=25||(d.elem()&&d._allFuncsUp()?a.timeout(""+d.uuid+".ready_delay",function(){return d.tracker||(d.tracker=a.tracker(d)),d.ready(!0),d.params.trackWithJs&&d.tracker.monitor(),d.listenForEvents()},200):(e=d,a.timeout(""+d.uuid+".ready_check",function(){return b.call(e,c+1)},Math.max(1e3,50+75*c))))},b(),this},c.prototype._allFuncsUp=function(){var a,b,c,d;for(d=["getCurrentTime","getCurrentState","videoPlay","videoSeek","getVolume","setVolume","setEmail"],b=0,c=d.length;c>b;b++)if(a=d[b],!this.elem()[a])return!1;return!0},c.prototype.listenForEvents=function(){var b=this;this._fireIfChanged=function(){var c,d,e;a.timeout(""+b.uuid+".fire_if_changed",function(){return b._fireIfChanged()},b._eventLoopDuration),!b._isDown&&b.elem()&&b._allFuncsUp()&&(c=b.state(),d=b.time(),e=b.volume(),c!==b._lastState&&(b.trigger("statechange",c),"playing"===c?b.trigger("play"):"paused"===c?b.trigger("pause"):"ended"===c?b.trigger("end"):"playing"===b._lastState&&"beforeplay"===c&&"reset"===b.params.endVideoBehavior&&b.trigger("end")),e!==b._lastVolume&&(b.trigger("volumechange",e),b._lastVolume=e),d!==b._lastTimePosition&&d>0&&(b.trigger("timechange",d),Math.floor(d)!==Math.floor(b._lastTimePosition)&&b.trigger("secondchange",Math.floor(d)),Math.abs(d-b._lastTimePosition)>b.params.seekThreshold&&b.trigger("seek",d,b._lastTimePosition),b._lastTimePosition=d),b._lastState=c)},this._fireIfChanged()},c.prototype.play=function(){var a=this;return this.suppressPlay()?this:(this.ready(function(){var b;return b=function(){return a.elem().videoPlay(),a.unbind},a._seeking?a.bind("play-seek",b):b()}),this)},c.prototype.pause=function(){var a=this;return this.ready(function(){var b;return b=function(){return a.elem().videoPause(),a.unbind},a._seeking?a.bind("play-seek",b):b()}),this},c.prototype.time=function(a){var b,c=this;if(null!=a)return this.suppressPlay()?this:(this.ready(function(){var b,d,e;return e=c.state(),c._streamSet&&"beforeplay"!==e&&"ended"!==e?(c.elem().videoSeek(a),"paused"===e||"ended"===e?c.pause():void 0):(c._seeking=!0,c.elem().videoPlay(),d=c,b=function(){return c._streamSet=!0,c.elem().videoSeek(a),c._seeking=!1,c.trigger("play-seek",a),c.unbind},"playing"!==e&&c.pause(),c.bind("timechange",b))}),this);try{return this.elem().getCurrentTime()||0}catch(d){return b=d,-1}},c.prototype.state=function(){var a;try{switch(this.elem().getCurrentState()){case 0:return"ended";case 1:return"playing";case 2:return"paused";default:return"beforeplay"}}catch(b){return a=b,"beforeplay"}},c.prototype.volume=function(a){var b,c=this;if(null!=a)return this.ready(function(){var b;return b=c.volume(),c.elem().setVolume(Math.min(Math.round(100*a),100)),b!==c.volume()?c.trigger("volumechange",c.volume(),b):void 0}),this;try{return b=this.elem().getVolume(),b>0&&(b/=100),b}catch(d){return 1}},c.prototype.visitorKey=function(){var a;try{return this.elem().getVisitorKey()}catch(b){return a=b,null}},c.prototype.getVisitorKey=function(){return this.visitorKey()},c.prototype.eventKey=function(){var a;try{return this.elem().getEventKey()}catch(b){return a=b,null}},c.prototype.getEventKey=function(){return this.eventKey()},c.prototype.controlEnabled=function(a,b){return null!=b?this.elem()[""+a+"Enabled"](b):this.elem()[""+a+"Enabled"]()},c.prototype.bigPlayButtonEnabled=function(a){return this.controlEnabled("bigPlayButton",a),this},c.prototype.smallPlayButtonEnabled=function(a){return this.controlEnabled("playButton",a),this},c.prototype.playbarControlEnabled=function(a){return this.controlEnabled("playbar",a),this},c.prototype.volumeControlEnabled=function(a){return this.controlEnabled("volumeControl",a),this},c.prototype.fullscreenButtonEnabled=function(a){return this.controlEnabled("fullscreenButton",a),this},c.prototype.setPlayerColor=function(a){return this.playerColor(a)},c.prototype.playerColor=function(a){var b=this;return a?(this.options.playerColor=this.params.playerColor=a,this.params.flashPlayerVersion>=2&&this.ready(function(){return b.elem().changeColor(a)}),this):this.params.playerColor},c.prototype.setEmail=function(a){return this.email(a)},c.prototype.email=function(a){var b,d=this;return null!=a?(b=c.__super__.email.call(this,a),this.ready(function(){return d.elem().setEmail(a)}),b):c.__super__.email.apply(this,arguments)},c}(a._embed.Video))}(Wistia);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){var b,c;if(null!=(b=a._embed)?!b.Html5Video:!0)return a._embed.Html5Video=function(b){function d(){return c=d.__super__.constructor.apply(this,arguments)}return __extends(d,b),d.prototype.embedType="html5",d.prototype.elem=function(){return document.getElementById(this.uuid)},d.prototype.chromeElem=function(){return document.getElementById(""+this.uuid+"_html5_player")},d.prototype.embed=function(){var b=this;return this.tracker||(this.tracker=a.tracker(this)),this.ready(function(){b.isDown()?b.bind("up",function(){return b.tracker.initialize(),b.unbind}):b.tracker.initialize()}),this.embedHtml5(),(a.detect.ipad||a.detect.iphone)&&this.bind("end",function(){var c;b.hasPostRoll?(c=b.params.suppressAutoplay,b.params.suppressAutoplay=!0,b.embedHtml5(),b.params.suppressAutoplay=c):(a.detect.iphone||a.detect.ipad)&&(b.elem().style.width="1px")}),this},d.prototype.fit=function(){var a=this;return d.__super__.fit.apply(this,arguments),this.embedded(function(){var b,c;return null!=(b=a.still)&&b.fitStill(),null!=(c=a.bigPlayButton)?c.reorient():void 0})},d.prototype.replace=function(b,c){var d,e,f,g,h,i=this;return this.trigger("beforeremove"),a.clearTimeouts(this.uuid),c.container=this.container.id,f=this.uuid,e=a.judy.judge(b,c),this.data.media={},this.data=a.extend({},this.data,e),this.options=c,this.inferParams(),this.uuid=this.data.uuid=f,this.playerColor(this.params.playerColor),d=a.generate.video("stillUrl",this,{playButton:!1}),this.ready(function(){var b,c,e;return b=/mp4hq|hdmp4|iphone/.test(i.data.asset.type)?i.data.asset:i.data.media.assets.mp4hq||i.data.media.assets.iphone,null!=(c=i.still.img)&&(c.src=d),i.still.show(),i.elem().src=i.elem().childNodes[0].src=b.url.replace(/\.bin$/,"/file.mp4"),null!=(e=i.tracker)&&e.stopMonitoring(),i.tracker=a.tracker(i),i.params.shouldTrack&&i.tracker.monitor(),i.params.autoPlay&&!i.suppressPlay()?(i.elem().load(),i.elem().addEventListener("loadeddata",function(){return i.elem().style.width="100%",i.play()})):void 0}),null!=(g=this.bigPlayButton)&&g.updateColor(),null!=(h=this.bigPlayButton)&&h.show(),a.timeout(""+this.uuid+".unfullscreen_if_preroll",function(){return i.hasPreRoll?i.embed():void 0}),this},d.prototype._stopStreaming=function(){var a,b;return null!=(a=this.elem())&&(a.src=""),null!=(b=this.elem())?b.load():void 0},d.prototype.embedHtml5=function(){var b=this;return this._lastTimePosition=-1,this._lastState="beforeplay",this._hasPlayed=!1,this.ready(!1),this.embedAs("external"),this.embedAs("html5"),this.still=new a.Html5Still(this).initialize(),"transparent"!==this.params.wmode&&this.still.loaded(function(){var a;return null!=(a=b.chromeElem())?a.style.backgroundColor="#000":void 0}),this.bigPlayButton=new a.Html5BigPlayButton(this).initialize(),this.elem().wistiaApi=this,this.params.shouldTrack&&this.ready(function(){return b.isDown()?b.bind("up",function(){return b.tracker.monitor(),b.unbind}):b.tracker.monitor()}),(a.detect.iphone||a.detect.ipad)&&(this.elem().style.width="1px"),a.elem.bind(this.elem(),"playing",function(){return b._hasPlayed=!0,b.trigger("play")}),a.elem.bind(this.elem(),"pause",function(){return b.trigger("pause")}),a.elem.bind(this.elem(),"ended",function(){return b.trigger("end")}),this.elem().addEventListener("volumechange",function(){return b.trigger("volumechange",b.volume())}),this.listenForEvents(),this.isDown()||(a.detect.iphone||a.detect.ipad?this.ready(!0):a.timeout(""+this.uuid+".delayed_ready",function(){return b.ready(!0)})),this.canAutoPlay()?this.play():void 0},d.prototype.canAutoPlay=function(){return this.params.autoPlay&&!this.suppressPlay()&&(!this.params._inIframe||!a.detect.iphone&&!a.detect.ipad)},d.prototype.listenForEvents=function(){var b=this;this._bindings||(this._bindings={}),this._fireIfChanged=function(){var c,d;a.timeout(""+b.uuid+".fire_if_changed",function(){return b._fireIfChanged()},b._eventLoopDuration),b.isDown()||(c=b.state(),c!==b._lastState&&(b.trigger("statechange",c),b._lastState=c),(d=b.time())!==b._lastTimePosition&&d>0&&(b.trigger("timechange",d),Math.floor(d)!==Math.floor(b._lastTimePosition)&&b.trigger("secondchange",Math.floor(d)),Math.abs(d-b._lastTimePosition)>b.params.seekThreshold&&b.trigger("seek",d,b._lastTimePosition),b._lastTimePosition=d))},this._fireIfChanged()},d.prototype.play=function(){var b=this;return this.suppressPlay()?this:(a.detect.iphone||a.detect.ipad||a.detect.android||this.trigger("startplay"),this.ready(function(){var c;return c=function(){return/video/i.test(b.elem().tagName)?b.ready(function(){return a.elem.bindOnce(b.elem(),"playing",function(){var a,c;return b._issuedPlay=!1,null!=(a=b.bigPlayButton)&&a.hide(),null!=(c=b.elem())?c.style.width="100%":void 0}),b.elem().play()}):(b.embedHtml5(),b.play())},b._issuedPlay=!0,b._seeking&&"beforeplay"!==b.state()?b.bind("play-seek",function(){return c(),this.unbind}):c()}),this)},d.prototype.pause=function(){var a=this;return this.ready(function(){var b;return b=function(){var b,c;return/video/i.test(null!=(b=a.elem())?b.tagName:void 0)&&null!=(c=a.elem())&&c.pause(),a.unbind},a._seeking?a.bind("play-seek",b):b(),a._issuedPlay=!1}),this},d.prototype._waitForTimeChangeOrSeek=function(b){var c=this;return a.detect.browser.msie?this.bind("timechange",function(){return b(),c.unbind}):a.elem.bindOnce(this.elem(),"seeked",function(){return b()})},d.prototype.time=function(b){var c,d=this;return null!=b?this.suppressPlay()?this:(this.ready(function(){var c,e;return c=d._issuedPlay||"playing"===d.state(),"beforeplay"===d.state()?(e=function(){return a.detect.iphone||a.detect.ipad?a.elem.bindOnce(d.elem(),"canplaythrough",function(){return a.elem.bindOnce(d.elem(),"progress",function(){return a.elem.bindOnce(d.elem(),"seeked",function(){return d._seeking=!1,c||d.pause(),d.trigger("play-seek")}),d.elem().currentTime=b})}):(d._waitForTimeChangeOrSeek(function(){return d._seeking=!1,c||d.pause(),d.trigger("play-seek")}),d.elem().currentTime=b)},d._hasPlayed?e():a.elem.bindOnce(d.elem(),"playing",e),d.play(),d._seeking=!0):(d._waitForTimeChangeOrSeek(function(){return d._seeking=!1,c||d.pause(),d.trigger("play-seek")}),d._seeking=!0,d.elem().currentTime=b)}),this):(null!=(c=this.elem())?c.currentTime:void 0)||0},d.prototype.state=function(){var a;try{return this.elem().ended?"ended":0===this.elem().played.length&&0===this.time()||null===this.time()?"beforeplay":this.elem().paused?"paused":"playing"}catch(b){return a=b,"unknown"}},d.prototype.volume=function(a){var b,c=this;return null!=a?this.ready(function(){return c.elem().volume=a,c}):(null!=(b=this.elem())?b.volume:void 0)||0},d.prototype.setPlayerColor=function(){},d.prototype.playerColor=function(a){var b=this;return null!=a?(this.ready(function(){var a;return null!=(a=b.bigPlayButton)?a.updateColor():void 0}),this):this.params.playerColor},d.prototype.playbackRate=function(a){return null!=this.videoElem.playbackRate?null!=a?(this.videoElem.playbackRate=a,this._eventLoopDuration=Math.max(50,Math.min(500,this._baseEventLoopDuration*a)),this._playbackRate=a,this):this.videoElem.playbackRate:d.__super__.playbackRate.call(this,a)},d.prototype.correctForIntegers=function(){var b,c,d,e;if(!a.detect.iphone&&!a.detect.ipad&&(null!=(e=this.elem())?e.style:0))return c=Math.round(this.videoWidth()/this.aspect()),b=this.videoHeight(),d=c-b,d>=1&&6>d?(this.elem().style.height="calc(100% + "+d+"px)",this.elem().style.width="100%"):(this.elem().style.width="100%",this.elem().style.height="100%")},d}(a._embed.Video)}(Wistia),function(a){var b;if(null!=(b=a.Romulus)?!b.Control:!0)return a.Romulus||(a.Romulus={}),a.Romulus.Control=function(){function b(b){var c=this;this.video=b,this.grid=this.video.grid,this.uuid=a.seqId("wistia_"+this.name+"_"),this.elem=document.createElement("div"),this.elem.id=this.uuid,this.elem.className="wistia_romulus_control wistia_romulus_hidden",a.elem.append(this.video.romulusElem,this.elem),this.elem.style.cursor="pointer",a.elem.bind(this.elem,"mouseover",function(a){return"function"==typeof c.mouseover?c.mouseover(a):void 0}),a.elem.bind(this.elem,"mouseout",function(a){return"function"==typeof c.mouseout?c.mouseout(a):void 0}),"function"==typeof this.setupBindings&&this.setupBindings()}return b.prototype.show=function(){return this.shouldShow()?(this.elem.style.height=""+this.height()+"px",this.elem.style.width=""+this.width()+"px",a.elem.removeClass(this.elem,"wistia_romulus_hidden"),a.elem.addClass(this.elem,"wistia_romulus_visible")):void 0},b.prototype.shouldShow=function(){return this.on()&&("beforeplay"===this.video.state()&&this.video.params.controlsVisibleOnLoad||this.video._mouseover&&"beforeplay"!==this.video.state()||this.video._previewControls&&"beforeplay"!==this.video.state())},b.prototype.hide=function(){return a.elem.removeClass(this.elem,"wistia_romulus_visible"),a.elem.addClass(this.elem,"wistia_romulus_hidden"),this.elem.style.height="0px",this.elem.style.width="0px"},b.prototype.turnOn=function(){var a=this;return this._on=!0,this.dontAnimate(this.elem,function(){return a.show()}),this.video.trigger("control-on",this.name)},b.prototype.turnOff=function(){var b=this;return this._on=!1,a.elem.addClass(this.elem,"wistia_dont_animate"),this.hide(),a.util.requestAnimationFrame(function(){return a.elem.removeClass(b.elem,"wistia_dont_animate")}),this.video.trigger("control-off",this.name)},b.prototype.on=function(){return this._on},b.prototype.off=function(){return!this._on},b.prototype.initialize=function(){return this},b.prototype.primaryColor=function(){return new a.Color(this.video.params.playerColor)},b.prototype.secondaryColor=function(){return this.primaryColor().lighten(100)},b.prototype.tertiaryColor=function(){return this.primaryColor().lighten(40)},b.prototype.preventAnimation=function(b){var c,d,e,f;for(b instanceof Array||(b=[b]),f=[],d=0,e=b.length;e>d;d++)c=b[d],f.push(a.elem.addClass(c,"wistia_dont_animate"));return f},b.prototype.allowAnimation=function(b){var c,d,e,f;for(b instanceof Array||(b=[b]),f=[],d=0,e=b.length;e>d;d++)c=b[d],f.push(a.elem.removeClass(c,"wistia_dont_animate"));return f},b.prototype.dontAnimate=function(b,c){var d=this;return this.preventAnimation(b),c(),a.util.requestAnimationFrame(function(){return d.allowAnimation(b)})},b.prototype.updateColor=function(){},b}()}(Wistia);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){return a.Romulus.SmallPlayButton?void 0:a.Romulus.SmallPlayButton=function(b){function c(a){this.video=a,this.name="smallPlayButton",c.__super__.constructor.call(this,this.video),this.elem.style.position="absolute",this.elem.style.bottom="0px",this.elem.style.background=""+this.primaryColor().alpha(.8).toRgba()+" url("+this.playBase64()+") no-repeat 19px 7px",this.elem.style.width="0px",this.elem.style.height="0px"}return __extends(c,b),c.prototype.initialize=function(){var b=this;return!this.video.params.chromeless&&a.util.notSetOrTrue(this.video.params.smallPlayButton)&&this.video.still.loaded(function(){return b.turnOn()}),this},c.prototype.setupBindings=function(){var b=this;return this.video.bind("play",function(){return a.elem.removeClass(b.elem,"paused"),a.elem.addClass(b.elem,"playing"),b.elem.style.backgroundImage="url("+b.pauseBase64()+")",b.elem.style.backgroundPosition="19px 7px"}),this.video.bind("pause",function(){return a.elem.removeClass(b.elem,"playing"),a.elem.addClass(b.elem,"paused"),b.elem.style.backgroundImage="url("+b.playBase64()+")",b.elem.style.backgroundPosition="20px 7px"}),a.elem.bind(this.video.romulusElem,"click",function(c){return 1===c.which?"beforeplay"===b.video.state()?b.video.play():a.elem.isInside(c.target,b.elem)?b.video.togglePlay():void 0:void 0})},c.prototype.mouseover=function(){return this.elem.style.backgroundColor=this.tertiaryColor().alpha(.8).toRgba();
},c.prototype.mouseout=function(){return this.elem.style.backgroundColor=this.primaryColor().alpha(.8).toRgba()},c.prototype.width=function(){return 50},c.prototype.height=function(){return 32},c.prototype.playBase64=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAARCAYAAAAG/yacAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALtJREFUeNpi/P//PycDA8N3BhIAExAbA/F2IJYmRRMIeADxeSAOJEoX0Hk2/1HBIiDmAWIGXBibJhC4B8T2uDQx4XCAIhDvBeIWIGYjxnno4BIQqxNjEzLQhQZSESk2IYNdQCzNxEAa+IscT4TAFyBOB2JPIH7KQoSGg0CcCMT30VMENgBKj8VA7ICsAQRw2XQKiOOA+Ca+tAcDv4C4BoitcGlAt+kyEEdDaYIJ1gyIq4GYDV8iRcYAAQYAiLj3XtYfhVwAAAAASUVORK5CYII="},c.prototype.pauseBase64=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAQCAYAAADAvYV+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi/A8EDKiAEYmNIsfEQAIYVTyqmP6KAQIMAAt4BRxVBhiuAAAAAElFTkSuQmCC"},c.prototype.updateColor=function(){return this.elem.style.backgroundColor=this.primaryColor().alpha(.8).toRgba()},c}(a.Romulus.Control)}(Wistia);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){return a.Romulus.VolumeControl?void 0:a.Romulus.VolumeControl=function(b){function c(b){this.video=b,this.name="volumeControl",c.__super__.constructor.call(this,this.video),this.elem.innerHTML="&nbsp;",this.elem.style.position="absolute",this.elem.style.bottom="0px",this.elem.style.height="0px",this.elem.style.overflow="hidden",this.elem.style.width="0px",this.levelElem=document.createElement("div"),this.levelElem.style.position="absolute",this.levelElem.style.left="0px",this.levelElem.style.top="0px",this.levelElem.style.height=""+this.height()+"px",this.levelElem.style.width=""+this.width()+"px",this.levelElem.style.backgroundColor=this.primaryColor().alpha(.8).toRgba(),a.elem.append(this.elem,this.levelElem),this.inverseLevelElem=document.createElement("div"),this.inverseLevelElem.style.position="absolute",this.inverseLevelElem.style.left=""+this.width()+"px",this.inverseLevelElem.style.top="0px",this.inverseLevelElem.style.height=""+this.height()+"px",this.inverseLevelElem.style.width="0px",this.inverseLevelElem.style.backgroundColor=this.primaryColor().alpha(.5).toRgba(),a.elem.append(this.elem,this.inverseLevelElem),this.iconElem=document.createElement("div"),this.iconElem.style.position="absolute",this.iconElem.style.backgroundImage="url("+this.iconBase64()+")",this.iconElem.style.left="15px",this.iconElem.style.top="7px",this.iconElem.style.height="18px",this.iconElem.style.width="21px",a.elem.append(this.elem,this.iconElem)}return __extends(c,b),c.prototype.initialize=function(){var b=this;return!this.video.params.chromeless&&a.util.notSetOrTrue(this.video.params.volumeControl)&&this.video.still.loaded(function(){return b.turnOn()}),this},c.prototype.setupBindings=function(){var b=this;return a.elem.bind(this.elem,"mousedown",function(a){var c;if(1===a.which)return a.preventDefault(),c=(a.pageX-b.leftMostX())/b.width(),b.updateLevel(c),b.video.volume(c),b.startDrag()}),a.elem.bind(this.elem,"click",function(a){return a.stopPropagation()}),this.video.bind("volumechange",function(){return b.updateLevel(b.video.volume())})},c.prototype.turnOn=function(){return c.__super__.turnOn.apply(this,arguments),this.updateLevel(this.savedVolume())},c.prototype.leftMostX=function(){return this.video.inFullscreen()?this.video.leftControlsWidth()+this.video.playbarControl.width()+5:a.elem.offset(this.elem).left},c.prototype.startDrag=function(){var b=this;return null==this._onDragLevel&&(this._onDragLevel=function(a){var c;return c=Math.min(1,Math.max(0,(a.pageX-b.leftMostX())/b.width())),b.updateLevel(c),b.video.volume(c)}),a.elem.bind(document.body,"mousemove",this._onDragLevel),null==this._onReleaseLevel&&(this._onReleaseLevel=function(a){return b.saveVolume(),b.stopDrag()}),a.elem.bind(document.body,"mouseup",this._onReleaseLevel)},c.prototype.stopDrag=function(){return this._onDragLevel&&a.elem.unbind(document.body,"mousemove",this._onDragLevel),this._onReleaseLevel&&a.elem.unbind(document.body,"mouseup",this._onReleaseLevel),this._onMouseLeavesWindow?a.elem.unbind(document,"mouseout",this._onMouseLeavesWindow):void 0},c.prototype.updateLevel=function(a){var b;return b=Math.min(this.width(),Math.max(0,Math.round(this.width()*a))),this.levelElem.style.width=""+b+"px",this.inverseLevelElem.style.left=""+b+"px",this.inverseLevelElem.style.width=""+(this.width()-b)+"px"},c.prototype.saveVolume=function(){return a.localStorage("romulus.volume",this.video.volume())},c.prototype.savedVolume=function(){var b;return this.on()&&(b=a.localStorage("romulus.volume"))?b:1},c.prototype.mouseover=function(){return this.levelElem.style.backgroundColor=this.tertiaryColor().alpha(.8).toRgba()},c.prototype.mouseout=function(){return this.levelElem.style.backgroundColor=this.primaryColor().alpha(.8).toRgba()},c.prototype.width=function(){return 50},c.prototype.height=function(){return 32},c.prototype.iconBase64=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAASCAYAAAC0EpUuAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAYBJREFUeNqs1EsoRFEYwPE7U/MwC6XBgiJMka2aSFOSlbDQxNrKUiGlbOw8thYipRTZyALZkSQlr+zHoy7yKMLY4PiffJdruu5o+OrXnO+e5uucc+93DKWU8UdlGEC+9cxrZB4e+fWjEyOfMy4rCGMeuw5zAUygS/IaPKJd5z8VzMWk+ohn2/MgvDLuQxJNko/jCD6ngvU4VF9h2uZ6sIhsyeewjSwU4hpxe7GQHHhSfQ970RI5jmm9IkTs28YGpvRgRqwr5zBTdhLFDWolX9GFZNyrV26o9GE6HNEqhmXcjz05ghgSmX5SCURkfIkwArhDMNOiQTzZxkm8wIfXTIrmIIpNyctxKoVLca+LVog4zn7RRR0IYVm23IgtvCEGM/UFFGHB5UW1yJtvkzyOB1RJvo9Bp4/fg275s45z21ydrYMKcIwxyZvl4690633dzwe4dZjzY0k6L0/ugh3MuvV+Orr/G1As+RCurNz4h/u0Gido/Y/71IoLjGLNevAuwAABlVJPOGwDdgAAAABJRU5ErkJggg=="},c.prototype.updateColor=function(){return this.levelElem.style.backgroundColor=this.primaryColor().alpha(.8).toRgba(),this.inverseLevelElem.style.backgroundColor=this.primaryColor().alpha(.5).toRgba()},c}(a.Romulus.Control)}(Wistia);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){return a.Romulus.FullscreenButton?void 0:a.Romulus.FullscreenButton=function(b){function c(a){this.video=a,this.name="fullscreenButton",c.__super__.constructor.call(this,this.video),this.elem.innerHTML="&nbsp;",this.elem.style.position="absolute",this.elem.style.bottom="0px",this.elem.style.width="0px",this.elem.style.height="0px",this.elem.style.background=""+this.primaryColor().alpha(.8).toRgba()+" url("+this.iconBase64()+") no-repeat 12px 7px"}return __extends(c,b),c.prototype.initialize=function(){var b=this;return!this.video.params.chromeless&&a.util.notSetOrTrue(this.video.params.fullscreenButton)&&this.video.still.loaded(function(){return b.turnOn()}),this},c.prototype.setupBindings=function(){var b=this;return a.elem.bind(this.elem,"click",function(a){return 1===a.which?(a.stopPropagation(),b.video.inFullscreen()?b.video.cancelFullscreen():b.video.requestFullscreen()):void 0})},c.prototype.mouseover=function(){return this.elem.style.backgroundColor=this.tertiaryColor().alpha(.8).toRgba()},c.prototype.mouseout=function(){return this.elem.style.backgroundColor=this.primaryColor().alpha(.8).toRgba()},c.prototype.width=function(){return 50},c.prototype.height=function(){return 32},c.prototype.iconBase64=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAASCAYAAACuLnWgAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQZJREFUeNpifPv27UcGBgY+BlTgDsS7GEgH/kC8AU3sDQvUgsNAfASI/0Ml7jCQB24AcRuUzQjEjkBsygIVWA/E/WgaWMiw5CYQVyPxa4DYAmaQMJR+DsRcDJSDT0AsC8QiMNeCfHAAyhYEYnYqWMIMxEzQeP3HCIx4mATIB6+p6BNQ6PxhgNoGA/8ZaASYGOgARi0Z3JYw0soSUAYMBeIrQHyXymaDsoQOEGuCfLIKiKOA+BeVMiIsY/8F4mSQ+bCy6yOUloIGITeZBSQoh38FFSVQ/gdYcIG8pQ/EPkD8HSp5AqqYVACqNkyhbGMg1gb5CFR2YStOQBZuJcOSUGjwowCAAAMATJQzitPWWOwAAAAASUVORK5CYII="},c.prototype.updateColor=function(){return this.elem.style.backgroundColor=this.primaryColor().alpha(.8).toRgba()},c.prototype.turnOn=function(){return a._detect.fullscreenEnabled()?c.__super__.turnOn.apply(this,arguments):void 0},c}(a.Romulus.Control)}(Wistia);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){return a.Romulus.Playbar?void 0:a.Romulus.PlaybarControl=function(b){function c(b){this.video=b,this.name="playbarControl",c.__super__.constructor.call(this,this.video),this.elem.style.position="absolute",this.elem.style.bottom="0px",this.elem.style.height="0px",this.elem.style.overflow="hidden",this.elem.style.width="0px",a.elem.addClass(this.elem,"wistia_playbar"),this.backgroundElem=a.elem.fromObject({id:a.seqId("wistia_playbar_background_"),style:{background:this.primaryColor().alpha(.5).toRgba(),position:"absolute",left:"4px",top:"4px",width:""+this.width+"px",height:""+(this.height()-8)+"px",pointerEvents:"none"}}),a.elem.append(this.elem,this.backgroundElem),this.bufferedElem=a.elem.fromObject({id:a.seqId("buffered_"),"class":"wistia_buffered",style:{background:this.secondaryColor().alpha(.8).toRgba(),position:"absolute",left:"4px",top:"4px",width:"0px",height:""+(this.height()-8)+"px"}}),a.elem.append(this.elem,this.bufferedElem),this.borderElem=a.elem.fromObject({style:{position:"absolute",left:"0px",top:"0px",border:"4px solid "+this.primaryColor().alpha(.8).toRgba(),pointerEvents:"none"}}),a.elem.append(this.elem,this.borderElem),this.watchedElem=a.elem.fromObject({id:a.seqId("watched_"),"class":"wistia_played",style:{backgroundImage:"url("+this.diagonalLinesBase64()+")",position:"absolute",left:"0px",top:"0px",width:"0px",height:""+this.height()+"px"}}),a.elem.append(this.elem,this.watchedElem),this.timeElem=a.elem.fromObject({id:a.seqId("time_"),"class":"wistia_time",innerHTML:a.util.niceDuration(this.video.duration()),style:{bottom:"7px",color:"rgba(255, 255, 255, .7)",cursor:"pointer",display:"inline-block",fontFamily:"Arial, Sans-Serif",fontWeight:"bold",fontSize:"15px",lineHeight:"1.1em",position:"absolute",textShadow:"0 0 9px #7b796a",width:"0px"}}),a.elem.append(this.watchedElem,this.timeElem),a.elem.bind(this.timeElem,"mousedown",function(a){return a.preventDefault()}),this.scrubBar=a.elem.fromObject({id:a.seqId("scrub_bar_"),"class":"wistia_scrub_bar",innerHTML:"<div class='wistia_scrub_bar_top'>&nbsp;</div>\n<div class='wistia_scrub_bar_middle'>&nbsp;</div>\n<div class='wistia_scrub_bar_bottom'>&nbsp;</div>",style:{position:"absolute",left:"0px",top:"0px",width:"4px",height:""+this.height()+"px"}}),a.elem.append(this.elem,this.scrubBar),this.updateScrubBar()}return __extends(c,b),c.prototype.initialize=function(){var b=this;return!this.video.params.chromeless&&a.util.notSetOrTrue(this.video.params.playbar)&&this.video.still.loaded(function(){return b.turnOn()}),this},c.prototype.setupBindings=function(){var b=this;return a.elem.bind(this.elem,"mousedown",function(c){var d;if(1===c.which)return c.preventDefault(),"beforeplay"===b.video.state()?b.video.play():(d=(c.pageX-2-b.leftMostX())/b.width(),b._stateOnDrag=b.video.state(),a.elem.addClass(b.elem,"wistia_dragging"),b.updateScrubBar(d),b.updateTime(d),b.startDrag(),"beforeplay"===b.video.state()?b.video.play():(b.video.ready(function(){return b.video.videoElem.pause()}),"playing"===b._stateOnDrag?a.elem.bind(document,"mouseup",function(){return b.video.ready(function(){return b.video.videoElem.play()}),b.instaUpdateScrubBar(b.video.time()/b.video.duration()),a.elem.unbind}):void 0))}),this.video.bind("timechange",function(a){return!b.video._seekingBeforePlay&&!b._scrubbing&&b.updateScrubBar(a/b.video.duration()),b.updateBuffered()}),this.video.bind("seek",function(a){return b.instaUpdateScrubBar(a/b.video.duration())}),this.video.bind("startplay",function(){return b.instaUpdateScrubBar(b.video.time()/b.video.duration())}),a.elem.bind(this.video.videoElem,"progress",function(){return b.updateBuffered()}),this.video.bind("pause",function(){return b.instaUpdateScrubBar(),b.updateBuffered()}),this.video.bind("end",function(){return a.timeout(""+b.video.uuid+".after_end",function(){return b.instaUpdateScrubBar(),b.updateBuffered()},50)}),this.video.bind("switched-to-asset",function(){return b.instaUpdateScrubBar()}),this.video.bind("widthchange",function(){return b.instaUpdateScrubBar(),b.updateBuffered()})},c.prototype.instaUpdateScrubBar=function(){var a=this;return this.dontAnimate([this.scrubBar,this.watchedElem],function(){return a.updateScrubBar(a.video.time()/a.video.duration())})},c.prototype.startDrag=function(){var b=this;return null==this._onDragScrubBar&&(this._onDragScrubBar=function(c){var d;return a.elem.addClass(b.elem,"wistia_dragging"),"playing"===b.video.state()&&b.video.pause(),d=Math.min(1,Math.max(0,(c.pageX-2-b.leftMostX())/b.width())),b.updateScrubBar(d),b.updateTime(d)}),a.elem.bind(document.body,"mousemove",this._onDragScrubBar),null==this._onReleaseScrubBar&&(this._onReleaseScrubBar=function(a){return b.stopDrag()}),a.elem.bind(document.body,"mouseup",this._onReleaseScrubBar),this.preventAnimation([this.scrubBar,this.watchedElem]),this._scrubbing=!0},c.prototype.leftMostX=function(){return this.video.inFullscreen()?this.video.leftControlsWidth():a.elem.offset(this.elem).left},c.prototype.stopDrag=function(){return a.elem.removeClass(this.elem,"wistia_dragging"),this._onDragScrubBar&&a.elem.unbind(document.body,"mousemove",this._onDragScrubBar),this._onReleaseScrubBar&&a.elem.unbind(document.body,"mouseup",this._onReleaseScrubBar),this._onMouseLeavesRomulus&&a.elem.unbind(document.body,"mousemove",this._onMouseLeavesRomulus),this._onMouseLeavesWindow&&a.elem.unbind(document,"mouseout",this._onMouseLeavesWindow),("playing"===this._stateOnDrag||"ended"===this._stateOnDrag)&&this.video.play(),this._scrubbing=!1,this.updateScrubBar(this.video.time()/this.video.duration()),this.updateBuffered(),this.allowAnimation([this.scrubBar,this.watchedElem])},c.prototype.updateScrubBar=function(b){var c,d;return null==b&&(b=0),"beforeplay"===this.video.state()?(this.scrubBar.style.left="0px",this.watchedElem.style.width="0px",this.watchedElem.style.overflow="",this.timeElem.innerHTML=a.util.niceDuration(this.video.duration()),this.timeElem.style.left="auto",this.timeElem.style.right=""+(-a.elem.width(this.timeElem)-8)+"px",this.timeElem.style.width="0px"):(c=this.width()-4,d=Math.max(0,Math.min(c,Math.round(this.width()*b)-2)),this.scrubBar.style.left=""+d+"px",this.watchedElem.style.width=""+d+"px",this.watchedElem.style.overflow="hidden",this.timeElem.style.left="auto",this.timeElem.style.width="auto",this.timeElem.style.right="4px",this.timeElem.innerHTML=a.util.niceDuration(this.video.time()))},c.prototype.updateTime=function(a){var b;return b=Math.min(this.video.duration(),Math.max(0,a*this.video.duration())),this.video.time(b)},c.prototype.updateBuffered=function(){var a,b,c,d,e,f;if(!this._scrubbing)return d=this.sequentialBufferedRange(),null!=d?(f=Math.max(0,d[0]/this.video.duration()),c=Math.min(1,d[1]/this.video.duration()),e=Math.round(this.scrubWidth()*f),b=Math.round(this.scrubWidth()*c),a=b-e,this.bufferedElem.style.left=""+(e+4)+"px",this.bufferedElem.style.width=""+Math.max(0,a-4)+"px"):(this.bufferedElem.style.left="0px",this.bufferedElem.style.width="0px")},c.prototype.sequentialBufferedRange=function(){var a,b,c,d,e,f,g,h,i,j,k,l;for(f=null,b=h=0,j=this.video.videoElem.buffered.length;j>=0?j>h:h>j;b=j>=0?++h:--h)if(e=this.video.videoElem.buffered.start(b)-.5,a=this.video.videoElem.buffered.end(b)+.5,e<=(k=this.video.time())&&a>k){f=b;break}if(null!=f){for(d=f,b=i=f,l=this.video.videoElem.buffered.length;(l>=f?l>i:i>l)&&(g=this.video.videoElem.buffered.start(b)-.5,c=this.video.videoElem.buffered.end(d)+.5,c>=g);b=l>=f?++i:--i)d=b;return e=this.video.videoElem.buffered.start(f),a=this.video.videoElem.buffered.end(d),[e,a]}return null},c.prototype.width=function(){return this.video.videoWidth()-this.video.leftControlsWidth()-this.video.rightControlsWidth()},c.prototype.scrubWidth=function(){return this.width()-4},c.prototype.height=function(){return 32},c.prototype.reorient=function(){return this.elem.style.left=""+this.video.leftControlsWidth()+"px",this.elem.style.width=""+this.width()+"px",this.borderElem.style.width=""+(this.width()-8)+"px",this.borderElem.style.height=""+(this.height()-8)+"px",this.backgroundElem.style.width=""+(this.width()-8)+"px",this.backgroundElem.style.height=""+(this.height()-8)+"px"},c.prototype.diagonalLinesBase64=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQFJREFUeNrsl6EOwkAQRC+T1CBAYDAIEFRgiiiW/6cCDAJTBKYGQQWmouyGbbLZD5gzNBnxcmbSd+3dpnEcC8lJUkoSm5FS2ksGyT39HiprgZWkscU1m2GgjebWjspa4CUpJAfJg82wV7ELnmg87QF1c7VFKmuByuAjmbFZCzwlnbWr2awFbu77TGxG8NKwGTm8e0YO754RvJRs1gIXg6Vkw2Yt0NuvsbZmVIbz0pkbKsO8FMETjeG8DMEThZHDu2c4L5Wd1VSeNuFWsnBHJo3hrkrncHWisBY4Bi9U1gJvSeu8UBk5vHtGDu+e4a7I3hON/WjWhtGJwv/RLPto9hVgAAkkA1W/Un5YAAAAAElFTkSuQmCC"},c.prototype.updateColor=function(){return this.backgroundElem.style.backgroundColor=this.primaryColor().alpha(.5).toRgba(),this.bufferedElem.style.backgroundColor=this.secondaryColor().alpha(.8).toRgba(),this.borderElem.style.borderColor=this.primaryColor().alpha(.8).toRgba()},c}(a.Romulus.Control)}(Wistia);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){return a.Romulus.BigPlayButton?void 0:a.Romulus.BigPlayButton=function(b){function c(b){this.video=b,this.name="bigPlayButton",c.__super__.constructor.call(this,this.video),this.elem.style.position="absolute",this.elem.style.background=""+this.primaryColor().alpha(.8).toRgba()+" url("+this.bigIconBase64()+") no-repeat center center",this.elem.style.height=""+this.height()+"px",this.elem.style.width=""+this.width()+"px",a.elem.removeClass(this.elem,"wistia_romulus_hidden"),a.elem.removeClass(this.elem,"wistia_romulus_visible"),this.elem.style.display="none",this.elem.style.opacity=1}return __extends(c,b),c.prototype.initialize=function(){var b=this;return!this.video.params.chromeless&&a.util.notSetOrTrue(this.video.params.playButton)&&this.video.still.loaded(function(){return b.turnOn()}),this},c.prototype.setupBindings=function(){var b=this;return a.elem.bind(this.video.videoElem,"playing",function(){return b.hide()}),this.video.bind("startplay",function(){return b.hide()}),a.elem.bind(this.video.romulusElem,"click",function(c){return 1===c.which&&a.elem.isInside(c.target,b.elem)?(b.video.showControls(),b.video.play()):void 0})},c.prototype.mouseover=function(){return this.elem.style.backgroundColor=this.tertiaryColor().alpha(.8).toRgba()},c.prototype.mouseout=function(){return this.elem.style.backgroundColor=this.primaryColor().alpha(.8).toRgba()},c.prototype.shouldShrink=function(){return this.video.videoWidth()<=320||this.video.videoHeight()<=200},c.prototype.width=function(){return this.shouldShrink()?60:127},c.prototype.height=function(){return this.shouldShrink()?38:81},c.prototype.turnOn=function(){return this._on=!0,this.show(),this.video.trigger("control-on",this.name)},c.prototype.show=function(){return this.on()&&"beforeplay"===this.video.state()?this.elem.style.display="block":void 0},c.prototype.hide=function(){return this.elem.style.display="none"},c.prototype.reorient=function(){return this.shouldShrink()?this.elem.style.backgroundImage="url("+this.smallIconBase64()+")":this.elem.style.backgroundImage="url("+this.bigIconBase64()+")",this.elem.style.width=""+this.width()+"px",this.elem.style.height=""+this.height()+"px",this.center()},c.prototype.center=function(){var a,b,c;return c=this.video.videoHeight(),this.video.params.controlsVisibleOnLoad&&(c-=22),a=Math.round((this.video.videoWidth()-this.width())/2),b=Math.round((c-this.height())/2),this.elem.style.left=""+a+"px",this.elem.style.top=""+b+"px"},c.prototype.bigIconBase64=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH8AAABRCAYAAAD7G3lVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATFJREFUeNrs22FtwkAYx+F2QcAkMAfgYBKQwBxMQh1MwiRQB+CgEoaDzkG5S1a+E5IF+n+e5D4ve3+7N0s4mgYAAAAAAAAAAAAA7jFN06cp5MavjuWsTSMzfjWWszORzPizQzmvJpMZ3xYIj28LiG8LpMeffdsCufGrn3LeTS0z/uzLFsiNbwuEx7cFxL9ugY1pZsafdSaaG78abIHc+LaA+MvbAi/+XG5Sww9L2QLtEm/+P/2oUzkfbduexc+LX51L/DdrP09fzvaZf4GVhjf7/Vv3vVFk/bfvMUhg/PoAZG+6efE9Aw+MP/oCSGZ8tz0wvtseGn9w2zPjdyaXF99n9aHx3fbA+G57aHy3PTC+N/mh8b3DD4zvtofGd9tD47vtAAAAAAAAAAAAADymiwADAOSj1JBfF8xMAAAAAElFTkSuQmCC"},c.prototype.smallIconBase64=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAmCAYAAACYsfiPAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJNJREFUeNrs1ksNhEAURNGWgAQkjAQkIAUJ7QApIwEJSEACEh6PBatJhmZJ1T1JCahU+lMKAACAioj4Zjqnwqc9MzoVvszya8evLTM4FdZeO/7TWzva6Kwd7dbMx6nwpboV3l99rh+WXV5/lh+sOrlcWueqvcOzpLNqQ2GtVW8KT0WZ3MeisXAtLixWBQAAQDoEGACTzSwy3SX7YgAAAABJRU5ErkJggg=="},c.prototype.updateColor=function(){return this.elem.style.backgroundColor=this.primaryColor().alpha(.8).toRgba()},c}(a.Romulus.Control)}(Wistia);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){return a.Romulus.Still?void 0:a.Romulus.Still=function(b){function c(b){var d,e,f=this;this.video=b,this.name="still",this.loaded=new a.StopGo,c.__super__.constructor.call(this,this.video),a.elem.removeClass(this.elem,"wistia_romulus_hidden"),a.elem.removeClass(this.elem,"wistia_romulus_visible"),this.elem.style.cursor="default",this.elem.style.height="100%",this.elem.style.left="0px",this.elem.style.overflow="hidden",this.elem.style.position="absolute",this.elem.style.top="0px",this.elem.style.width="100%",d=a.obj.merge({},this.video.options,{playButton:!1,videoHeight:this.video.videoHeight(),videoWidth:this.video.videoWidth()}),e=a.generate.stillUrl(this.video.data.media,d),this.img=new Image,a.elem.style(this.img,{border:"0",display:"inline-block","float":"none",margin:"0px",maxWidth:"none",padding:"0px",height:"100%",verticalAlign:"top",width:"100%"}),this._finishImgLoad=function(){return a.clearTimeouts(""+f.video.uuid+".long_still_load"),a.elem.append(f.elem,f.img),f.loaded(!0)},a.elem.bind(this.img,"load",this._finishImgLoad),a.elem.bind(this.img,"error",this._finishImgLoad),a.timeout(""+this.video.uuid+".long_still_load",this._finishImgLoad,1e3),this.img.src=e,a.elem.bind(this.img,"mousedown",function(a){return a.preventDefault()})}return __extends(c,b),c.prototype.initialize=function(){return this.fitStill(),this},c.prototype.setupBindings=function(){var b=this;return a.elem.bind(this.video.videoElem,"playing",function(){return b.hide()}),this.video.bind("startplay",function(){return a.timeout(""+b.video.uuid+".delayed_hide_still",function(){return"beforeplay"!==b.video.state()?b.hide():void 0},1e3)}),a.elem.bind(this.video.romulusElem,"click",function(c){return 1===c.which&&a.elem.isInside(c.target,b.elem)?(b.video.showControls(),b.video.play()):void 0}),this._debounceFitStill=function(c){return null==c&&(c=250),a.timeout(""+b.video.uuid+".fitStill",function(){return b.fitStill()},c)},this._debounceReloadAtProperSize=function(c){return null==c&&(c=250),a.timeout(""+b.video.uuid+".reload_still_at_proper_size",function(){return b.reloadStillAtProperSize()},c)},this.video.bind("enter-fullscreen",function(){return b._debounceFitStill(),b.reloadStillAtProperSize()}),this.video.bind("cancel-fullscreen",function(){return b._debounceFitStill(),b.reloadStillAtProperSize()}),this.video.bind("heightchange",function(){return b.fitStill(),b._debounceFitStill(),b._debounceReloadAtProperSize()}),this.video.bind("widthchange",function(){return b.fitStill(),b._debounceFitStill(),b._debounceReloadAtProperSize()})},c.prototype.reloadStillAtProperSize=function(){var b,c,d=this;return b=this.video.inFullscreen()?a.obj.merge({},this.video.options,{playButton:!1,videoHeight:a.elem.height(window),videoWidth:a.elem.width(window)}):a.obj.merge({},this.video.options,{playButton:!1,videoHeight:this.video.videoHeight(),videoWidth:this.video.videoWidth()}),c=a.generate.stillUrl(this.video.data.media,b),this._dummyImg&&a.elem.unbind(this._dummyImg,"load",this._reloadStillWhenFullyLoaded),this._dummyImg=new Image,this._reloadStillWhenFullyLoaded=function(){return d.img.src=c,d._dummyImg=null},a.elem.bind(this._dummyImg,"load",this._reloadStillWhenFullyLoaded),this._dummyImg.src=c},c.prototype.fitStill=function(){var a,b,c,d,e,f,g,h,i,j,k,l;return this.video.params.stillSnap===!1?(f=this.video.videoWidth(),e=this.video.videoHeight()):(c=this.video.videoWidth()/this.video.videoHeight(),c>this.video.aspect()?(e=this.video.videoHeight(),f=Math.round(e*this.video.aspect())):c<=this.video.aspect()&&(f=this.video.videoWidth(),e=Math.round(f/this.video.aspect()))),l=Math.max(0,this.video.videoHeight()-e),j=Math.max(0,this.video.videoWidth()-f),k=Math.round(l/2),i=Math.round(j/2),h=b=k,d=g=i,1===b&&(b=0,h=0,e=this.video.videoHeight()),1===d&&(d=0,g=0,f=this.video.videoWidth()),a="transparent"===this.video.params.wmode?"transparent":"#000",this.img.style.height=""+e+"px",this.img.style.width=""+f+"px",this.img.style.borderTop=""+h+"px solid "+a,this.img.style.borderBottom=""+b+"px solid "+a,this.img.style.borderLeft=""+d+"px solid "+a,this.img.style.borderRight=""+g+"px solid "+a},c.prototype.shouldShow=function(){return"beforeplay"===this.video.state()},c.prototype.show=function(){return this.elem.style.display="block",this.fitStill()},c.prototype.hide=function(){return this.elem.style.display="none"},c.prototype.mouseover=function(){},c.prototype.mouseout=function(){},c}(a.Romulus.Control)}(Wistia);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){return a.Romulus.Branding?void 0:a.Romulus.Branding=function(b){function c(b){this.video=b,this.name="branding",c.__super__.constructor.call(this,this.video),this.elem.style.overflow="hidden",this.elem.style.position="absolute",this.elem.style.left="0px",this.elem.style.top="0px",this.elem.style.backgroundColor=this.primaryColor().alpha(.8).toRgba(),this.elem.style.height="0px",this.elem.style.width="0px",this.elem.className="wistia_romulus_control wistia_romulus_hidden",this.linkElem=document.createElement("a"),this.linkElem.setAttribute("href","http://wistia.com"),this.linkElem.setAttribute("target","_blank"),this.linkElem.style.display="block",this.linkElem.style.fontSize="12px",this.linkElem.style.fontFamily="Gill Sans, Sans-Serif",this.linkElem.style.height=""+(this.height()-4)+"px",this.linkElem.style.letterSpacing="1px",this.linkElem.style.paddingLeft="5px",this.linkElem.style.paddingTop="2px",this.linkElem.style.paddingBottom="2px",this.linkElem.style.textDecoration="none",this.linkElem.style.width=""+(this.width()-5)+"px",this.poweredByElem=document.createElement("span"),this.poweredByElem.style.color="rgba(255, 255, 255, .65)",this.poweredByElem.innerHTML="POWERED BY",this.wistiaElem=document.createElement("span"),this.wistiaElem.style.color="#fff",this.wistiaElem.innerHTML="WISTIA",a.elem.append(this.linkElem,this.poweredByElem),a.elem.append(this.linkElem,document.createTextNode(" ")),a.elem.append(this.linkElem,this.wistiaElem),a.elem.append(this.elem,this.linkElem)}return __extends(c,b),c.prototype.initialize=function(){return(this.video.params.branding||this.video.data.media.branding)&&this.turnOn(),this},c.prototype.setupBindings=function(){var b=this;return this.video.bind("widthchange",function(){return b.elem.style.width=""+b.width()+"px",b.linkElem.style.width=""+(b.width()-5)+"px"}),a.elem.bind(this.elem,"click",function(a){return a.stopPropagation()}),this.video.bind("play",function(){return b.showBeforePlay()})},c.prototype.height=function(){return 18},c.prototype.width=function(){return this.video.videoWidth()},c.prototype.show=function(){return"beforeplay"!==this.video.state()?c.__super__.show.apply(this,arguments):void 0},c.prototype.showBeforePlay=function(){return this.on()?(this.elem.style.height=""+this.height()+"px",this.elem.style.width=""+this.width()+"px",a.elem.removeClass(this.elem,"wistia_romulus_hidden"),a.elem.addClass(this.elem,"wistia_romulus_visible")):void 0},c.prototype.mouseover=function(){return this.linkElem.style.textShadow="0 0 8px rgba(255, 255, 255, .8)"},c.prototype.mouseout=function(){return this.linkElem.style.textShadow="none"},c.prototype.updateColor=function(){return this.elem.style.backgroundColor=this.primaryColor().alpha(.8).toRgba()},c}(a.Romulus.Control)}(Wistia);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){return a.Romulus.Loading?void 0:a.Romulus.Loading=function(b){function c(b){this.video=b,this.name="loading",c.__super__.constructor.call(this,this.video),this.elem.innerHTML="Loading...",this.elem.style.position="absolute",this.elem.style.display="none",this.elem.style.left="0px",this.elem.style.top="0px",this.elem.style.backgroundColor=this.primaryColor().toRgba(),this.elem.style.color="rgba(255, 255, 255, .8)",this.elem.style.fontFamily="Arial, Sans-Serif",this.elem.style.fontStyle="italic",this.elem.style.lineHeight="1.1em",this.elem.style.padding="2px 5px",this.elem.style.display="none",a.elem.removeClass(this.elem,"wistia_romulus_hidden"),a.elem.removeClass(this.elem,"wistia_romulus_visible")}return __extends(c,b),c.prototype.initialize=function(){return this},c.prototype.showSoon=function(){var b=this;if(!this._showingSoon)return this._showingSoon=!0,a.timeout(""+this.video.uuid+".show_loading",function(){return b.show()},1e3),this.video.bind("timechange",function(a){return b.cancelShow(),b.video.unbind}),null==this._hideIfNotPlaying&&(this._hideIfNotPlaying=function(){return"paused"===b.video.state()||"ended"===b.video.state()?b.cancelShow():a.timeout(""+b.video.uuid+".hide_if_paused",b._hideIfNotPlaying,500)}),this._hideIfNotPlaying()},c.prototype.cancelShow=function(){return this._showingSoon=!1,a.clearTimeouts(""+this.video.uuid+".show_loading"),a.clearTimeouts(""+this.video.uuid+".hide_if_paused"),this.hide()},c.prototype.setupBindings=function(){var a=this;return this.video.bind("waiting",function(){return a.showSoon()}),this.video.bind("play",function(){return a.showSoon()}),this.video.bind("seek",function(){return"playing"===a.video.state()?a.showSoon():void 0}),this.video.bind("show-controls",function(){return a.video.branding.on()?a.elem.style.top="18px":a.elem.style.top="0px"}),this.video.bind("hide-controls",function(){return a.elem.style.top="0px"})},c.prototype.show=function(){return this.elem.style.display="block"},c.prototype.hide=function(){return this.elem.style.display="none"},c.prototype.updateColor=function(){return this.elem.style.backgroundColor=this.primaryColor().toRgba()},c}(a.Romulus.Control)}(Wistia);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},__slice=[].slice;!function(a){return a.Romulus.ContextMenu?void 0:a.Romulus.ContextMenu=function(b){function c(b){this.video=b,this.name="context_menu",this.showed=new Wistia.StopGo,c.__super__.constructor.call(this,this.video),this.elem.style.backgroundColor="#fff",this.elem.style.boxShadow="0px 3px 10px rgba(0,0,0,.2)",this.elem.style.height="",this.elem.style.left="0px",this.elem.style.lineHeight="1.5em",
this.elem.style.position="absolute",this.elem.style.textShadow="none",this.elem.style.top="0px",this.elem.style.width=""+this.width()+"px",this.elem.style.zIndex=1e5,a.elem.addClass(this.elem,"wistia_context_menu"),a.elem.removeClass(this.elem,"wistia_romulus_hidden"),a.elem.removeClass(this.elem,"wistia_romulus_visible"),this.items=[],this.setupItems()}return __extends(c,b),c.prototype.initialize=function(){return this.turnOn(),this},c.prototype.turnOn=function(){var a=this;return c.__super__.turnOn.apply(this,arguments),this.dontAnimate(this.elem,function(){return a.hide()})},c.prototype.hide=function(){return this.elem.style.display="none"},c.prototype.show=function(){return this.elem.style.display="block"},c.prototype.setupBindings=function(){var b=this;return null==this._showContextMenuOnRightClick&&(this._showContextMenuOnRightClick=function(c){return a.detect.mac&&c.altKey||!a.detect.mac&&c.ctrlKey||(c.preventDefault(),b.showed(!0),b.show(),b.repositionFromEvent(c),b._suppressHide=!0,a.timeout(""+b.video.uuid+".contextmenu.suppress_hide",function(){return b._suppressHide=!1},200)),!0}),a.elem.rebind(this.video.romulusElem,"contextmenu",this._showContextMenuOnRightClick),null==this._hideContextMenuOnClickOutside&&(this._hideContextMenuOnClickOutside=function(c){return b._suppressHide?void 0:a.elem.isInside(c.target,b.elem)?void 0:b.hide()}),a.elem.rebind(document,"mouseup",this._hideContextMenuOnClickOutside),this.video.bind("enter-fullscreen",function(){return b.hide()}),this.video.bind("cancel-fullscreen",function(){return b.hide()}),null==this._onSwitchedAsset&&(this._onSwitchedAsset=function(a){return"hdmp4"===a?b.playingIn.innerHTML="Playing in HD":b.playingIn.innerHTML="Playing in SD","hdmp4"===b.video._forceAsset?(b.deactivateItems("sdOnly","autoHd"),b.activateItem("hdOnly")):/iphone|mdmp4/.test(b.video._forceAsset)?(b.deactivateItems("hdOnly","autoHd"),b.activateItem("sdOnly")):(b.deactivateItems("sdOnly","hdOnly"),b.activateItem("autoHd"))}),this.video.bind("switched-to-asset",this._onSwitchedAsset),this.video.bind("switched-to-asset-without-load",this._onSwitchedAsset)},c.prototype.repositionFromEvent=function(b){var c,d,e,f,g;return f=this.video.inFullscreen()?{left:a.util.scrollLeft(),top:a.util.scrollTop()}:a.elem.offset(this.video.romulusElem),d=b.pageX-f.left,g=b.pageY-f.top,e=d+this.width(),c=g+this.height(),e>this.video.videoWidth()&&(d-=this.width()-1),c>this.video.videoHeight()&&(g-=this.height()-1),this.elem.style.left=""+Math.max(0,d)+"px",this.elem.style.top=""+Math.max(0,g)+"px",this.fixZoom()},c.prototype.fixZoom=function(){var a;return this.elem.style.zoom=1,a=this.height()>this.video.videoHeight()?this.video.videoHeight()/this.height():1,this.elem.style.zoom=a},c.prototype.setupItems=function(){var b,c=this;return this.addMenuItem("playingIn",{innerHTML:"Playing in SD",events:{click:function(a){return a.stopPropagation(),c.hide()}},"class":"wistia_disabled"}),this.video.data.media.assets.hdmp4&&(this.addHr(),this.addMenuItem("autoHd",{innerHTML:"<span id='autoHdBullet' class='wistia_bullet'>&#9633;</span> Auto HD",events:{click:function(a){return a.stopPropagation(),c.video._forceAsset=null,c.video.switchToAsset(c.video.bestAsset()),c.activateItem("autoHd"),c.deactivateItems("hdOnly","sdOnly"),c.hide()}}}),this.activateItem("autoHd"),this.addMenuItem("hdOnly",{innerHTML:"<span id='hdOnlyBullet' class='wistia_bullet'>&#9633;</span> HD only",events:{click:function(a){return a.stopPropagation(),c.video._forceAsset=null,c.video.forceSwitchToAsset("hdmp4"),c.activateItem("hdOnly"),c.deactivateItems("autoHd","sdOnly"),c.hide()}}}),this.addMenuItem("sdOnly",{innerHTML:"<span id='sdOnlyBullet' class='wistia_bullet'>&#9633;</span> SD only",events:{click:function(a){return a.stopPropagation(),c.video._forceAsset=null,c.video.forceSwitchToAsset(c.video.bestNonFullscreenAsset()),c.activateItem("sdOnly"),c.deactivateItems("autoHd","hdOnly"),c.hide()}}})),(null!=(b=a.detect.flash)?b.version:void 0)>=9&&(this.addHr(),this.addMenuItem("switchToFlash",{innerHTML:"Switch to Flash",events:{click:function(a){return a.stopPropagation(),c.video.savePlatformPreference("flash"),c.video.rebuildAs("flash"),c.video.trigger("widthchange"),c.video.trigger("heightchange"),c.hide()}}})),this.video.data.media.showAbout&&(this.addHr(),this.addMenuItem("aboutWistia",{tagName:"a",href:"http://wistia.com",target:"_blank",innerHTML:"About Wistia",style:{display:"block",textDecoration:"none"},events:{click:function(a){return a.stopPropagation(),c.hide()}}})),this.showed(function(){return a.jsonp.get("//"+a.constant.appHost+"/media_url",{hashed_id:c.video.hashedId()},function(b){var d,e;return b.logged_in&&!c.onPageUrl(b.media_url)?(d=b.whitelabel?"Logged In to Account":"Logged In to Wistia",a.elem.remove(c.aboutWistia),c.addMenuItem("loggedIn",{innerHTML:d,"class":"wistia_disabled wistia_title",events:{click:function(a){return a.stopPropagation(),c.hide()}}}),e=b.whitelabel?"Open video in account":"Open video in Wistia",c.addMenuItem("viewInWistia",{tagName:"a",href:b.media_url,target:"_blank",innerHTML:e,style:{display:"block",textDecoration:"none"},events:{click:function(a){return a.stopPropagation(),c.hide()}}}),c.fixZoom()):void 0})}),this.video.data.media.assets.hdmp4&&"hd-only"===this.video.params.videoQuality?(this.activateItem("hdOnly"),this.deactivateItems("autoHd","sdOnly")):void 0},c.prototype.addMenuItem=function(b,c){var d;return d=a.elem.fromObject(c),d.id=b,a.elem.addClass(d,"wistia_menu_item"),a.elem.addClass(d,"wistia_menu_item_"+b),a.elem.bind(d,"mousedown",function(a){return a.preventDefault()}),a.elem.append(this.elem,d),this[b]=d,this.items.push(d)},c.prototype.onPageUrl=function(b){var c,d;return d=a.url.parse(location.href),c=a.url.parse(b),d.params={},d.protocol="http:",c.params={},c.protocol="http:",d.absolute()===c.absolute()},c.prototype.addHr=function(){return a.elem.append(this.elem,a.elem.fromObject({style:{fontSize:"0px",height:"0px",lineHeight:"0px",borderTop:"1px solid #e8e8e8",margin:"1px 0"}}))},c.prototype.activateItem=function(a){var b;return null!=(b=document.getElementById(""+a+"Bullet"))?b.innerHTML="&#9679;":void 0},c.prototype.deactivateItem=function(a){var b;return null!=(b=document.getElementById(""+a+"Bullet"))?b.innerHTML="&#9633;":void 0},c.prototype.deactivateItems=function(){var a,b,c,d,e;for(b=1<=arguments.length?__slice.call(arguments,0):[],e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(this.deactivateItem(a));return e},c.prototype.hideItem=function(b){return a.elem.removeClass(this[b],"wistia_visible"),a.elem.addClass(this[b],"wistia_hidden")},c.prototype.showItem=function(b){return a.elem.removeClass(this[b],"wistia_hidden"),a.elem.addClass(this[b],"wistia_visible")},c.prototype.visibleItems=function(){var a,b,c,d,e;for(d=this.items,e=[],b=0,c=d.length;c>b;b++)a=d[b],"none"!==a.style.display&&e.push(a);return e},c.prototype.height=function(){return a.elem.height(this.elem)},c.prototype.width=function(){return 200},c.prototype.updateColor=function(){},c}(a.Romulus.Control)}(Wistia);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},__slice=[].slice;!function(a){var b,c;if(null!=(c=a._embed)?!c.RomulusVideo:!0)return a._embed.RomulusVideo=function(b){function c(){c.__super__.constructor.apply(this,arguments),"hdmp4"===this.data.asset.type?this._sdAsset=this.bestNonFullscreenAsset():this._sdAsset=this.data.asset.type}return __extends(c,b),c.prototype.embedType="romulus",c.prototype.elem=function(){return document.getElementById(this.uuid)},c.prototype.embed=function(){var b=this;return this._lastTimePosition=0,this._beforePlay=!0,this.embedAs("romulus"),this.videoElem=document.getElementById(this.uuid),this.romulusElem=document.getElementById(""+this.uuid+"_romulus"),this.sourceElem=document.getElementById(""+this.uuid+"_source"),this.tracker||(this.tracker=a.tracker(this)),this.params.shouldTrack&&this.tracker.monitor(),this.listenForEvents(),this.setupCss(),this.setupControls(),this.setupBindings(),a.elem.bind(this.videoElem,"loadstart",function(){return b.ready(!0)}),this.fixWebkitControlsBug(),this.data.media.assets.hdmp4&&"hd-only"===this.params.videoQuality?(this._forceAsset="hdmp4",this.trigger("switched-to-asset-without-load","hdmp4")):this.data.media.assets.iphone&&"sd-only"===this.params.videoQuality?(this._forceAsset=this.bestNonFullscreenAsset(),this.trigger("switched-to-asset-without-load",this._forceAsset)):void 0},c.prototype.fit=function(){var a=this;return c.__super__.fit.apply(this,arguments),this.embedded(function(){var b,c;return a.correctForIntegers(),a.repositionControls(),null!=(b=a.still)&&b.fitStill(),null!=(c=a.bigPlayButton)?c.reorient():void 0})},c.prototype.correctForIntegers=function(){var b,c,d,e,f,g,h;if(!a.detect.iphone&&!a.detect.ipad)return c=Math.round(this.videoWidth()/this.aspect()),b=this.videoHeight(),d=c-b,d>=1&&6>d?(null!=(e=this.videoElem)&&(e.style.height="calc(100% + "+d+"px)"),null!=(f=this.videoElem)?f.style.width="100%":void 0):(null!=(g=this.videoElem)&&(g.style.width="100%"),null!=(h=this.videoElem)?h.style.height="100%":void 0)},c.prototype.switchToAsset=function(b,c){var d,e,f=this;return null==c&&(c=!1),c||b!==this.data.asset.type?(e=this.time(),d=this.state(),this._suppressTimechange=!0,a.elem.bind(this.videoElem,"loadeddata",function(){return c?(f.videoElem.style.visibility="",f._suppressTimechange=!1):e>2?(f.time(e),f.notSeeking(function(){return f.ready("playing"===d?function(){return f.videoElem.play(),f._suppressTimechange=!1,f.videoElem.style.visibility="",f.trigger("switched-to-asset",b)}:function(){return f.videoElem.pause(),f.videoElem.style.visibility="",f._suppressTimechange=!1,f.trigger("switched-to-asset",b)})})):("playing"===d&&f.play(),f.videoElem.style.visibility="",f._suppressTimechange=!1),1!==f._playbackRate&&f.playbackRate(f._playbackRate),a.elem.unbind}),this.videoElem.style.visibility="hidden",this.switchToAssetWithoutLoad(b,c),this.videoElem.load(),"beforeplay"!==d?this.videoElem.play():void 0):void 0},c.prototype.switchToAssetWithoutLoad=function(b,c){var d;return null==c&&(c=!1),(c||b!==this.data.asset.type)&&a.elem.inDom(this.videoElem)?(d=this.data.media.assets[b],this.data.asset=d,this.videoElem.src=this.sourceElem.src=d.url.replace(/\.bin$/,"/file.mp4"),this.trigger("switched-to-asset-without-load",b)):void 0},c.prototype.forceSwitchToAsset=function(a){return this._forceAsset=a,"beforeplay"===this.state()?this.switchToAssetWithoutLoad(a):this.switchToAsset(a)},c.prototype.requestFullscreen=function(){var b,c,d,e,f,g;if(!this.inFullscreen()){this._widthBeforeFullscreen=this.width(),this._heightBeforeFullscreen=this.height(),this._cssBeforeFullscreen={},f=this.container.style;for(b in f)c=f[b],this._cssBeforeFullscreen[b]=c;for(g="margin border padding top left".split(" "),d=0,e=g.length;e>d;d++)b=g[d],this.container.style[b]&&(this.container.style[b]="0px");return this.container.style.position&&(this.container.style.position="static"),a.elem.requestFullscreen(this.fullscreenContainer)}},c.prototype.cancelFullscreen=function(){return this.inFullscreen()?a.elem.cancelFullscreen():void 0},c.prototype.inFullscreen=function(){return!!this._inFullscreen},c.prototype.setupBindings=function(){return this.setupPlayerApiBindings(),this.setupDomBindings(),this.setupVideoBindings(),this.setupFullscreenBindings(),this.setupKeyBindings()},c.prototype.setupPlayerApiBindings=function(){return this.listenForEvents(),this.pollForEvents()},c.prototype.setupDomBindings=function(){var b=this;return null==this._onMouseoverVideo&&(this._onMouseoverVideo=function(c){return a.elem.containsOffset(b.romulusElem,c.pageX,c.pageY)&&(b._keyBindingsActive=!0,b._mouseover=!0),!0}),a.elem.rebind(this.romulusElem,"mouseover",this._onMouseoverVideo),null==this._onMousemoveVideo&&(this._onMousemoveVideo=function(c){return a.elem.containsOffset(b.romulusElem,c.pageX,c.pageY)&&(b._keyBindingsActive=!0,b._mouseover=!0),!0}),a.elem.rebind(this.romulusElem,"mousemove",this._onMousemoveVideo),null==this._onMouseoutVideo&&(this._onMouseoutVideo=function(c){return a.elem.containsOffset(b.romulusElem,c.pageX,c.pageY)||(b._keyBindingsActive=!1,b._mouseover=!1),!0}),a.elem.rebind(this.romulusElem,"mouseout",this._onMouseoutVideo),null==this._onMouseLeavesWindow&&(this._onMouseLeavesWindow=function(a){var c;return c=a.relatedTarget||a.toElement,c&&"HTML"!==c.nodeName||(b._mouseover=!1,b._keyBindingsActive=!1),!0}),a.elem.rebind(document,"mouseout",this._onMouseLeavesWindow),null==this._onClickVideo&&(this._onClickVideo=function(a){return a.target===b.videoElem&&(b.togglePlay(),b.showControls()),!0}),a.elem.rebind(this.romulusElem,"click",this._onClickVideo),null==this._showControlsOnMouseover&&(this._showControlsOnMouseover=function(a){return"beforeplay"!==b.state()&&b.showControls(),!0}),a.elem.rebind(this.romulusElem,"mouseover",this._showControlsOnMouseover),null==this._hideControlsOnMouseout&&(this._hideControlsOnMouseout=function(c){return b.inFullscreen()?b.showControls():"beforeplay"!==b.state()&&!a.elem.containsOffset(b.romulusElem,c.pageX,c.pageY)&&b.hideControls(),!0}),a.elem.rebind(this.romulusElem,"mouseout",this._hideControlsOnMouseout),null==this._showControlsOnMousemove&&(this._showControlsOnMousemove=function(a){return"beforeplay"===b.state()||b._suppressShowControls?void 0:b.showControls()}),a.elem.rebind(this.romulusElem,"mousemove",this._showControlsOnMousemove),null==this._fullscreenResizeToWindow&&(this._fullscreenResizeToWindow=function(c){return b.inFullscreen()?(b.width(a.elem.width(window),{fullscreen:!0}),b.height(a.elem.height(window)-1,{fullscreen:!0})):void 0}),a.elem.rebind(window,"resize",this._fullscreenResizeToWindow)},c.prototype.setupVideoBindings=function(){var a=this;return this.bind("private-control-on",function(){return a.repositionControls()}),this.bind("private-control-off",function(){return a.repositionControls()}),this.bind("private-widthchange",function(){return a.repositionControls()}),this.bind("private-heightchange",function(){return a.repositionControls()}),this.bandwidthInfoFresh()?this._supportsHd=this.bandwidthInfo.supportsHd:this.data.media.assets.hdmp4&&null==this._supportsHd&&this.bind("private-play",function(){return a.doBandwidthTest(),a.unbind}),this.bind("private-play",function(){return a._beforePlay=!1}),this.bind("private-end",function(){return"reset"===a.params.endVideoBehavior?a.resetToFirstFrame():void 0}),this.bind("private-end",function(){return a.hasPostRoll?a.cancelFullscreen():void 0})},c.prototype._wipeOutstandingAsyncFunctions=function(){var a,b,d,e,f,g;for(c.__super__._wipeOutstandingAsyncFunctions.apply(this,arguments),d=function(){var c,d;c=this._bindings,d=[];for(b in c)a=c[b],/^private-/.test(b)&&d.push(b);return d}.call(this),g=[],e=0,f=d.length;f>e;e++)b=d[e],g.push(this.unbind(b));return g},c.prototype.setupFullscreenBindings=function(){var b=this;return null==this._onEnterFullscreen&&(this._onEnterFullscreen=function(c){return c===b.fullscreenContainer&&(b._inFullscreen=!0,b.notFullscreen(!1),b.showControls(),b.width(a.elem.width(window),{fullscreen:!0}),b.height(a.elem.height(window)-1,{fullscreen:!0}),b.videoElem.style.background="#000",b.switchToAsset(b.bestFullscreenAsset()),b.notFullscreen(function(){return b.width(b._widthBeforeFullscreen),b.height(b._heightBeforeFullscreen)}),b.trigger("enter-fullscreen")),!0}),a.bind("enter-fullscreen",this._onEnterFullscreen),null==this._onCancelFullscreen&&(this._onCancelFullscreen=function(){var a,c,d;if(b._inFullscreen){b._inFullscreen=!1,b.hideControls(),b.videoElem.style.background="transparent",b.switchToAsset(b.bestNonFullscreenAsset()),b.showControls(),b.notFullscreen(!0),d=b._cssBeforeFullscreen;for(a in d)c=d[a],b.container.style[a]=c;b.fit,b.trigger("cancel-fullscreen")}return!0}),a.bind("cancel-fullscreen",this._onCancelFullscreen)},c.prototype.setupKeyBindings=function(){var b=this;return a.elem.bind(document,"keydown",function(a){var c,d;return c=/^(input|textarea|select)$/i.test(null!=(d=document.activeElement)?d.tagName:void 0),b._keyBindingsActive&&!c&&(32===a.which?(b.togglePlay(),b.showControls(),a.preventDefault()):37===a.which?(b.time("playing"!==b.state()?a.shiftKey?b.time()-1:b.time()-1/24:a.shiftKey?b.time()-30:b.time()-10),b.showControls()):39===a.which?(b.time("playing"!==b.state()?a.shiftKey?b.time()+1:b.time()+1/24:a.shiftKey?b.time()+30:b.time()+10),b.showControls()):38===a.which?a.shiftKey?(b.volume(b.volume()+.1),b.showControls()):(b.volume(b.volume()+.01),b.showControls()):40===a.which?a.shiftKey?(b.volume(b.volume()-.1),b.showControls()):(b.volume(b.volume()-.01),b.showControls()):(null==b.params.fullscreenButton||b.params.fullscreenButton===!0)&&(70===a.which?b.requestFullscreen():13===a.which&&(a.altKey||a.metaKey)?b.requestFullscreen():122===a.which&&b.requestFullscreen())),!0})},c.prototype.showControls=function(){var b,c,d,e,f=this;for(e=this._controls,c=0,d=e.length;d>c;c++)b=e[c],b.show();return this.bigPlayButton.show(),a.timeout(""+this.uuid+".hide_controls_if_no_movement",function(){return f.inFullscreen()&&f._mouseover?f.hideControls():void 0},2500),this.showCursor(),this._controlsVisible=!0,this.trigger("show-controls")},c.prototype.previewControls=function(){return this._previewControls=!0,this.showControls(),this._previewControls=!1},c.prototype.hideControls=function(){var a,b,c,d;for(d=this._controls,b=0,c=d.length;c>b;b++)a=d[b],("bigPlayButton"!==a.name||"beforeplay"!==this.state())&&a.hide();return this.inFullscreen()&&this.hideCursor(),this._controlsVisible=!1,this.trigger("hide-controls")},c.prototype.hideCursor=function(){var b=this;return this._suppressShowControls=!0,this.container.style.cursor="none",a.timeout(""+this.uuid+".suppress_show_controls",function(){return b._suppressShowControls=!1},500)},c.prototype.showCursor=function(){return this.container.style.cursor=""},c.prototype.listenForEvents=function(){var b=this;return null==this.playRelay&&(this.playRelay=function(){return b.trigger("play")}),null==this.pauseRelay&&(this.pauseRelay=function(){return b.trigger("pause")}),null==this.endRelay&&(this.endRelay=function(){return b.trigger("end")}),null==this.volumechangeRelay&&(this.volumechangeRelay=function(){return b.trigger("volumechange",b.volume())}),null==this.waitingRelay&&(this.waitingRelay=function(){return b.trigger("waiting")}),a.elem.rebind(this.videoElem,"pause",this.pauseRelay),a.elem.rebind(this.videoElem,"playing",this.playRelay),a.elem.rebind(this.videoElem,"ended",this.endRelay),a.elem.rebind(this.videoElem,"volumechange",this.volumechangeRelay),a.elem.rebind(this.videoElem,"waiting",this.waitingRelay)},c.prototype.pollForEvents=function(){var b=this;this._fireIfChanged=function(){var c,d,e;a.timeout(""+b.uuid+".fire_if_changed",function(){return b._fireIfChanged()},b._eventLoopDuration),b.isDown()||(c=b.state(),"playing"===c&&c===b._lastState&&b.time()===(e=b._lastTimePosition)&&e<b._eventLoopDuration&&b.trigger("waiting"),c!==b._lastState&&(b.trigger("statechange",c),b._lastState=c,b.playing("playing"===c?!0:!1)),(d=b.time())!==b._lastTimePosition&&d>0&&(b.trigger("timechange",d),Math.floor(d)!==Math.floor(b._lastTimePosition)&&b.trigger("secondchange",Math.floor(d)),Math.abs(d-b._lastTimePosition)>b.params.seekThreshold&&b.trigger("seek",d,b._lastTimePosition),b._lastTimePosition=d))},this._fireIfChanged()},c.prototype.doBandwidthTest=function(){var b,c,d,e,f,g,h=this;for(null!=(f=this._testXhr)&&f.abort(),this._testStart=(new Date).getTime(),this._testXhr=new XMLHttpRequest,this._testXhr.open("GET",this.testFileUrl(),!0),this._failBandwidthTestOnWaiting=function(){return h.bandwidthTestFailed(),h.unbind},this.bind("private-waiting",this._failBandwidthTestOnWaiting),c="iphone"===this.data.asset.type?4e3:5e3,a.timeout(""+this.uuid+".cancel_bandwidth_test",function(){return h.bandwidthTestFailed()},c),this._testDataLoaded=0,this._onTestXhrProgress=function(){return h._testDataLoaded=b.loaded},this._testXhr.addEventListener("progress",this._onTestXhrProgress),null==this._endBandwidthTestEarly&&(this._endBandwidthTestEarly=function(){return h.bandwidthTestEndedEarly()}),g=["seek","pause","end"],d=0,e=g.length;e>d;d++)b=g[d],this.bind("private-"+b,this._endBandwidthTestEarly);return this._onTestXhrLoaded=function(a){return h.bandwidthTestSucceeded()},this._testXhr.addEventListener("load",this._onTestXhrLoaded),this._testXhr.send(null)},c.prototype.bandwidthTestFailed=function(){return this._supportsHd=!1,this.saveBandwidthInfo(),this.endBandwidthTest()},c.prototype.bandwidthTestSucceeded=function(){return this._supportsHd=!0,this.saveBandwidthInfo(),this.endBandwidthTest()},c.prototype.bandwidthTestEndedEarly=function(){var a,b;return null==this._supportsHd&&null!=this._testDataLoaded?(this._testEnd=(new Date).getTime(),b=(this._testEnd-this._testStart)/1e3,a=8*this._testDataLoaded/1e3/b,this._supportsHd=b>1&&a>=2500,this.endBandwidthTest()):void 0},c.prototype.endBandwidthTest=function(){var b,c,d,e,f,g,h,i;if(this._onTestXhrLoaded&&null!=(e=this._testXhr)&&e.removeEventListener("load",this._onTestXhrLoaded),this._onTestXhrProgress&&null!=(f=this._testXhr)&&f.removeEventListener("progress",this._onTestXhrProgress),null!=(g=this._testXhr)&&g.abort(),this._testXhr=null,a.clearTimeouts(""+this.uuid+".cancel_bandwidth_test"),this._failBandwidthTestOnWaiting&&this.unbind("waiting",this._failBandwidthTestOnWaiting),this._endBandwidthTestEarly){for(h=["seek","pause","end"],i=[],c=0,d=h.length;d>c;c++)b=h[c],i.push(this.unbind("private-"+b,this._endBandwidthTestEarly));return i}},c.prototype.saveBandwidthInfo=function(){return a.localStorage("romulus.bandwidth",{updatedAt:(new Date).getTime(),supportsHd:this._supportsHd})},c.prototype.bandwidthInfo=function(){return a.localStorage("romulus.bandwidth")},c.prototype.bandwidthInfoFresh=function(){var a,b;return a=(new Date).getTime()-((null!=(b=this.bandwidthInfo())?b.updatedAt:void 0)||0),36e5>a},c.prototype.supportsHd=function(){return this.data.media.assets.hdmp4?null!=this._supportsHd?this._supportsHd:!0:!1},c.prototype.testFileUrl=function(){return""+a.proto()+"//"+a.constant.embedHost+"/bandwidth_check.png?bust=20131016c"},c.prototype.bestNonFullscreenAsset=function(){return this._forceAsset?this._forceAsset:this.data.media.assets[this._sdAsset]?this._sdAsset:"iphone"},c.prototype.bestFullscreenAsset=function(){return this._forceAsset?this._forceAsset:this.supportsHd()?"hdmp4":this._sdAsset},c.prototype.bestAsset=function(){return this.inFullscreen()?this.bestFullscreenAsset():this.bestNonFullscreenAsset()},c.prototype.rangeBuffered=function(){var a,b,c,d,e,f;for(b=d=0,e=this.videoElem.buffered.length;e>=0?e>d:d>e;b=e>=0?++d:--d)if(c=this.videoElem.buffered.start(b),a=this.videoElem.buffered.end(b),c<=(f=this.time())&&a>f)return[c,a];return null},c.prototype.timeBuffered=function(){var a;return a=this.rangeBuffered(),a?a[1]-a[0]:0},c.prototype.togglePlay=function(){return"playing"===this.state()?this.pause():this.play()},c.prototype.fixWebkitControlsBug=function(){return a.detect.browser.webkit?(this.videoElem.setAttribute("controls","controls"),this.videoElem.removeAttribute("controls")):void 0},c.prototype.play=function(){var b=this;return this.suppressPlay()?this:(this._issuedPlay=!0,this.trigger("startplay"),a.StopGo.when(this.ready,this.notSeeking).run(function(){return b.videoElem.play()}),this.playing(function(){return b._issuedPlay=!1}),this)},c.prototype.pause=function(){var b=this;return this._issuedPlay=!1,a.StopGo.when(this.ready,this.notSeeking).run(function(){return b.videoElem.pause()}),this},c.prototype.time=function(b){var c,d=this;return null!=b?(b=Math.max(0,Math.min(this.duration(),b)),this.notSeeking(!1),"beforeplay"===this.state()?(c=this._issuedPlay,a.StopGo.when(this.ready,this.playing).run(function(){return d.videoElem.currentTime=b,c||d.videoElem.pause(),d._sayWhenDoneSeeking(),d.notSeeking(function(){return d.videoElem.style.visibility=""})}),this.videoElem.style.visibility="hidden",this.ready(function(){return d.trigger("startplay"),d.videoElem.play()})):this.ready(function(){return d.videoElem.currentTime=b,d._sayWhenDoneSeeking()}),this):this.videoElem.currentTime},c.prototype._sayWhenDoneSeeking=function(){var b=this;return this.videoElem.seeking?a.elem.bind(this.videoElem,"seeked",function(){return b.notSeeking(!0),a.elem.unbind}):this.notSeeking(!0)},c.prototype.volume=function(a){var b=this;return null!=a?(a=Math.max(0,Math.min(1,a)),this.ready(function(){return b.videoElem.volume=a}),this):this.videoElem.volume||0},c.prototype.trigger=function(){var a,b,d;return b=arguments[0],a=2<=arguments.length?__slice.call(arguments,1):[],d="private-"+b,"timechange"===b&&this._suppressTimechange?c.__super__.trigger.apply(this,[d].concat(__slice.call(a))):"secondchange"===b&&this._suppressTimechange?c.__super__.trigger.apply(this,[d].concat(__slice.call(a))):(c.__super__.trigger.apply(this,[b].concat(__slice.call(a))),c.__super__.trigger.apply(this,[d].concat(__slice.call(a))))},c.prototype.state=function(){var a;try{return this.videoElem.ended?"ended":this._beforePlay?"beforeplay":this.videoElem.paused?"paused":"playing"}catch(b){return a=b,"unknown"}},c.prototype.setupControls=function(){var b,c=this;try{return this.still=new a.Romulus.Still(this).initialize(),"transparent"!==this.params.wmode&&this.still.loaded(function(){return c.romulusElem.style.backgroundColor="#000"}),this._controls=[this.smallPlayButton=new a.Romulus.SmallPlayButton(this).initialize(),this.playbarControl=new a.Romulus.PlaybarControl(this).initialize(),this.volumeControl=new a.Romulus.VolumeControl(this).initialize(),this.fullscreenButton=new a.Romulus.FullscreenButton(this).initialize(),this.branding=new a.Romulus.Branding(this).initialize()],this.bigPlayButton=new a.Romulus.BigPlayButton(this).initialize(),this.loading=new a.Romulus.Loading(this).initialize(),this.contextMenu=new a.Romulus.ContextMenu(this).initialize(),this._allControls=[this.smallPlayButton,this.playbarControl,this.volumeControl,this.fullscreenButton,this.branding,this.bigPlayButton,this.loading,this.still],this._bottomLeftControls=[this.smallPlayButton],this._bottomRightControls=[this.fullscreenButton,this.volumeControl],this.resetControls()}catch(d){return b=d,"undefined"!=typeof console&&null!==console&&console.log(b.message),"undefined"!=typeof console&&null!==console?console.log(b.stack):void 0}},c.prototype.resetControls=function(){return this.repositionControls(),this.bigPlayButton.show(),"beforeplay"===this.state()&&this.still.show(),this.params.controlsVisibleOnLoad?this.showControls():this.hideControls()},c.prototype.setupCss=function(){return a.css("#"+this.fullscreenContainer.id+":fullscreen,\n#"+this.fullscreenContainer.id+":-webkit-full-screen,\n#"+this.fullscreenContainer.id+":-moz-full-screen {\nbackground:#000;\n}\n#"+this.container.id+" .wistia_romulus_control {\n  -webkit-font-smoothing: antialiased;\n  z-index: 1;\n}\n#"+this.container.id+" .wistia_romulus_hidden {\n  opacity: 0;\n  "+a.util.transitionCss(["opacity","200ms"],["width","0s","200ms"],["height","0s","200ms"])+"\n}\n#"+this.container.id+" .wistia_romulus_visible {\n  opacity: 1;\n  visibility: visible;\n  "+a.util.transitionCss(["opacity","200ms"])+"\n}\n#"+this.container.id+" .wistia_played {\n  "+a.util.transitionCss("width",""+this._eventLoopDuration+"ms")+"\n}\n#"+this.container.id+" .wistia_playbar.wistia_dragging .wistia_played {\n  "+a.util.transitionCss("left","0")+"\n}\n#"+this.container.id+" .wistia_scrub_bar {\n  "+a.util.transitionCss("left",""+this._eventLoopDuration+"ms")+"\n}\n#"+this.container.id+" .wistia_playbar.wistia_dragging .wistia_scrub_bar {\n  "+a.util.transitionCss("left","0")+"\n}\n#"+this.container.id+" .wistia_scrub_bar_top {\n  background: rgba(255, 255, 255, .33);\n  height: 4px;\n  left: 0;\n  position: absolute;\n  top: 0;\n  width: 4px;\n}\n#"+this.container.id+" .wistia_scrub_bar_middle {\n  background: rgba(255, 255, 255, .66);\n  height: 24px;\n  left: 0;\n  position: absolute;\n  top: 4px;\n  width: 4px;\n}\n#"+this.container.id+" .wistia_scrub_bar_bottom {\n  background: rgba(255, 255, 255, .33);\n  height: 4px;\n  left: 0;\n  position: absolute;\n  top: 28px;\n  width: 4px;\n}\n#"+this.container.id+" .wistia_menu_item {\n  background: transparent;\n  color: #555;\n  font-family: Arial, Sans-Serif;\n  font-size: 14px;\n  font-weight: normal;\n  padding: 6px 16px;\n  transition: none;\n  -webkit-font-smoothing: antialiased;\n}\n#"+this.container.id+" .wistia_menu_item .wistia_bullet {\n  display: inline-block;\n  margin: -1px 7px 0 0;\n  vertical-align: top;\n}\n#"+this.container.id+" .wistia_menu_item.wistia_visible {\n  display: block;\n}\n#"+this.container.id+" .wistia_menu_item.wistia_hidden {\n  display: none;\n}\n#"+this.container.id+" .wistia_menu_item:hover {\n  background: #54bbff;\n  color: #fff;\n}\n#"+this.container.id+" .wistia_menu_item.wistia_disabled {\n  background: transparent;\n  color: #bbb;\n}\n#"+this.container.id+" .wistia_menu_item.wistia_title {\n  background: transparent;\n  color: #bbb;\n  font-size: 11px;\n  line-height: 1em;\n  padding-bottom: 3px;\n}\n#"+this.container.id+" .wistia_dont_animate {\n  -webkit-transition: none;\n  -moz-transition: none;\n  -o-transition: none;\n  -ms-transition: none;\n  transition: none;\n}\n#"+this.uuid+" {\n  -ms-object-fit: contain;\n  -o-object-fit: contain;\n  -moz-object-fit: contain;\n  -webkit-object-fit: contain;\n  object-fit: contain;\n}")},c.prototype.repositionControls=function(){return this.positionBottomLeftControls(),this.positionBottomRightControls(),this.playbarControl.reorient(),this.bigPlayButton.reorient()},c.prototype.positionBottomLeftControls=function(){var a,b,c,d,e,f;for(b=0,e=this._bottomLeftControls,f=[],c=0,d=e.length;d>c;c++)a=e[c],a.on()?(a.elem.style.left=""+b+"px",f.push(b+=a.width()+5)):f.push(void 0);return f},c.prototype.positionBottomRightControls=function(){var a,b,c,d,e,f;for(b=0,e=this._bottomRightControls,f=[],c=0,d=e.length;d>c;c++)a=e[c],a.on()?(a.elem.style.right=""+b+"px",f.push(b+=a.width()+5)):f.push(void 0);return f},c.prototype.leftControlsWidth=function(){var a,b,c,d,e;for(b=0,e=this._bottomLeftControls||[],c=0,d=e.length;d>c;c++)a=e[c],a.on()&&(b+=a.width()+5);return b},c.prototype.rightControlsWidth=function(){var a,b,c,d,e;for(b=0,e=this._bottomRightControls||[],c=0,d=e.length;d>c;c++)a=e[c],a.on()&&(b+=a.width()+5);return b},c.prototype.controlEnabled=function(a,b){return null==b?this[a].on():(b?this[a].turnOn():this[a].turnOff(),this.params.controlsVisibleOnLoad||"beforeplay"!==this.state()?this.showControls():void 0)},c.prototype.bigPlayButtonEnabled=function(a){return this.controlEnabled("bigPlayButton",a),this},c.prototype.smallPlayButtonEnabled=function(a){return this.controlEnabled("smallPlayButton",a),this},c.prototype.playbarControlEnabled=function(a){return this.controlEnabled("playbarControl",a),this},c.prototype.volumeControlEnabled=function(a){return this.controlEnabled("volumeControl",a),this},c.prototype.fullscreenButtonEnabled=function(a){return this.controlEnabled("fullscreenButton",a),this},c.prototype.playerColor=function(b){var c,d,e,f;if(null!=b){for(this.params.playerColor=new a.Color(b).toHex(),f=this._allControls,d=0,e=f.length;e>d;d++)c=f[d],c.updateColor();return this.showControls(),this}return this.params.playerColor},c.prototype.width=function(a,b){var d=this;return null==b&&(b={}),null!=a?b.fullscreen||!this.inFullscreen()?c.__super__.width.call(this,a,b):(this.notFullscreen(function(){return c.__super__.width.call(d,a,b)}),this):c.__super__.width.apply(this,arguments)},c.prototype.height=function(a,b){var d=this;return null==b&&(b={}),null!=a?b.fullscreen||!this.inFullscreen()?c.__super__.height.call(this,a,b):(this.notFullscreen(function(){return c.__super__.height.call(d,a,b)}),this):c.__super__.height.apply(this,arguments);
},c.prototype.videoWidth=function(a,b){var d=this;return null==b&&(b={}),null!=a?b.fullscreen||!this.inFullscreen()?c.__super__.videoWidth.call(this,a,b):(this.notFullscreen(function(){return c.__super__.videoWidth.call(d,a,b)}),this):c.__super__.videoWidth.apply(this,arguments)},c.prototype.videoHeight=function(a,b){var d=this;return null==b&&(b={}),null!=a?b.fullscreen||!this.inFullscreen()?c.__super__.videoHeight.call(this,a,b):(this.notFullscreen(function(){return c.__super__.videoHeight.call(d,a,b)}),this):c.__super__.videoHeight.apply(this,arguments)},c.prototype.playbackRate=function(a){return null!=this.videoElem.playbackRate?null!=a?(this.videoElem.playbackRate=a,this._eventLoopDuration=Math.max(50,Math.min(500,this._baseEventLoopDuration*a)),this._playbackRate=a,this):this.videoElem.playbackRate:c.__super__.playbackRate.call(this,a)},c.prototype._rebuildAs=function(a,b){return c.__super__._rebuildAs.call(this,a,b||this.params),this.switchToAssetWithoutLoad(this.bestAsset())},c.prototype._stopStreaming=function(){var a,b;return null!=(a=this.videoElem)&&(a.src=""),null!=(b=this.videoElem)?b.load():void 0},c.prototype.resetToFirstFrame=function(){var a=this;return this.time(.01).pause(),this.notSeeking(function(){return a._beforePlay=!0,a.resetControls()})},c.prototype.switchAllAssets=function(b,c){var d,e,f;return null==c&&(c={}),f=a.judy.judge(b,c),e=a.generate.stillUrl(f.media,{videoWidth:this.videoWidth(),videoHeight:this.videoHeight()}),this.still.img.src=e,this.data=a.obj.clone(f),this._sdAsset=this.bestNonFullscreenAsset(),d=this.inFullscreen()?this.bestFullscreenAsset():this._sdAsset,this.switchToAsset(d,!0)},c.prototype.replace=function(b,c){var d=this;return this.trigger("beforeremove"),a.clearTimeouts(this.uuid),c.container=this.container.id,this.options=c,this.inferParams(),this.switchAllAssets(b,c),this.playerColor(this.params.playerColor),this.resetControls(),this.pollForEvents(),this.ready(function(){var b;return null!=(b=d.tracker)&&b.stopMonitoring(),d.tracker=a.tracker(d),d.params.shouldTrack&&d.tracker.monitor(),d.params.autoPlay&&!d.suppressPlay()?d.videoElem.play():void 0})},c.prototype._removeContent=function(){return this.videoElem.src="",a.elem.remove(this.sourceElem),this.videoElem.load(),a.elem.remove(this.videoElem),a.elem.remove(this.romulusElem),this.sourceElem=this.videoElem=this.romulusElem=null,this.container?a.elem.remove(this.container.childNodes):void 0},c}(a._embed.Video),Wistia.data("onFullscreenChange")?void 0:(b=function(){return a.elem.fullscreenElement()?a.trigger("enter-fullscreen",a.elem.fullscreenElement()):a.trigger("cancel-fullscreen")},a.elem.bind(document,"mozfullscreenchange",b),a.elem.bind(document,"webkitfullscreenchange",b),a.elem.bind(document,"MSFullscreenChange",b),a.elem.bind(document,"fullscreenchange",b),a.data("onFullscreenChange",b))}(Wistia);var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){var b,c;if(null!=(b=a._embed)?!b.ExternalVideo:!0)return a._embed.ExternalVideo=function(b){function d(){return c=d.__super__.constructor.apply(this,arguments)}return __extends(d,b),d.prototype.embedType="external",d.prototype.elem=function(){return document.getElementById(this.uuid)},d.prototype.chromeElem=function(){return document.getElementById(""+this.uuid+"_external_player")},d.prototype.embed=function(){var b=this;return d.__super__.embed.apply(this,arguments),this.elem().wistiaApi=this,this.bigPlayButton=new a.Html5BigPlayButton(this).initialize(),this.bigPlayButton.elem.style.pointerEvents="none",this.elem()&&a.elem.append(this.elem(),this.bigPlayButton.elem),this.still=new a.Html5Still(this).initialize(),this.params.stillUrl=this.still.img.src,"transparent"!==this.params.wmode&&this.still.loaded(function(){var c;return b.elem()&&a.elem.prepend(b.elem(),b.still.elem),null!=(c=b.chromeElem())?c.style.backgroundColor="#000":void 0}),a.elem.bind(this.elem(),"click",function(){return b.trigger("play"),a.timeout(""+b.uuid+".fake_video_end",function(){return b.trigger("end")},500),!0}),this.tracker||(this.tracker=a.tracker(this)),a.timeout(""+this.uuid+".async_ready",function(){return b.isDown()?void 0:b.ready(!0)}),this},d.prototype.fit=function(){var a=this;return d.__super__.fit.apply(this,arguments),this.embedded(function(){var b,c;return null!=(b=a.still)&&b.fitStill(),null!=(c=a.bigPlayButton)?c.reorient():void 0})},d.prototype.play=function(){return this},d.prototype.time=function(a){return null!=a?this:0},d.prototype.pause=function(){return this},d.prototype.volume=function(a){return null!=a?this:1},d}(a._embed.Video)}(Wistia),function(a){return a.extend({tracker:function(b,c){return new a.VideoTracker(b,c||{})}}),a.VideoTracker=function(){function b(b,c){this.video=b,this.options=c,this.video.params.shouldTrack&&(this.params=a.extend({transmitInterval:1e3*(this.video.data.media.trackingTransmitInterval||10)},this.options),this.hasVisitorKey=new a.StopGo,this.eventQueue=[],this.clockStart=(new Date).getTime(),this._eventKey=this.newEventKey(),this.setupVisitorKey(),this.onPlay=this.onPause=this.onEnd=this.onSeek=function(){},this.monitoring=!1,this.dataPrefix="",this.dataSuffix="",this)}return b.prototype.conversions={"missing-conversion":0,"pre-roll-email":1,"post-roll-email":2,"mid-roll-email":3,"post-roll-click":4,"mid-roll-click":5,"non-video":6},b.prototype._dataPrefix=function(){var b;return b='{\n"account_key":"'+(this.video.params.accountKey||this.video.data.media.accountKey)+'",\n"session_id":"'+this._visitorKey+'",\n"media_id":"'+this.video.data.media.mediaKey+'",\n"event_key":"'+this._eventKey+'",\n"media_duration":'+parseFloat(this.video.data.media.duration)+',\n"referrer":"'+this.video.params.pageUrl+'",',this.video.email()&&(b+='"email":"'+this.video.email()+'",'),this.video.foreignData()&&(b+='"foreignData":'+a.JSON.stringify(this.video.foreignData())+","),this.params.conversionType&&(b+='"conversion_type":"'+this.conversions[this.params.conversionType]+'",'),this.params.conversionData&&(b+='"conversion_data":"'+this.params.conversionData+'",'),b+='"event_details":['},b.prototype._dataSuffix=function(){return"]}"},b.prototype.setupVisitorKey=function(){return this.setupVisitorKeyFromCookie()||this.setupVisitorKeyFromFlash()||this.setupVisitorKeyFromFlashShim()||this.setupVisitorKeyFromJs()},b.prototype.setupVisitorKeyFromFlash=function(){return"flash"===this.video.embedType?(this._visitorKey=this.video.getVisitorKey(),this.saveVisitorKeyInCookie(this._visitorKey),this.hasVisitorKey(!0)):!1},b.prototype.setupVisitorKeyFromFlashShim=function(){var b,c,d,e,f=this;return a.judy.flashSupport()?(d=""+this.video.uuid+"_flash_shim",c=Wistia.generate.flashEmbedObject(this.video.data.media,{shouldTrack:!1,uuid:d,wmode:"transparent"}),c.style={height:"1px",left:"0px",position:"absolute",top:"0px",width:"1px"},b=a.generate.html(c),e=document.createElement("div"),a.elem.prepend(this.video.container,e),e.innerHTML=b,this._getVisitorKeyFromFlashShim=function(b){var c;if(null==b&&(b=0),b>25){try{a.elem.remove(e)}catch(g){c=g}return void f.setupVisitorKeyFromJs()}try{return f._visitorKey=document[d].getVisitorKey(),f.saveVisitorKeyInCookie(f._visitorKey),f.hasVisitorKey(!0),a.elem.remove(e)}catch(g){return c=g,a.timeout(""+f.video.uuid+".get_visitor_key_from_flash_shim",function(){return f._getVisitorKeyFromFlashShim(b+1)},Math.max(1e3,25+50*b))}},this._getVisitorKeyFromFlashShim()):!1},b.prototype.setupVisitorKeyFromCookie=function(){return this._visitorKey=a.cookie("__distillery"),this._visitorKey?this.hasVisitorKey(!0):void 0},b.prototype.setupVisitorKeyFromJs=function(){return this.video._visitorKey?this._visitorKey=this.video._visitorKey:this._visitorKey=(new Date).getTime().toString()+"-"+Math.random(),this.saveVisitorKeyInCookie(this._visitorKey),this.hasVisitorKey(!0)},b.prototype.saveVisitorKeyInCookie=function(b){var c;return c=new Date,c.setTime(c.getTime()+31536e6),a.cookie("__distillery",b,{expires:c,path:"/"})},b.prototype.newEventKey=function(){return"flash"===this.video.embedType?this.video.getEventKey():(new Date).getTime().toString()+"e"+Math.random()},b.prototype.initialize=function(){return this.initializedOnce||(this.initializedOnce=!0,this.log("initialized"),this.transmit()),this},b.initializedOnce=!1,b.prototype.monitor=function(){var b=this;this.stopMonitoring(),this.initialize(),this.onPlay=function(){b.log("play")},this.onPause=function(){Math.abs(b.video.duration()-b.video.time())>.3&&b.log("pause")},this.onEnd=function(){b.log("end"),b.transmit()},this.onSeek=function(a,c){Math.abs(c-a)>=5&&b.log("seek")},this.monitoring=!0,this.video.bind("play",this.onPlay),this.video.bind("pause",this.onPause),this.video.bind("end",this.onEnd),this.video.bind("seek",this.onSeek),a.timeout(""+this.video.uuid+".start_tracking_timeout",function(){var c;c=function(){return"playing"===b.video.state()&&b.log("update"),b.transmit(),a.timeout(""+b.video.uuid+".tracking_loop",c,b.params.transmitInterval)},a.timeout(""+b.video.uuid+".tracking_loop",c,b.params.transmitInterval),b.transmit()},Math.random()*this.params.transmitInterval+1e3),"playing"===this.video.state()&&this.onPlay()},b.prototype.stopMonitoring=function(){this.monitoring=!1,this.video.unbind("play",this.onPlay),this.video.unbind("pause",this.onPause),this.video.unbind("end",this.onEnd),this.video.unbind("seek",this.onSeek)},b.prototype.sendToDistillery=function(b){a.remote.script(""+this.video.data.media.distilleryUrl+"?data="+encodeURIComponent(b))},b.prototype.transmit=function(b){var c=this;null==b&&(b={}),this.video.params.doNotTrack||(this.eventQueue.length>0||b.force)&&this.hasVisitorKey(function(){var b;return b=c._dataPrefix()+c.eventQueue.join(",")+c._dataSuffix(),c.video.trigger("transmit-stats",b),c.sendToDistillery(a.base64.encode(b)),c.eventQueue=[]})},b.prototype.log=function(a,b,c){var d,e;this.video.params.shouldTrack&&(e=this.video.time(),null==e&&(e="beforeplay"===this.video.state()?0:this.video.duration()),e=e.toFixed(1),d=(new Date).getTime()-this.clockStart,"conversion"===a?(this.params.conversionType=b,this.params.conversionData=c,this.transmit({force:!0})):this.eventQueue.push('{\n"key":"'+a+'",\n"value":'+e+',\n"timeDelta":'+d+"\n}"))},b.prototype.visitorKey=function(){return this._visitorKey},b.prototype.eventKey=function(){return this._eventKey},b}()}(Wistia),Wistia.extend({base64:{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,f,g,h,i,j;for(i=0,j="";i<a.length;)b=a.charCodeAt(i++),c=a.charCodeAt(i++),d=a.charCodeAt(i++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),j=j+this._keyStr.charAt(e)+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h);return j}}});var __slice=[].slice;!function(a){return a.extend({constant:{appHost:"app.wistia.com",sslAppHost:"app.wistia.com",embedHost:"fast.wistia.com",sslEmbedHost:"fast.wistia.com",oembedHost:"get-embed.wistia.com",externalEmbedHost:"fast.wistia.net",externalSslEmbedHost:"fast.wistia.net",assetHost:"embed.wistia.com",assetSslHost:"embed-ssl.wistia.com",freeAssetHost:"embed-0.wistia.com",freeAssetSslHost:"embed-ssl.wistia.com"},remote:{assetUrlWithCorrectHost:function(b,c,d){return null==d&&(d=a.url.proto()),c=a.url.parse(c),c.protocol=d,(c.host===a.constant.assetHost||c.host===a.constant.freeAssetHost||c.host===a.constant.assetSslHost||c.host===a.constant.freeAssetSslHost)&&(c.host=b.branding?"https:"===d?a.constant.freeAssetSslHost:a.constant.freeAssetHost:"https:"===d?a.constant.assetSslHost:a.constant.assetHost),c.absolute()},embedHost:function(b){return null==b&&(b=window.location.protocol),"https:"===b?a.constant.sslEmbedHost:a.constant.embedHost},externalEmbedHost:function(b){return null==b&&(b=window.location.protocol),"https:"===b?a.constant.externalSslEmbedHost:a.constant.externalEmbedHost},appHost:function(b){return null==b&&(b=window.location.protocol),"https:"===b?a.constant.sslAppHost:a.constant.appHost},assetHost:function(b){return null==b&&(b=window.location.protocol),"https:"===b?a.constant.assetSslHost:a.constant.assetHost},script:function(b,c,d){var e,f,g,h,i,j,k,l,m,n;return null==d&&(d=8e3),h=new a.StopGo,j=new a.StopGo,m=document.createElement("script"),m.src=b,m.async=!0,m.type="text/javascript",n=m.id=a.seqId(),f=null,g=!1,e=function(){return clearTimeout(f),clearTimeout(i),f=setTimeout(function(){var a;return(a=document.getElementById(n))?(a.parentNode.removeChild(a),a.onreadystatechange=m.onload=m.onerror=null):void 0},500)},k=function(){return g=!0,"function"==typeof c&&c(),h(!0,"failed"),e(),j.go()},l=function(){var a;a=m.readyState,!g&&(!a||/loaded|complete/.test(a))&&(g=!0,"function"==typeof c&&c(),h(!0,"success"),e())},i=setTimeout(k,d),m.onerror=k,m.onreadystatechange=m.onload=l,a.elem.append(document.body||document.head,m),{loaded:h,error:function(){return j}}},scripts:function(){var b,c,d,e,f,g,h,i,j,k,l,m;for(h=1<=arguments.length?__slice.call(arguments,0):[],h[0]instanceof Array&&(c=h[1],h=h[0],c&&(h=h.concat(c))),"require"===h[h.length-1]?(e=a.remote.requireScript,h=h.slice(0,-1)):e=a.remote.script,h=this.scriptInputsToHash(h),f=[],b=[],j=function(b,c,d){var g;return(g=a.StopGo).when.apply(g,f).run(function(){var a,f;return b.fn?(f=function(){var a;try{return b.fn()}catch(e){return a=e,"undefined"!=typeof console&&null!==console&&console.log(a.message),"undefined"!=typeof console&&null!==console?console.log(a.stack):void 0}finally{c.go(),d.go()}},b.async?setTimeout(f,1):f()):b.src?(a=function(){return e(b.src).loaded(function(a){return d.go(),c.go()})},b.async?(setTimeout(a,1),c.go()):setTimeout(a,1)):void 0})},k=0,l=h.length;l>k;k++)g=h[k],d=new a.StopGo,i=new a.StopGo,j(g,d,i),f.push(d),b.push(i);return{loaded:(m=a.StopGo).when.apply(m,b)}},require:function(){var b,c,d;return c=1<=arguments.length?__slice.call(arguments,0):[],b=(d=a.remote).scripts.apply(d,__slice.call(c).concat(["require"])),b.wait=function(c){return b.loaded(c),{require:function(){var c;return c=1<=arguments.length?__slice.call(arguments,0):[],b.loaded(function(){var b;return(b=a.remote).require.apply(b,c)})}}}},scriptInputsToHash:function(b){var c,d,e,f;for(f=[],d=0,e=b.length;e>d;d++)c=b[d],f.push("string"==typeof c?{src:c,async:!1}:a.obj.isObject(c)?c:{fn:c,async:!1});return f},post:function(a){var b;b=window.XDomainRequest?new window.XDomainRequest:new XMLHttpRequest,b.open("POST",a,!0),b.send()},media:function(b,c){var d;a.data(["remote-media",b])?a.timeout("remote-media."+b+"."+a.seqId(),function(){return c(a.data(["remote-media",b]))}):(d=""+("https:"===location.protocol?"https:":"http:")+"//"+a.constant.embedHost+"/embed/medias/"+b+".json",this.fetch(d,{},function(d){d.error?(a.data(["remote-media",b],d),c(d)):(a.data(["remote-media",b],d.media),c(d.media))},{onerror:function(){window.console&&console.log("Timed out fetching "+d)},timeout:1e4}))},playlist:function(b,c){var d;a.data(["remote-playlist",b])?a.timeout("remote-playlist."+b+"."+a.seqId(),function(){return c(a.data(["remote-playlist",b]))}):(d=""+("https:"===location.protocol?"https:":"http:")+"//"+a.constant.embedHost+"/embed/playlists/"+b+".json",this.fetch(d,{},function(d){a.data(["remote-playlist",b],d),c(d)},{onerror:function(){window.console&&console.log("Timed out fetching "+d)},timeout:1e4}))},fetch:function(b,c,d,e){var f;null==e&&(e={}),e.timeout||(e.timeout=5e3),e.onerror||(e.onerror=function(){}),f=setTimeout(e.onerror,e.timeout),a.jsonp.get(b,c,function(a){clearTimeout(f),d&&d(a)})}}})}(Wistia),Wistia.jsonp||(Wistia.jsonp=function(){function a(a){var b=document.createElement("script"),d=!1;b.src=a,b.async=!0,b.onload=b.onreadystatechange=function(){!d&&(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState)&&(d=!0,b.onload=b.onreadystatechange=null,b&&b.parentNode&&b.parentNode.removeChild(b))},c||(c=document.getElementsByTagName("head")[0]),c.appendChild(b)}function b(b,c,h){d="?",c=c||{};for(e in c)c.hasOwnProperty(e)&&(d+=encodeURIComponent(e)+"="+encodeURIComponent(c[e])+"&");var i="json"+ ++f;return g[i]=function(a){h(a);try{delete g[i]}catch(b){}g[i]=null},a(b+d+"callback="+i),i}var c,d,e,f=0,g=this;return{get:b}}()),function(a){return a.Plugin||(a.Plugin={}),a.Plugin.Base?void 0:(a.Plugin.Base=function(){function b(){this.pluginName="plugin",this}return b.prototype.instances=function(){return a.data(["plugins",this.pluginName,this.video.uuid])},b.prototype.register=function(b){var c;return c=this.playlist||this.video,c.plugins[this.uuid]=b,a.data(["plugins",this.pluginName,c.uuid,this.uuid],b)},b.prototype.remove=function(b){var c;return null==b&&(b={}),c=this.playlist||this.video,c.plugins[this.uuid]=null,a.removeData(["plugins",this.pluginName,c.uuid,this.uuid]),delete c.plugins[this.uuid],delete c.plugin[this.pluginName],b.dontFit?void 0:(a.grid.fitHorizontal(c),a.grid.fitVertical(c))},b.prototype.fit=function(){},b.prototype.init=function(b,c){return null==b.plugins&&(b.plugins={}),(null!=b?b.playlist:void 0)?this.playlist=b:this.video=b,this.target=this.playlist||this.video,this.options=c||{},this.params=a.extend({},c||{}),this.uuid=this.params.uuid||a.seqId("wistia_","_plugin")},b}(),a.plugin?void 0:(a.plugin=function(b,c){var d,e,f;return(d=null!=(e=a.pluginQueue)&&null!=(f=e[b])?f.shift():void 0)&&(d.video&&d.video.isDown()?d.video.bind("up",function(){return d.video.plugin[b]=c(d.video,d.options)||!0,this.unbind}):d.video.plugin[b]=c(d.video,d.options)||!0),a.plugin[b]?void 0:a.plugin[b]=c},a.plugin._scriptsFromVideo=function(b){var c,d,e,f,g,h,i;f=[],i=b.options.plugin;for(d in i)e=i[d],(null!=e?e.on:void 0)!==!1&&(g=function(){switch(d){case"socialbar":return"socialbar-v1";case"requireEmail":return"requireEmail-v1";case"postRoll":return"postRoll-v1";case"transcript":return"transcript-v2";default:return d}}(),c={name:g,options:e,src:""+a.proto()+"//"+a.remote.embedHost()+"/assets/external/"+g+".js",async:null!=e.async?e.async:!/^(requireEmail|socialbar|transcript)/.test(d)},e.src&&a.plugin._allow3rdParty(b)&&(c.src=e.src),/transcript/.test(d)&&(h="https:"===a.proto()?"https://s3.amazonaws.com/origin-p3.3playmedia.com/javascripts/vendor/jquery-1.6.2.min.js":"http://p3.3playmedia.com/javascripts/vendor/jquery-1.6.2.min.js",f.push({src:h,async:!1})),f.push(c));return a.plugin._setFnForDefinedPlugins(b,f),f},a.plugin._inject=function(b,c,d){var e,f;return null==d&&(d={}),d.on!==!1?(e=""+a.proto()+"//"+a.remote.embedHost()+"/assets/external/"+c+".js",f=[{name:c,options:d,src:d.src&&a.plugin._allow3rdParty(b)?d.src:e,async:!0}],a.plugin._setFnForDefinedPlugins(b,f),a.plugin._execQueue(b,f)):void 0},a.plugin._allow3rdParty=function(a){return!/([\w\_\-]+\.)?wistia\.(com|st)$/.test(window.location.hostname)},a.plugin._setFnForDefinedPlugins=function(b,c){var d,e,f,g;for(g=[],e=0,f=c.length;f>e;e++)d=c[e],a.plugin[d.name]&&g.push(function(c){return c.fn=function(){return b.plugin[c.name]=a.plugin[c.name](b,c.options)||!0},c.async=!1}(d));return g},a.plugin._queueUndefinedPlugins=function(b,c){var d,e,f,g,h,i;for(null==a.pluginQueue&&(a.pluginQueue={}),i=[],g=0,h=c.length;h>g;g++)e=c[g],e.subScripts?i.push(function(){var c,g,h,i;for(h=e.subScripts,i=[],c=0,g=h.length;g>c;c++)f=h[c],d=f.name||f.src,null==a.pluginQueue[d]&&(a.pluginQueue[d]=[]),i.push(e.fn?void 0:a.pluginQueue[d].push({video:b,options:f.options}));return i}()):(d=e.name||e.src,null==a.pluginQueue[d]&&(a.pluginQueue[d]=[]),i.push(e.fn?void 0:a.pluginQueue[d].push({video:b,options:e.options})));return i},a.plugin._execQueue=function(b,c,d){return a.plugin._queueUndefinedPlugins(b,c),a.remote.scripts(c,d)},a.plugin._init=function(b,c,d){var e,f,g;return g=b.charAt(0).toUpperCase()+b.substr(1),f=a.Plugin[g],e=new f,e.init(c,d),e},a.plugin._instance=function(b,c,d){return a.data(["plugins",b,c.uuid,d])},a.plugin._remove=function(b,c,d){var e;null!=(e=a.plugin._instance(b,c,d))&&e.remove()},a.plugin._isActive=function(b,c,d){return!!a.plugin._instance(b,c,d)},a.plugin._defined=function(){var b,c,d,e;d=a.plugin,e=[];for(b in d)c=d[b],/^_/.test(b)||e.push({name:b,options:c});return e}))}(Wistia),function(a){return a.extend({seo:{writeMeta:function(a,b){this.metaExists(a)||this.forceWriteMeta(a,b)},forceWriteMeta:function(a,b){var c,d;d=document.getElementsByTagName("script")[0],c=document.createElement("meta"),c.setAttribute("property",a),c.setAttribute("content",b),d.parentNode.insertBefore(c,d)},metaExists:function(a){var b,c,d,e;for(e=document.getElementsByTagName("meta"),c=0,d=e.length;d>c;c++)if(b=e[c],b.getAttribute("property")===a)return!0;return!1},inject:function(b,c){var d,e,f,g;null==c&&(c={}),this.metaExists("og:video")||(f=a.judy.judge(b,c),e=f.media,g=e.sitemap_entry,d={data:f,options:c,params:c,videoWidth:function(){return 0},videoHeight:function(){return 0}},this.writeMeta("og:type","article"),this.writeMeta("og:title",(null!=g?g.title:void 0)||document.title||e.name),this.writeMeta("og:url",(null!=g?g.loc:void 0)||location.href),this.writeMeta("og:image",a.generate.video("stillUrl",d)),this.writeMeta("og:video",a.generate.video("flashUrl",d)),c.videoWidth&&this.writeMeta("og:video:width",c.videoWidth),c.videoHeight&&this.writeMeta("og:video:height",c.videoHeight),this.writeMeta("og:video:type","application/x-shockwave-flash"))}}})}(Wistia),function(a){var b;if(a.extend({localStorage:function(b,c,d){var e,f;if(null==d&&(d=!1),a.detect.localstorage&&a.detect.json){if(f=a.data("localStorage")||{},null!=c){d?a.obj.unset(f,b):a.obj.set(f,b,c),a.data("localStorage",f);try{localStorage.wistia=JSON.stringify(f)}catch(g){e=g,"undefined"!=typeof console&&null!==console&&console.log(e)}return c}return null!=b?a.obj.get(f,b):f}},removeLocalStorage:function(a){return this.localStorage(a,"nada",!0)},dumpLocalStorage:function(){var b;if(a.detect.localstorage&&a.detect.json){a.removeData("localStorage");try{localStorage.removeItem("wistia")}catch(c){b=c,"undefined"!=typeof console&&null!==console&&console.log(b)}}}}),a.detect.localstorage&&a.detect.json)try{return localStorage.wistia?a.data("localStorage",JSON.parse(localStorage.wistia)):a.data("localStorage",{})}catch(c){return b=c,a.data("localStorage",{})}}(Wistia),function(a){return a.extend({cookie:function(b,c,d){var e,f,g,h;return arguments.length>1&&"[object Object]"!==String(c)?(d=a.extend({},d),null==c&&(d.expires=-1),"number"==typeof d.expires&&(e=d.expires,h=d.expires=new Date,h.setDate(h.getDate()+e)),c=String(c),document.cookie=[encodeURIComponent(b),"=",d.raw?c:encodeURIComponent(c),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")):(d=c||{},f=d.raw?function(a){return a}:decodeURIComponent,(g=new RegExp("(?:^|; )"+encodeURIComponent(b)+"=([^;]*)").exec(document.cookie))?f(g[1]):null)}})}(Wistia),function(a){a.extend({gridifyCss:function(a){var b;return b=a.replace(/_grid$/,""),"#"+b+",#"+b+" *{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box;}\n#"+a+"_wrapper{font-family:Arial,sans-serif;font-size:14px;height:100%;position:relative;text-align:left;width:100%;}\n#"+a+"_above{position:relative;}\n#"+a+"_main{display:block;height:100%;position:relative;}\n#"+a+"_behind{height:100%;left:0;position:absolute;top:0;width:100%;}\n#"+a+"_center{height:100%;position:relative;width:100%;}\n#"+a+"_front{display:none;height:100%;left:0;position:absolute;top:0;width:100%;}\n#"+a+"_top_inside{position:absolute;left:0;top:0;width:100%;}\n#"+a+"_top{width:100%;position:absolute;bottom:0;left:0;}\n#"+a+"_bottom_inside{position:absolute;left:0;bottom:0;width:100%;}\n#"+a+"_bottom{width:100%;position:absolute;top:0;left:0;}\n#"+a+"_left_inside{height:100%;position:absolute;left:0;top:0;}\n#"+a+"_left{height:100%;position:absolute;right:0;top:0;}\n#"+a+"_right_inside{height:100%;right:0;position:absolute;top:0;}\n#"+a+"_right{height:100%;left:0;position:absolute;top:0;}\n#"+a+"_below{position:relative;}"},gridifyHtml:function(a){return{id:""+a+"_wrapper",childNodes:[{id:""+a+"_above"},{id:""+a+"_main",childNodes:[{id:""+a+"_behind"},{id:""+a+"_center"},{id:""+a+"_front"},{id:""+a+"_top_inside",childNodes:{id:""+a+"_top"}},{id:""+a+"_bottom_inside",childNodes:{id:""+a+"_bottom"}},{id:""+a+"_left_inside",childNodes:{id:""+a+"_left"}},{id:""+a+"_right_inside",childNodes:{id:""+a+"_right"}}]},{id:""+a+"_below"}]}},gridify:function(b,c){var d,e,f,g,h,i;for(e={},d=""+c.id+"_grid",a.detect.browser.old&&(c.style.width=""+a.elem.width(c)+"px",c.style.height=""+a.elem.height(c)+"px"),c.innerHTML=a.generate.html(a.gridifyHtml(d)),i=["wrapper","main","above","below","top","right","bottom","left","top_inside","right_inside","bottom_inside","left_inside","front","center","behind"],g=0,h=i.length;h>g;g++)f=i[g],e[f]=document.getElementById(""+d+"_"+f);return a.util.addInlineCss(e.wrapper,a.gridifyCss(d)),a.detect.browser.old?b.rawEmbed&&b.aspectRatio&&(e.main.style.height=""+a.elem.width(e.center)/b.aspectRatio+"px"):(e.wrapper.style.height=""+a.elem.height(c)+"px",e.main.style.width=""+a.elem.width(c)+"px"),e},grid:{allNodesHidden:function(a){var b,c,d;if(0===a.length)return!0;for(c=0,d=a.length;d>c;c++)if(b=a[c],b.style&&"none"!==b.style.display)return!1;return!0},zeroEmptySections:function(a){var b,c,d,e,f,g;for(f=["top","bottom","left","right","above","below"],g=[],d=0,e=f.length;e>d;d++)c=f[d],b=a.grid[c],b.childNodes.length?this.allNodesHidden(b.childNodes)?(b.style.height="0px",b.style.fontSize="0px",b.style.lineHeight="0px",g.push(b.isEmpty=!0)):(b.style.height="",b.style.fontSize="",g.push(b.style.lineHeight="")):(b.appendChild(document.createTextNode(" ")),b.style.height="0px",b.style.fontSize="0px",b.style.lineHeight="0px",g.push(b.isEmpty=!0));return g},wrapperHeight:function(b){var c,d;return c=b.grid.wrapper,d=a.elem.height(c),a.detect.browser.old&&(b.params.rawEmbed&&b.container&&(d=parseInt(b.container.currentStyle.height,10)),b.params.rawEmbed||(d=a.util.winHeight())),d},wrapperWidth:function(b){var c,d;return c=b.grid.wrapper,d=a.elem.width(c),a.detect.browser.old&&(b.params.rawEmbed&&b.container&&(d=parseInt(b.container.currentStyle.width,10)),b.params.rawEmbed||(d=a.util.winWidth())),d},fitVertical:function(b){var c,d,e,f,g,h,i;(null!=(i=b.params)?i.dontFit:0)||(this.zeroEmptySections(b),d=b.grid,e=d.main,h=d.wrapper,g=Math.max(a.elem.height(d.above),a.elem.height(d.top)),c=Math.max(a.elem.height(d.below),a.elem.height(d.bottom)),f=Math.max(0,this.wrapperHeight(b)-g-c),e.style.height=""+f+"px",0===a.elem.width(d.left)&&(e.style.left="0px"),e.style.marginTop=""+a.elem.height(d.top)+"px")},fitHorizontal:function(b){var c,d,e,f,g,h,i;(null!=(i=b.params)?i.dontFit:0)||(this.zeroEmptySections(b),c=b.grid,h=c.wrapper,e=c.main,d=a.elem.width(c.left),g=a.elem.width(c.right),f=this.wrapperWidth(b)-d-g,e.style.width=f+"px",e.style.left=d+"px")},fit:function(a,b){/left|right/.test(b)?this.fitHorizontal(a):/top|bottom|above|below/.test(b)&&this.fitVertical(a),a.ieSizeHack()}}})}(Wistia),function(a){return a.Color=function(){function b(b){b instanceof a.Color?(this.r=b.r,this.g=b.g,this.b=b.b,this.a=b.a):b?this.parse(b):(this.r=this.g=this.b=0,this.a=1),this}var c,d,e,f,g,h,i;return g=/^#?([0-9a-f]{3,4}|[0-9a-f]{6,8})$/i,i=/^rgba?\((\d{1,3}(?:\.\d+)?%?),\s*(\d{1,3}(?:\.\d+)?%?),\s*(\d{1,3}(?:\.\d+)?%?)(?:,\s*([01]?\.?\d*))?\)$/,h=/^\d+(\.\d+)*%$/,d=/([0-9a-f])/gi,c=function(a){return.5+a<<0},f=function(a){return h.test(a)?2.55*parseFloat(a):a},e=function(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a},b.prototype.parse=function(a){var b,c;return g.test(a)?(c=a.replace(/^\#/,""),(3===c.length||4===c.length)&&(c=c.replace(d,"$1$1")),this.r=parseInt(c.substr(0,2),16),this.g=parseInt(c.substr(2,2),16),this.b=parseInt(c.substr(4,2),16),8===c.length?this.a=parseInt(c.substr(6,2),16)/255:this.a=1):i.test(a)&&(b=a.match(i),this.r=parseFloat(f(b[1])),this.g=parseFloat(f(b[2])),this.b=parseFloat(f(b[3])),b[4]?this.a=parseFloat(b[4]):this.a=1),this},b.prototype.clone=function(){return new a.Color(this)},b.prototype._hslFromRgb=function(){var a,b,c,d,e,f,g,h,i,j;return h=this.r/255,c=this.g/255,a=this.b/255,f=Math.max(h,c,a),g=Math.min(h,c,a),e=(f+g)/2,j=f,f===g&&(this._h=this._s=0),b=f-g,0===b?(this._h=0,this._s=0,this._l=100*h,this):(i=e>.5?b/(2-f-g):b/(f+g),d=f===h?(c-a)/b+(a>c?6:0):f===c?(a-h)/b+2:(h-c)/b+4,d/=6,this._h=360*d,this._s=100*i,this._l=100*e,this)},b.prototype._rgbFromHsl=function(){var a,b,c,d,f;return a=this._h/360,f=this._s/100,b=this._l/100,d=.5>b?b*(1+f):b+f-b*f,c=2*b-d,this.r=255*e(c,d,a+1/3),this.g=255*e(c,d,a),this.b=255*e(c,d,a-1/3),this},b.prototype.blendChannel=function(a,b,c){return this[a]=c*b+(1-c)*this[a],this},b.prototype.blend=function(b,c){return b=new a.Color(b),this.blendChannel("r",b.r,c),this.blendChannel("g",b.g,c),this.blendChannel("b",b.b,c),this},b.prototype.lightenChannel=function(a,b){return this[a]+=b,this[a]<0?this[a]=0:this[a]>255&&(this[a]=255),this},b.prototype.lighten=function(a){return this.lightenChannel("r",a),this.lightenChannel("g",a),this.lightenChannel("b",a),this},b.prototype.darken=function(a){return this.lighten(-a)},b.prototype.lightness=function(a){return this._hslFromRgb(),null!=a?(this._l=Math.max(0,Math.min(100,a)),this._rgbFromHsl(),this):this._l},b.prototype.saturation=function(a){return this._hslFromRgb(),null!=a?(this._s=Math.max(0,Math.min(100,a)),this._rgbFromHsl(),this):this._s},b.prototype.grayLevel=function(){return(.299*this.r+.587*this.g+.114*this.b)/255},b.prototype.whiteLevel=function(){return Math.min(Math.min(this.r,this.g),this.b)},b.prototype.isGrayscale=function(){return this.r===this.g&&this.g===this.b},b.prototype.distanceFrom=function(a){return Math.sqrt(Math.pow(this.r-a.r,2)+Math.pow(this.g-a.g,2)+Math.pow(this.b-a.b,2))},b.prototype.channelDominance=function(){var a=this;return["r","g","b"].sort(function(b,c){return a[c]-a[b]})},b.prototype.alpha=function(a){return null!=this.a?(this.a=a,this):this.a},b.prototype.red=function(a){return null!=a?(this.r=a,this):this.r},b.prototype.green=function(a){return null!=this.g?(this.g=a,this):this.g},b.prototype.blue=function(a){return null!=this.b?(this.b=a,this):this.b},b.prototype.toHex=function(){var a,b,c;return c=Math.round(this.r).toString(16),b=Math.round(this.g).toString(16),a=Math.round(this.b).toString(16),1===c.length&&(c="0"+c),1===b.length&&(b="0"+b),1===a.length&&(a="0"+a),""+c+b+a},b.prototype.toHexWithAlpha=function(){var a;return a=Math.round(255*this.a).toString(16),1===a.length&&(a="0"+a),""+a+this.toHex()},b.prototype.toRgb=function(){return"rgb("+Math.round(this.r)+","+Math.round(this.g)+","+Math.round(this.b)+")"},b.prototype.toRgba=function(){return"rgba("+Math.round(this.r)+","+Math.round(this.g)+","+Math.round(this.b)+","+this.a+")"},b.prototype.toPercent=function(){return"rgba("+this.r/255*100+"%,"+this.g/255*100+"%,"+this.b/255*100+"%,"+this.a+")"},b.prototype.toIeGradient=function(){return"progid:DXImageTransform.Microsoft.gradient(startColorStr='#"+this.toHexWithAlpha()+"', endColorStr='#"+this.toHexWithAlpha()+"')"},b.prototype.toString=function(){return this.toPercent()},b}()}(Wistia),function(a){return a.embeds?void 0:(a.embeds={},a.embeds.setup=function(b){var c,d,e,f,g,h;for(b=a.embeds.uninitialized(b),h=[],f=0,g=b.length;g>f;f++)c=b[f],d=a.embeds.hashedIdForElem(c),e=a.embeds.optionsForElem(c)||{},c.id||(c.id=a.seqId("wistia_")),e.container=c.id,h.push(a.embed(d,e));return h},a.embeds.hashedIdForElem=function(a){var b,c;return(null!=(b=a.className)&&null!=(c=b.match(/wistia_async_([^\s]+)/))?c[1]:void 0)||null},a.embeds.optionsForElem=function(a){var b;return a.id?(null!=(b=window._wopt)?b[a.id]:void 0)||{}:{}},a.embeds.api=function(){var a,b,c,d,e;if(document.querySelectorAll)return document.querySelectorAll("div.wistia_embed");for(b=document.body.getElementsByTagName("div"),
e=[],c=0,d=b.length;d>c;c++)a=b[c],/(^| )wistia_embed( |$)/.test(a.className)&&e.push(a);return e},a.embeds.uninitialized=function(b){var c,d,e,f,g;for(null==b&&(b=a.embeds.api()),e=[],f=0,g=b.length;g>f;f++)c=b[f],d=a.embeds.hashedIdForElem(c),d&&!c.wistiaApi&&e.push(c);return e},a.embeds.initialized=function(b){var c,d,e,f,g;for(null==b&&(b=a.embeds.api()),e=[],f=0,g=b.length;g>f;f++)c=b[f],d=a.embeds.hashedIdForElem(c),d&&c.wistiaApi&&e.push(c);return e},a.embeds.observe=function(){var b;if(!a.embeds.initObserver)return a.embeds.initObserver=a.elem.mutationObserver(function(b){var c,d,e,f,g,h,i,j;for(c=[],f=0,h=b.length;h>f;f++)for(d=b[f],j=d.addedNodes||[],g=0,i=j.length;i>g;g++)e=j[g],a.elem.hasClass(e,"wistia_embed")&&c.push(e);return setTimeout(function(){return a.embeds.setup(c)},10)}),b={subtree:!0,childList:!0},a.embeds.initObserver.observe(document.body,b)},a.embeds.unobserve=function(){var b;return null!=(b=a.embeds.initObserver)&&b.disconnect(),a.embeds.initObserver=null},a.embeds.poll=function(){var b;return null==(b=a.embeds)._pollSetupEmbeds&&(b._pollSetupEmbeds=function(){return a.embeds.setup(),a.timeout("setup_embeds",a.embeds._pollSetupEmbeds,500)}),a.embeds._pollSetupEmbeds()},a.embeds.unpoll=function(){return a.clearTimeouts("setup_embeds")},a.embeds.watch=function(){return a._detect.mutationObserver()?a.embeds.observe():a.embeds.poll()},a.embeds.unwatch=function(){return a.embeds.unobserve(),a.embeds.unpoll()},a.flushInit=function(){var a,b,c;if(window.wistiaInit){if(wistiaInit instanceof Array)for(b=0,c=wistiaInit.length;c>b;b++)a=wistiaInit[b],"function"==typeof a&&a();else"function"==typeof wistiaInit&&wistiaInit();return window.wistiaInit=null}},a.watchForInit=function(){return null==a._pollInit&&(a._pollInit=function(){return a.flushInit(),a.timeout("poll_init",a._pollInit,500)}),a._pollInit()},a.api=function(a){return"string"==typeof a&&(a=document.getElementById(a)),(null!=a?a.wistiaApi:void 0)?a.wistiaApi:a.id?"undefined"!=typeof console&&null!==console?console.log("No API handle found for "+a.id):void 0:"undefined"!=typeof console&&null!==console?console.log("Container must have ID set to be used as an API handle."):void 0},a.api.all=function(){var b;return function(){var c,d,e,f;for(e=a.embeds.initialized(),f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.wistiaApi);return f}()||[]},a.api.first=function(){var b;return b=a.api.all(),b[0]||null},a.api.last=function(){var b;return b=a.api.all(),b[b.length-1]||null},setTimeout(function(){var b;try{return a.embeds.setup(),window.wistiaDontWatch||a.embeds.watch(),a.watchForInit()}catch(c){if(b=c,window.wistiaDebug)return"undefined"!=typeof console&&null!==console?console.log(b):void 0}},10))}(Wistia),angular.module("filters",[]).filter("truncate",function(){return function(a,b,c){return isNaN(b)&&(b=50),"undefined"==typeof c&&(c="..."),a.length<=b||a.length-c.length<=b?a:String(a).substring(0,b-c.length)+c}}),angular.module("UserModule",[]).factory("UserData",["$http",function(a){var b,c,d,e=null;return{getFactory:function(f){return(!c||f)&&(c=a.get("/api/users/me").then(function(c){d=c.data;var f=d.hasOwnProperty("kids")&&d.kids.length>0;return f&&_.each(d.kids,function(a){a.subtitles||(a.subtitles="englishSubtitles")}),b={getData:function(){return d},getKids:function(){return f?d.kids:[]},setKid:function(a){return e=_.findWhere(d.kids,{_id:a}),this.getCurrentKid()},getCurrentKid:function(){return f?(e||(e=d.kids[0]),e):null},checkIfKidExist:function(a,b){if(!a||!b)return!1;for(var c=this.getKids(),d=0;d<c.length;d++)if(c[d].firstName.toLowerCase()===a.toLowerCase()&&c[d].lastName.toLowerCase()===b.toLowerCase())return!0;return!1},updateCoins:function(a){e.coins+=a},updateBookLevel:function(b,c,d){return a.put("/api/kids/"+e._id+"/level",{newLevel:d,termId:b,termIndex:c}).then(function(){e.publicBooksRecords[b+"_"+c].currLevel=d})},updateBestStars:function(a,b,c){var d=e.publicBooksRecords[a+"_"+b];d.bestStarsScore[d.currLevel]=c},updateBookMarkedRead:function(b,c){var d=e.publicBooksRecords[b+"_"+c];d.markedRead||a.put("/api/kids/"+e._id+"/booksmarkedread",{termId:b,termIndex:c,markedRead:!0}).success(function(){d.markedRead=!0})},updateSettings:function(b){return a.put("/api/kids/"+e._id+"/settings",{subtitles:b})},updatePreviousBook:function(a,b){e.previousBook={termId:a,termIndex:b}}}},function(a){return!1})),c}}}]).factory("Auth",["$location","$rootScope","Session","User","Kid","$cookieStore",function(a,b,c,d,e,f){return b.currentUser=f.get("user")||null,f.remove("user"),{login:function(a,d){var e=d||angular.noop;return c.save({email:a.email,password:a.password},function(a){return b.currentUser=a,e()},function(a){return e(a)}).$promise},logout:function(a){var d=a||angular.noop;return c["delete"](function(){return b.currentUser=null,d()},function(a){return d(a)}).$promise},changePassword:function(a,b,c){var e=c||angular.noop;return d.update({oldPassword:a,newPassword:b},function(a){return e(a)},function(a){return e(a)}).$promise},agreeTOS:function(a,b){var c=b||angular.noop;return console.log(d),d.update({tos:a.tos,contactEmailFromFacebook:a.contactEmailFromFacebook,emailNotification:a.emailNotification},function(a){return c(a)},function(a){return c(a)}).$promise},currentUser:function(){return d.get()},isLoggedIn:function(){var a=b.currentUser;return!!a},addKid:function(a,b){var c=b||angular.noop,d=(new Date).getTime().toString();return a.email=d+"@kidstartnow.com",a.role=["kid"],a.password=d,console.log(a),e.save(a,function(a){return c(a)},function(a){return c(a)}).$promise},updateReAuth:function(a,d){var e=d||angular.noop;return c.update({state:a},function(a){return b.currentUser.reAuth=a.state,e()},function(a){return e(a)}).$promise}}}]).factory("Session",["$resource",function(a){return a("/api/session/",null,{update:{method:"PUT"}})}]).factory("User",["$resource",function(a){return a("/api/users/:id",{id:"@id"},{update:{method:"PUT",params:{}},get:{method:"GET",params:{id:"me"}}})}]).factory("Kid",["$resource",function(a){return a("/api/kids/:id",{id:"@id"},{update:{method:"PUT",params:{}},get:{method:"GET",params:{id:"me"}}})}]),angular.module("portalApp",["UserModule","ui.bootstrap","ngCookies","ngResource","ngSanitize","ngRoute","filters"]).config(["$routeProvider","$locationProvider","$httpProvider",function(a,b,c){a.when("/portal",{templateUrl:"partials/books-index",controller:"BooksIndexCtrl",authenticate:!0}).when("/portal/books/:bookUrl",{templateUrl:"partials/book",controller:"BookCtrl"}).when("/portal/addkid",{templateUrl:"partials/add-kid",controller:"AddKidCtrl"}).when("/portal/addparent/link/:parentId",{templateUrl:"partials/add-parent-existing",controller:"AddParentExistingCtrl"}).when("/portal/addparent",{templateUrl:"partials/add-parent",controller:"AddParentCtrl"}).when("/portal/settings",{templateUrl:"partials/settings",controller:"SettingsCtrl"}).when("/portal/active",{templateUrl:"partials/active",controller:"ActiveCtrl"}).otherwise({redirectTo:"/portal"}),b.html5Mode(!0),c.interceptors.push(["$q","$location","$window",function(a,b,c){return{responseError:function(b){return 401===b.status?(c.location="/auth/facebook",a.reject(b)):a.reject(b)}}}])}]).run(["$rootScope","$location","$window","BooksInfoFactory","UserData","Auth",function(a,b,c,d,e,f){function g(e){var f=e.getData().hasOwnProperty("linkId"),g=(e.getData().hasOwnProperty("facebook")&&e.getData().facebook.hasOwnProperty("id"),b.path().toLowerCase());e.getData()&&"null"!==e.getData()||(c.location="/auth/facebook"),f&&!e.getData().tos?b.path("/portal/addparent/link/"+e.getData().linkId):e.getData().hasOwnProperty("tos")&&e.getData().tos?!e.getData().hasOwnProperty("kids")||e.getData().kids.length<=0?b.path("/portal/addkid"):"undefined"==typeof d.getKidId()&&"undefined"!=typeof e.getCurrentKid()._id?(d.init(e.getCurrentKid()._id),-1===g.indexOf("/portal/store")&&b.path("/portal")):a.passedValidations=!0:-1===g.indexOf("/addparent/link")&&b.path("/portal/addparent")}FastClick.attach(document.body);a.UserFactory=null,a.passedValidations=!1,a.$on("$routeChangeStart",function(b,d){d.authenticate&&!f.isLoggedIn()&&(c.location="/auth/facebook"),a.passedValidations||e.getFactory().then(function(b){console.log("loading"),b?(a.UserFactory=b,g(b)):c.location="/auth/facebook"})})}]),angular.module("portalApp").factory("BooksInfoFactory",["$http","$q",function(a,b){var c,d,e={};return{reload:!1,init:function(a){return e.kidId=a,c=null,this.reload=!0,this},getKidId:function(){return e.kidId},findBookByUrl:function(a){if("undefined"==typeof a||"number"==typeof a)throw new Error("Invalid bookUrl passed in");return this.getStories().then(function(b){if(d=_.findWhere(b,{bookUrl:a.toLowerCase()}),!d)throw new Error("BookUrl not found");return d})},getStory:function(a){var b=c.indexOf(d),e=a?1:-1;return a&&b>=c.length-1||!a&&0>=b?null:d=c[b+e]},getStories:function(){if("undefined"==typeof this.getKidId())throw new Error("BooksInfoFactory is not initialized");var d=b.defer(),f=this;return c?(this.reload=!1,d.resolve(c)):a.get("/api/stories/"+e.kidId).then(function(a){c=a.data,_.each(c,function(a){a.bookUrl=a.term.toLowerCase().split(" ").join("-")+"-"+(a.termIndex+1)}),c.sort(function(a,b){return a.index-b.index}),f.reload=!1,d.resolve(c)}),d.promise},getTerms:function(a){var b,d;return this.getStories().then(function(e){return b=_.map(_.filter(c,function(a){return 0===a.termIndex}),function(a){return{termId:a.termId,text:a.term}}),d="undefined"!=typeof a&&a?_.findWhere(b,{termId:a}):_.last(b),[b,d]})}}}]).factory("CheckMobileBrowser",["$window",function(a){var b=a.navigator.userAgent,c=-1!==b.indexOf("iPhone")||-1!==b.indexOf("iPod"),d=-1!==b.indexOf("iPad"),e=c||d,f=-1!==b.indexOf("Android");return{iOs:e,android:f}}]).factory("AvatarFactory",function(){var a=[{avatar:"initial",avatarCustomization:"head",src:"initial_head.png",selectable:!1},{avatar:"fish",avatarCustomization:"head",src:"fish_head.png",selectable:!1,name:"Fish"},{avatar:"jiejie",avatarCustomization:"head",src:"jiejie_head.png",selectable:!0,name:"Jie Jie"},{avatar:"xiaojiling",avatarCustomization:"head",src:"xiaojiling_head.png",selectable:!0,name:"Xiao Ji Ling"},{avatar:"yangyang",avatarCustomization:"head",src:"yangyang_head.png",selectable:!0,name:"Yang Yang"},{avatar:"qiqi",avatarCustomization:"head",src:"qiqi_head.png",selectable:!0,name:"Qi Qi"},{avatar:"yuyu",avatarCustomization:"head",src:"yuyu_head.png",selectable:!0,name:"Yu Yu"},{avatar:"haidaoxiongmao",avatarCustomization:"head",src:"haidaoxiongmao_head.png",selectable:!0,name:"Hai Dao Xiong Mao"},{avatar:"octopus",avatarCustomization:"head",src:"octopus_head.png",selectable:!1,name:"Octopus"},{avatar:"shark",avatarCustomization:"head",src:"shark_head.png",selectable:!1,name:"Shark"}],b="/images/avatars/";return{getAvatars:function(){return _.filter(a,function(a){return a.selectable})},findAvatar:function(c,d){var e=_.findWhere(a,{avatar:c,avatarCustomization:d});return e||(e=_.findWhere(a,{avatar:"initial",avatarCustomization:"head"})),b+e.src}}}).factory("UtilitiesFactory",[function(){return{shuffleArray:function(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a}}}]).factory("QuizRESTfulFactory",["$http","$window",function(a,b){return{createQuiz:function(c,d,e,f,g){return a.post("/api/quizzes/"+d,{kidId:c,termId:e,termIndex:f,level:g,userAgent:b.navigator.userAgent})},updateQuiz:function(b,c,d){return a.put("/api/quizzes/"+b,{completed:c,data:d})}}}]).factory("QuizFactory",["$http","$q","$window","UtilitiesFactory","QuizRESTfulFactory","SoundjsFactory",function(a,b,c,d,e,f){function g(a){a&&(j=[]),k=[],l=[],m=null}var h,i,j=[],k=[],l=[],m=null;return{init:function(a,b,c,i,j){if(!(a&&b&&c&&"undefined"!=typeof i&&j))throw new Error("Missing arguments");return g(!0),e.createQuiz(a,b,c,i,j).then(function(a){h=a.data.quizId,l=a.data.rawQuestionsData;for(var b=0;b<l.length;b++)l[b].numberOfTimesAnsweredWrongly=0,l[b].answeredCorrectly=!1,l[b].choices=l[b].otherChoices.slice().concat(l[b].answer),delete l[b].otherChoices,d.shuffleArray(l[b].choices);return l=d.shuffleArray(l),f.preloadArrayOfKeywords(a.data.resources.sounds,["correct"]).then(function(){return l.length})})},answerQuestion:function(a){if(null===m)throw new Error("No pending question to be answered");if(!a)throw new Error("Answer is invalid");var c=m.answer===a,d=m.answer,f=b.defer();return m.attemptedAnswer=a,m.timeTakenToAnswer=new Date-i,m.created=(new Date).valueOf(),c?(m.answeredCorrectly=!0,console.log("correctly answered")):(m.numberOfTimesAnsweredWrongly++,console.log("wrongly answered")),k.push(m),e.updateQuiz(h,0===l.length,m).then(function(a){m=null,f.resolve(l.length>0?[c,d]:[c,d,a.data])}),f.promise},getNextQuestion:function(){if(null!==m)throw new Error("Pending question has not been answered yet");return l.length?(i=new Date,m=l.pop()):null}}}]).factory("ModalStatusFactory",function(){var a=!1;return{getModalOpenStatus:function(){return a},setModalOpenStatus:function(b){a=b}}}).factory("SoundjsFactory",["$q",function(a){return{preload:function(b){var c=new createjs.LoadQueue(!0),d=a.defer();return createjs.Sound.alternateExtensions=["ogg"],c.installPlugin(createjs.Sound),c.addEventListener("complete",function(){d.resolve("done")}),c.loadManifest(b),d.promise},preloadArrayOfKeywords:function(){for(var a=[],b=[],c=0;c<arguments.length;c++){if(!(arguments[c]instanceof Array))throw new Error(arguments[c]+" is not an array");b=b.concat(arguments[c])}for(var d=0;d<b.length;d++)a.push({id:b[d],src:"sounds/keywords/"+b[d]+"_0.m4a"});return this.preload(a)}}}]),angular.module("portalApp").directive("wistiaEmbed",["CheckMobileBrowser","UserData",function(a,b){return{restrict:"A",scope:{codes:"=",kidId:"=",termIndex:"=",termId:"="},controller:["$scope","$element","$attrs","$window","$timeout","$http","$rootScope",function(b,c,d,e,f,g,h){function i(){f(function(){var c,d,g,h,i,j=640/480;a.iOs?(h=e.innerWidth,i=e.innerHeight):(h=e.document.documentElement.clientWidth,i=e.document.documentElement.clientHeight),g=h/i,j>g?(c=400>h?.8*h:Math.min(.8*h,640),d=c/j):(d=Math.min(i,480),c=d*j),f(function(){"undefined"!=typeof b.wistiaEmbed?(b.wistiaEmbed.videoWidth(c),b.wistiaEmbed.videoHeight(d)):b.codes&&"undefined"!=typeof b.kidId&&(b.wistiaEmbed=Wistia.embed(b.codes,{container:"video_container",trackEmail:b.kidId}))},10)},10)}i(),(e.onresize=function(){i()})(),b.$watchCollection("[codes, kidId, termIndex, termId]",function(a){"undefined"!=typeof b.codes&&"undefined"!=typeof b.kidId&&"undefined"!=typeof b.termIndex&&"undefined"!=typeof b.termId&&(b.wistiaEmbed=Wistia.embed(b.codes,{container:"video_container",trackEmail:b.kidId}),b.wistiaEmbed.bind("play",function(){h.UserFactory.updateBookMarkedRead(b.termId,b.termIndex)}))})}],link:function(a,b,c){}}}]).directive("playSound",function(){return{restrict:"A",link:function(a,b,c){b.bind("click",function(){createjs.Sound.play(c.soundId)})}}}).directive("birthday",function(){return{restrict:"E",replace:!0,scope:{dateFields:"="},template:'<div class="form-inline">  <div class="form-group noPadding">    <select name="dateFields.day" data-ng-model="dateFields.day" placeholder="Day" class="form-control" ng-options="day for day in days" ></select>  </div>  <div class="form-group noPadding">    <select name="dateFields.month" data-ng-model="dateFields.month" placeholder="Month" class="form-control" ng-options="month.value as month.name for month in months" value="{{dateField.month}}"></select>  </div>  <div class="form-group noPadding">    <select name="dateFields.year" data-ng-model="dateFields.year" placeholder="Year" class="form-control" ng-options="year for year in years"></select>  </div></div>',link:function(a,b,c){a.days=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],a.months=[{value:0,name:"January"},{value:1,name:"February"},{value:2,name:"March"},{value:3,name:"April"},{value:4,name:"May"},{value:5,name:"June"},{value:6,name:"July"},{value:7,name:"August"},{value:8,name:"September"},{value:9,name:"October"},{value:10,name:"November"},{value:11,name:"December"}],a.years=[];for(var d=1985;d<=(new Date).getYear()+1900;d++)a.years.push(d)}}}).directive("preventRightClick",function(){return function(a,b,c){b.bind("contextmenu",function(){return!1})}}).directive("viewableLink",["$location","$window",function(a,b){return{restrict:"A",scope:{url:"=",viewable:"=",termIndex:"=",termId:"="},link:function(b,c,d){$(c).bind("click",function(c){b.$apply(function(){a.path(b.viewable?"/portal/books/"+b.url:"/portal/store")})})}}}]),angular.module("portalApp").controller("NavCtrl",["$scope","$window","$location","$rootScope","Auth","UserData","BooksInfoFactory","AvatarFactory",function(a,b,c,d,e,f,g,h){a.data={},a.isCollapsed=!0,a.changeCurrentKid=function(b){a.data.currentKid=a.UserFactory.setKid(b),g.init(b),a.isCollapsed=!0},b.scope=a,a.$watch(function(){return null!==d.UserFactory?d.UserFactory.getCurrentKid():void 0},function(b){if(null!==d.UserFactory){a.data.currentKid=d.UserFactory.getCurrentKid(),a.data.kids=d.UserFactory.getKids();var c=a.data.currentKid?a.data.currentKid.avatar:"initial",e=a.data.currentKid?a.data.currentKid.avatarCustomization:"head";a.data.avatarSrc=h.findAvatar(c,e)}}),a.logout=function(){e.logout().then(function(){b.location="/"})}}]).controller("BooksIndexCtrl",["$scope","$rootScope","BooksInfoFactory","UserData","Auth",function(a,b,c,d,e){var f;a.data={terms:[]},a.$watch(function(){return c.reload},function(d){"undefined"!=typeof d&&null!==b.UserFactory&&c.getStories().then(function(d){a.data.stories=d,f=b.UserFactory.getCurrentKid();var e;e="undefined"==typeof f.previousBook?null:f.previousBook.termId,c.getTerms(e).then(function(b){a.data.terms=b[0],a.data.termSelected=b[1],_.each(d,function(a){"undefined"==typeof f.publicBooksRecords[a.termId+"_"+a.termIndex].markedRead?a.isNew=!0:a.isNew=!f.publicBooksRecords[a.termId+"_"+a.termIndex].markedRead})})})})}]).controller("BookCtrl",["$scope","$routeParams","$location","$http","$rootScope","BooksInfoFactory","$modal","ModalStatusFactory","SoundjsFactory",function(a,b,c,d,e,f,g,h,i){var j=b.bookUrl;a.data={keywordsLoaded:!1},a.$watch(function(){return f.reload},function(b){"undefined"!=typeof b&&null!==e.UserFactory&&(a.data.currentKid=e.UserFactory.getCurrentKid(),f.getStories().then(function(b){a.data.stories=b;try{f.findBookByUrl(j).then(function(b){a.data.story=b,e.UserFactory.updatePreviousBook(b.termId,b.termIndex),a.data.storyRecord=a.data.currentKid.publicBooksRecords[b.termId+"_"+b.termIndex],a.data.index=a.data.stories.indexOf(b),i.preloadArrayOfKeywords(_.pluck(a.data.story.keywordsTaught,"simplifiedChar")).then(function(){a.data.keywordsLoaded=!0})})}catch(d){c.path("/portal")}}))}),a.updateBookLevel=function(){var b="elementary"===a.data.storyRecord.currLevel?"intermediate":"elementary";return"elementary"===a.data.storyRecord.currLevel&&a.data.storyRecord.bestStarsScore.elementary<3?(alert("You need to get three stars on elementary mode before you can access intermediate mode."),!1):void e.UserFactory.updateBookLevel(a.data.story.termId,a.data.story.termIndex,b).then(function(){f.init(a.data.currentKid._id)})},a.getStory=function(a){var b=f.getStory(a);b&&c.path(b.bookUrl?"/portal/books/"+b.bookUrl:"/portal")},a.getSrc=function(a,b){return a+b},a.buyBook=function(){console.log("trying to buy book")},a.openModal=function(){h.setModalOpenStatus(!0);var b=g.open({templateUrl:"quizModal.html",controller:"QuizModalCtrl",size:"lg",backdrop:"static",resolve:{info:function(){return{termId:a.data.story.termId,termIndex:a.data.story.termIndex,kidId:a.data.currentKid._id,storyRecord:a.data.storyRecord,title:a.data.story.title}}}});b.result.then(function(){},function(){console.log("closing modal"),h.setModalOpenStatus(!1)})}}]).controller("QuizModalCtrl",["$scope","$timeout","$modalInstance","$rootScope","$http","info","QuizFactory","ModalStatusFactory","SoundjsFactory","BooksInfoFactory",function(a,b,c,d,e,f,g,h,i,j){a.data={title:f.title,selectedChoice:null,choicesDisabled:!1,answeredCorrectly:!1,status:"startScreen",loading:!0,currentKid:d.UserFactory.getCurrentKid(),numberOfQuestionsAsked:1},g.init(f.kidId,"book",f.termId,f.termIndex,f.storyRecord.currLevel).then(function(b){a.data.status="running",a.data.loading=!1,a.data.selectedChoice=null,a.data.currQuestion=g.getNextQuestion(),a.data.totalNumberofQuestions=b}),a.getSrc=function(a,b){return a+b},a.closeModal=function(){c.dismiss()},a.selectChoice=function(b){a.data.choicesDisabled||(createjs.Sound.play(b),a.data.selectedChoice=b)},a.evaluateAnswer=function(){null===a.data.selectedChoice||a.data.choicesDisabled||g.answerQuestion(a.data.selectedChoice).then(function(c){a.data.selectedChoice=null,a.data.choicesDisabled=!0,a.data.answeredCorrectly=c[0],c[0]?createjs.Sound.play("correct"):b(function(){createjs.Sound.play(c[1])},1e3),b(function(){return a.data.numberOfQuestionsAsked<a.data.totalNumberofQuestions&&a.data.numberOfQuestionsAsked++,h.getModalOpenStatus()?(a.data.currQuestion=g.getNextQuestion(),a.data.choicesDisabled=!1,void(3===c.length&&null!==c[2]&&(a.data.status="endScreen",a.data.starsObtainedFromQuiz=c[2].starsObtainedFromQuiz,a.data.bestStarsScore=c[2].bestStarsScore,d.UserFactory.updateBestStars(f.termId,f.termIndex,a.data.bestStarsScore),a.UserFactory.updateCoins(1)))):!1},2500)})}}]),angular.module("portalApp").controller("AddParentCtrl",["$scope","$location","$rootScope","Auth","UserData",function(a,b,c,d,e){a.user={},a.errors={},a.data={parent:{}},a.user=c.UserFactory.getData(),a.submitForm=function(c){console.log("submitting"),a.submitted=!0,c.$valid&&(console.log("submitting"),d.agreeTOS(a.user).then(function(){c.$setPristine(),a.data.parent={},a.submitted=!1,b.path("/portal")})["catch"](function(){c.email.$setValidity("required",!1)}))}}]).controller("AddParentExistingCtrl",["$scope","$window","$location","$http","$routeParams","Auth","UserData",function(a,b,c,d,e,f,g){console.log("starting Add Exisiting Parent Ctrl",h);var h=e.parentId;a.user={},a.errors={},a.UserFactory=null,a.data={parent:{}},g.getFactory().then(function(b){a.UserFactory=b,a.user=b.getData()}),b.scope=a,a.submitForm=function(c){console.log("submitting"),a.submitted=!0,console.log(c),c.$valid&&(console.log("submitting"),c.$setPristine(),a.data.parent={},a.submitted=!1,f.agreeTOS(a.user).then(function(){b.location="/portal"}))}}]).controller("AddKidCtrl",["$scope","$location","$window","$rootScope","AvatarFactory","Auth","UserData",function(a,b,c,d,e,f,g){a.user={},a.errors={},a.data={avatars:e.getAvatars(),kid:{},birthday:{},sameChild:!1},c.scope=a,a.selectAvatar=function(b){a.data.kid.avatar=b.avatar,a.data.kid.avatarCustomization=b.avatarCustomization},a.submitForm=function(b){console.log("submitting form"),a.submitted=!0,a.data.sameChild=!1;var e=!0;return d.UserFactory.checkIfKidExist(a.data.kid.firstName,a.data.kid.lastName)?(a.data.sameChild=!0,void(e=!1)):(a.data.birthday.year&&a.data.birthday.month&&a.data.birthday.day?a.data.kid.birthday=new Date(a.data.birthday.year,a.data.birthday.month,a.data.birthday.day):e=!1,void(e&&b.$valid&&a.data.kid.avatar&&a.data.kid.birthday&&(a.data.kid.parentEmail=d.UserFactory.getData().email,f.addKid(a.data.kid).then(function(a){c.location.reload()}),b.$setPristine(),a.data.kid={},a.submitted=!1)))}}]).controller("SettingsCtrl",["$scope","$http","$rootScope","BooksInfoFactory",function(a,b,c,d){a.data={subtitleOptions:[{text:"Yes",val:"englishSubtitles"},{text:"No",val:"noSubtitles"}],currentKid:c.UserFactory.getCurrentKid(),buttonText:"Save Settings",success:!1},a.$watch(function(){return null!==c.UserFactory?c.UserFactory.getCurrentKid():void 0},function(b){null!==c.UserFactory&&(a.data.currentKid=c.UserFactory.getCurrentKid())}),a.saveSettings=function(){a.data.buttonText="Saving...",c.UserFactory.updateSettings(a.data.currentKid.subtitles).then(function(){d.init(a.data.currentKid._id),a.data.buttonText="Save Settings",a.data.success=!0})}}]),angular.module("portalApp").factory("PurchasedItems",["$resource",function(a){return a("/api/transactions/:id")}]).factory("Store",["$resource",function(a){return a("/api/store")}]),angular.module("portalApp").controller("StoreCtrl",["$scope","$window","$location","$rootScope","Auth","PurchasedItems","BooksInfoFactory","Store",function(a,b,c,d,e,f,g,h){a.data={},a.storePath="/store/create/",a.data.reAuth=d.currentUser.reAuth,a.data.currentKid=d.UserFactory.getCurrentKid(),a.$on("$locationChangeStart",function(a){e.updateReAuth(!1)}),a.$watch(function(){return b.fbApiInit},function(b){b&&(d.currentUser&&d.currentUser.reAuth&&d.currentUser.reAuth===!0?a.data.reAuth=!0:a.reAuthFromFB())}),a.reAuthFromFB=function(){var b=FB.getAuthResponse&&FB.getAuthResponse().signedRequest;FB.login(function(d){a.$apply(d&&d.hasOwnProperty("authResponse")&&d.authResponse.signedRequest!==b?function(){a.data.reAuth=!0,e.updateReAuth(!0)}:function(){c.path("/portal")})},{auth_type:"reauthenticate"})},d.currentUser.hasOwnProperty("booksPaid")&&(a.data.booksPaid=d.currentUser.booksPaid),g.getStories().then(function(b){a.data.stories=b;var c;c="undefined"==typeof a.data.currentKid.previousBook?null:a.data.currentKid.previousBook.termId,g.getTerms(c).then(function(b){a.data.terms=b[0],a.data.termSelected=b[1]})}),a.$watch("data.termSelected",function(b){"undefined"!=typeof b&&(a.data.storySelected=_.filter(a.data.stories,function(b){return b.term===a.data.termSelected.text})[0])}),a.selectStory=function(b){$(document).scrollTop(0),a.data.storySelected=b},a.hasOwnStory=function(b,c){return console.log(b,c),a.data.booksPaid&&a.data.booksPaid.hasOwnProperty(b)&&a.data.booksPaid[b].indexOf(c)>-1?!0:!1},a.onCheckoutStory=function(){if(!a.data.storySelected.availableForPurchase)return alert("You already have access to this story."),!1;var c=(a.storePath+a.data.storySelected.termId+"/"+a.data.storySelected.termIndex,new h({termId:a.data.storySelected.termId,termIndex:a.data.storySelected.termIndex}));c.$save(function(a){a&&a.hasOwnProperty("url")&&(b.location=a.url)})},a.onCheckoutTerm=function(){if(d.currentUser.termsPaid&&-1!==d.currentUser.termsPaid.indexOf(a.data.storySelected.termId))return alert("You already have access to all the stories in this term."),!1;var c=(a.storePath+a.data.storySelected.termId,new h({termId:a.data.storySelected.termId}));c.$save(function(a){a&&a.hasOwnProperty("url")&&(b.location=a.url)})}}]).controller("ActiveCtrl",["$scope","$window","$location","PurchasedItems",function(a,b,c,d){console.log("ActiveCtrl"),a.hashCode="",a.onValidate=function(){console.log(a.hashCode),d.get({id:a.hashCode},function(a){console.log(a)},function(){console.log("Fail")})}}]);